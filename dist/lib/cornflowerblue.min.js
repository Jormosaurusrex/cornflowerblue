/*! Cornflower Blue - v0.1.0 - 2020-02-03
* http://www.gaijin.com/cornflowerblue/
* Copyright (c) 2020 Brandon Harris; Licensed MIT */

class Utils{static getCookie(t){return("; "+document.cookie).split("; "+t+"=").pop().split(";").shift()}static getAllURLParams(t){let e=t?t.split("?")[1]:window.location.search.slice(1),i={};if(e){let t=(e=e.split("#")[0]).split("&");for(let e=0;e<t.length;e++){let s=t[e].split("="),n=s[0],o=void 0===s[1]||s[1];if(n=n.toLowerCase(),"string"==typeof o&&(o=o.toLowerCase()),n.match(/\[(\d+)?\]$/)){let t=n.replace(/\[(\d+)?\]/,"");if(i[t]||(i[t]=[]),n.match(/\[\d+\]$/)){let e=/\[(\d+)\]/.exec(n)[1];i[t][e]=o}else i[t].push(o)}else i[n]?i[n]&&"string"==typeof i[n]?(i[n]=[i[n]],i[n].push(o)):i[n].push(o):i[n]=o}}return i}static getConfig(t){let e=Object.keys(t.config).sort(function(t,e){let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1}),i=[];for(let s of e)"function"==typeof t[s]?i.push(`\t ${s} : function(...) { ... }`):Array.isArray(t[s])?i.push(`\t ${s} : [${t[s]}]`):"string"==typeof t[s]?i.push(`\t ${s} : "${t[s]}"`):i.push(`\t ${s} : ${t[s]}`);let s=t.constructor.name+" {\n";return s+=i.join(",\n"),s+="\n}\n"}static prettyPrintConfig(t){let e=Object.keys(t.config).sort(function(t,e){let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1}),i=[];for(let s of e){let e="";if("id"===s||"name"===s)e=`    <span class="key">${s}</span> : <span class="value">&lt;string&gt;</span>`;else if("function"==typeof t[s])e=`    <span class="key">${s}</span> : function(...) { ... }`;else if(Array.isArray(t[s])){if(e=`    <span class="key">${s}</span> : [`,null!==t[s]&&t[s].length>0){let i=[];for(let e of t[s])"string"==typeof e?i.push(`"<span class="value">${e}</span>"`):i.push(`<span class="value">${e}</span>`);e+=i.join(", ")}e+="]"}else e="string"==typeof t[s]?`    <span class="key">${s}</span> : "<span class="value">${t[s]}</span>"`:`    <span class="key">${s}</span> : <span class="value">${t[s]}</span>`;Array.isArray(t[s])&&Utils.arrayEquals(t[s],t.constructor.DEFAULT_CONFIG[s])?e=`<span class="default">${e}</span>`:t[s]===t.constructor.DEFAULT_CONFIG[s]&&(e=`<span class="default">${e}</span>`),i.push(e)}let s=t.constructor.name+" {\n";return s+=i.join(",\n"),s+="\n}\n"}static arrayEquals(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;t.sort(function(t,e){let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1}),e.sort(function(t,e){let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1});for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}static getSingleEmInPixels(){let t=0,e=200,i=Math.round((e-t)/2)+t,s=0;for(;e-t>1;){if(s+=1,window.matchMedia(`(min-width: ${i}em)`).matches?t=i:e=i,i=Math.round((e-t)/2)+t,s>10)break}return Math.ceil(window.innerWidth/i)}static supportsCrypto(){return window.crypto&&crypto.subtle&&window.TextEncoder}static hash(t,e){return crypto.subtle.digest(t,(new TextEncoder).encode(e))}static hex(t){return[].map.call(new Uint8Array(t),t=>("00"+t.toString(16)).slice(-2)).join("")}static encode64(t){return btoa(new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),""))}static async sha256(t){const e=new TextEncoder("utf-8").encode(t),i=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(i)).map(t=>("00"+t.toString(16)).slice(-2)).join("")}static async sha256Encrypt(t,e){const i=new TextEncoder("utf-8").encode(t),s=await crypto.subtle.encrypt("SHA-256",e,i);return Array.from(new Uint8Array(s)).map(t=>("00"+t.toString(16)).slice(-2)).join("")}static readableNumber(t){return null===t||void 0===t?null:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static formatMoney(t,e,i,s,n){e=isNaN(e=Math.abs(e))?2:e,s=void 0===s?".":s,i=void 0===i?",":i,n=void 0===n?"$":n;let o,r,a=t;return(a<0?"-":"")+n+((r=(r=(o=parseInt(a=Math.abs(+a||0).toFixed(e))+"").length)>3?r%3:0)?o.substr(0,r)+i:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?s+Math.abs(a-o).toFixed(e).slice(2):"")}static randomNumber(t=100){return Math.floor(1+Math.random()*t)}static coinFlip(){return 0===Math.floor(2*Math.random())}static dieRoll(t=6){return Math.floor(Math.random()*t)+1}static getUniqueKey(t=30){let e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}static isAndroid(){return navigator.userAgent.match(/Android/i)}static isBlackBerry(){return navigator.userAgent.match(/BlackBerry/i)}static isIOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}static isIPhone(){return navigator.userAgent.match(/iPhone|iPod/i)}static isIPad(){return navigator.userAgent.match(/iPad/i)}static isOperaMobile(){return navigator.userAgent.match(/Opera Mini/i)}static isWindowsMobile(){return navigator.userAgent.match(/IEMobile/i)}static isMobile(){return this.isAndroid()||this.isBlackBerry()||this.isIOS()||this.isOperaMobile()||this.isWindowsMobile()}}class IconFactory{static get LIST(){return["arrow-down-circle","arrow-up","download","map","arrow-right","upload","arrow-left","arrow-down-circle-1","calendar","trashcan","tag","legend","echx","arrow-down","check-circle-disc","checkmark-circle","chevron-down","checkmark","chevron-left","chevron-right","chevron-up","double-triangle-vertical","chat","heart","no","double-triangle-horizontal","arrow-left-circle","echx-circle","echx-1","spinner-circle","circle-disc-chopped","circle","disc-chopped","gear-complex","gear","globe","help-circle","lightbulb","lock-open","magnify","menu","question","star","user-circle","user","exclaim","shape-hex","shape-rounded-triangle","warn-circle","warn-hex","warn-triangle","eye-slash","microphone-slash","minimize","eye","disc-check","minus-circle","minus","popout","plus","plus-circle","pencil","pencil-circle","refresh","speaker-high","speaker-low","printer","speaker-medium","microphone","speaker-mute","lock-closed","image","folder","document","speaker-slash","triangle-down-small","triangle-down","triangle-left-small","triangle-left","triangle-right-small","triangle-up","triangle-up-small","triangle-right","arrow-right-circle","arrow-up-circle","triangle-down-circle","triangle-left-circle","triangle-right-circle","triangle-up-circle","flag-notched","flag-pointed","flag-rectangle","flag-notched-angle","flag-pointed-angle","flag-rectangle-angle"]}static icon(t,e){if(t instanceof Object)return t;let i=document.createElement("span");return i.classList.add("icon"),i.classList.add(`cfb-${t}`),e?i.setAttribute("aria-label",e):i.setAttribute("aria-hidden","true"),i}static xicon(t,e){if(t instanceof Object)return t;let i=document.createElement("span");if(i.classList.add("icon"),Array.isArray(t))for(let e of t)i.classList.add(e);else i.classList.add(t);return e?i.setAttribute("aria-label",e):i.setAttribute("aria-hidden","true"),i}}class StateProvince{static get STATEMAP(){return{AL:{id:"AL",name:"Alabama",country:"US"},AK:{id:"AK",name:"Alaska",country:"US"},AZ:{id:"AZ",name:"Arizona",country:"US"},AR:{id:"AR",name:"Arkansas",country:"US"},CA:{id:"CA",name:"California",country:"US"},CO:{id:"CO",name:"Colorado",country:"US"},CT:{id:"CT",name:"Connecticut",country:"US"},DC:{id:"DC",name:"District of Columbia",country:"US",alt:["Washington DC","Washington D.C."]},DE:{id:"DE",name:"Delaware",country:"US"},FL:{id:"FL",name:"Florida",country:"US"},GA:{id:"GA",name:"Georgia",country:"US"},HI:{id:"HI",name:"Hawaii",country:"US"},ID:{id:"ID",name:"Idaho",country:"US"},IL:{id:"IL",name:"Illinois",country:"US"},IN:{id:"IN",name:"Indiana",country:"US"},IA:{id:"IA",name:"Iowa",country:"US"},KS:{id:"KS",name:"Kansas",country:"US"},KY:{id:"KY",name:"Kentucky",country:"US"},LA:{id:"LA",name:"Louisiana",country:"US"},ME:{id:"ME",name:"Maine",country:"US"},MD:{id:"MD",name:"Maryland",country:"US"},MA:{id:"MA",name:"Massachusetts",country:"US"},MI:{id:"MI",name:"Michigan",country:"US"},MN:{id:"MN",name:"Minnesota",country:"US"},MS:{id:"MS",name:"Mississippi",country:"US"},MO:{id:"MO",name:"Missouri",country:"US"},MT:{id:"MT",name:"Montana",country:"US"},NE:{id:"NE",name:"Nebraska",country:"US"},NV:{id:"NV",name:"Nevada",country:"US"},NH:{id:"NH",name:"New Hampshire",country:"US"},NJ:{id:"NJ",name:"New Jersey",country:"US"},NM:{id:"NM",name:"New Mexico",country:"US"},NY:{id:"NY",name:"New York",country:"US"},NC:{id:"NC",name:"North Carolina",country:"US"},ND:{id:"ND",name:"North Dakota",country:"US"},OH:{id:"OH",name:"Ohio",country:"US"},OK:{id:"OK",name:"Oklahoma",country:"US"},OR:{id:"OR",name:"Oregon",country:"US"},PA:{id:"PA",name:"Pennsylvania",country:"US"},RI:{id:"RI",name:"Rhode Island",country:"US"},SC:{id:"SC",name:"South Carolina",country:"US"},SD:{id:"SD",name:"South Dakota",country:"US"},TN:{id:"TN",name:"Tennessee",country:"US"},TX:{id:"TX",name:"Texas",country:"US"},UT:{id:"UT",name:"Utah",country:"US"},VT:{id:"VT",name:"Vermont",country:"US"},VA:{id:"VA",name:"Virginia",country:"US"},WA:{id:"WA",name:"Washington",country:"US"},WV:{id:"WV",name:"West Virginia",country:"US"},WI:{id:"WI",name:"Wisconsin",country:"US"},WY:{id:"WY",name:"Wyoming",country:"US"},AS:{id:"AS",name:"American Samoa",country:"US"},GU:{id:"GU",name:"Guam",country:"US"},MP:{id:"MP",name:"Northern Mariana Islands",country:"US"},PR:{id:"PR",name:"Puerto Rico",country:"US"},UM:{id:"UM",name:"United States Minor Outlying Islands",country:"US"},VI:{id:"VI",name:"Virgin Islands",country:"US"},AB:{id:"AB",name:"Alberta",country:"CA"},BC:{id:"BC",name:"British Columbia",country:"CA"},MB:{id:"MB",name:"Manitoba",country:"CA"},NB:{id:"NB",name:"New Brunswick",country:"CA"},NL:{id:"NL",name:"Newfoundland and Labrador",country:"CA",alt:["Newfoundland","Labrador"]},NS:{id:"NS",name:"Nova Scotia",country:"CA"},NU:{id:"NU",name:"Nunavut",country:"CA"},NT:{id:"NT",name:"Northwest Territories",country:"CA"},ON:{id:"ON",name:"Ontario",country:"CA"},PE:{id:"PE",name:"Prince Edward Island",country:"CA"},QC:{id:"QC",name:"Quebec",country:"CA"},SK:{id:"SK",name:"Saskatchewan",country:"CA"},YT:{id:"YT",name:"Yukon",country:"CA"}}}static get US_STATES(){return["AL","AK","AZ","AR","CA","CO","CT","DC","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AS","GU","MP","PR","UM","VI"]}static get CA_STATES(){return["AB","BC","MB","NB","NL","NS","NU","NT","ON","PE","QC","SK","YT"]}static get(t){return StateProvince.STATEMAP[t]}static list(t){let e=[];if(t&&"us"===t.toLowerCase())for(let t of StateProvince.US_STATES)e.push(StateProvince.STATEMAP[t]);else if(t&&"ca"===t.toLowerCase())for(let t of StateProvince.CA_STATES)e.push(StateProvince.STATEMAP[t]);else{for(let t of StateProvince.US_STATES)e.push(StateProvince.STATEMAP[t]);for(let t of StateProvince.CA_STATES)e.push(StateProvince.STATEMAP[t])}return e}static search(t){if(!t||t.length()<1)return[];let e=[];for(let i of Object.keys(StateProvince.STATEMAP)){let s=StateProvince.STATEMAP[i];if(t.toUpperCase()===i)e.push(s);else if(s.name.toUpperCase().indexOf(t.toUpperCase())>=0)e.push(s);else if(s.alt&&s.alt.length>0){let i=!1;for(let n of s.alt)!i&&n.toUpperCase().indexOf(t.toUpperCase())>=0&&e.push(s)}}return e}}class SimpleButton{static get DEFAULT_CONFIG(){return{id:null,submits:!1,cansubmit:!0,text:null,shape:null,size:"medium",form:null,hidden:!1,classes:[],icon:null,iconside:"left",secondicon:null,notab:!1,disabled:!1,mute:!1,ghost:!1,link:!1,naked:!1,action:null,focusin:null,focusout:null,hoverin:null,hoverout:null}}constructor(t){this.config=Object.assign({},SimpleButton.DEFAULT_CONFIG,t),this.id||(this.id=`button-${Utils.getUniqueKey(5)}`)}get cansubmit(){return this.config.cansubmit}buildButton(){const t=this;let e,i;this.text&&(this.textobj=document.createElement("span"),this.textobj.classList.add("text"),this.textobj.innerHTML=this.text),this.button=document.createElement("button"),this.icon&&(e=IconFactory.icon(this.icon)),this.secondicon&&(i=IconFactory.icon(this.secondicon)).classList.add("secondicon"),this.iconside&&"right"===this.iconside&&this.button.classList.add("righticon"),e&&this.button.appendChild(e),this.textobj&&this.button.appendChild(this.textobj),i&&this.button.appendChild(i),this.button.setAttribute("aria-label",this.text),this.button.setAttribute("id",this.id),this.button.setAttribute("role","button"),this.button.setAttribute("type",this.submits?"submit":"button"),this.button.classList.add(this.size);for(let t of this.classes)this.button.classList.add(t);this.button.addEventListener("focusin",function(e){t.focusin&&"function"==typeof t.focusin&&t.focusin(e,t)}),this.button.addEventListener("focusout",function(e){t.focusout&&"function"==typeof t.focusout&&t.focusout(e,t)}),this.button.addEventListener("mouseover",function(e){t.hoverin&&"function"==typeof t.hoverin&&t.hoverin(e,t)}),this.button.addEventListener("mouseout",function(e){t.hoverout&&"function"==typeof t.hoverout&&t.hoverout(e,t)}),this.notab?this.button.setAttribute("tabindex","-1"):this.button.setAttribute("tabindex","0"),this.disabled&&this.disable(),this.hidden&&this.hide(),this.mute?this.button.classList.add("mute"):this.ghost?this.button.classList.add("ghost"):this.link?this.button.classList.add("link"):this.naked&&this.button.classList.add("naked"),this.shape&&this.button.classList.add(this.shape),!this.submits&&this.action&&"function"==typeof this.action&&this.button.addEventListener("click",function(e){t.disabled||t.action(e,t)})}disable(){return this.button.setAttribute("disabled","disabled"),this.disabled=!0,this}enable(){return this.button.removeAttribute("disabled"),this.disabled=!1,this}show(){return this.button.classList.remove("hidden"),this.hidden=!1,this}hide(){return this.button.classList.add("hidden"),this.hidden=!0,this}toString(){return Utils.getConfig(this)}get action(){return this.config.action}set action(t){"function"!=typeof t&&console.error("Action provided to button is not a function!"),this.config.action=t}get button(){return this._button||this.buildButton(),this._button}set button(t){this._button=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this.button}set container(t){this.button=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get focusin(){return this.config.focusin}set focusin(t){"function"!=typeof t&&console.error("Value provided to focusin is not a function!"),this.config.focusin=t}get focusout(){return this.config.focusout}set focusout(t){"function"!=typeof t&&console.error("Value provided to focusout is not a function!"),this.config.focusout=t}get form(){return this.config.form}set form(t){this.config.form=t}get ghost(){return this.config.ghost}set ghost(t){this.config.ghost=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get hoverin(){return this.config.hoverin}set hoverin(t){"function"!=typeof t&&console.error("Value provided to hoverin is not a function!"),this.config.hoverin=t}get hoverout(){return this.config.hoverout}set hoverout(t){"function"!=typeof t&&console.error("Value provided to hoverout is not a function!"),this.config.hoverout=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get iconside(){return this.config.iconside}set iconside(t){this.config.iconside=t}get id(){return this.config.id}set id(t){this.config.id=t}get link(){return this.config.link}set link(t){this.config.link=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get naked(){return this.config.naked}set naked(t){this.config.naked=t}get notab(){return this.config.notab}set notab(t){this.config.notab=t}get secondicon(){return this.config.secondicon}set secondicon(t){this.config.secondicon=t}get shape(){return this.config.shape}set shape(t){this.config.shape=t}get size(){return this.config.size}set size(t){this.config.size=t}get submits(){return this.config.submits}set submits(t){this.config.submits=t}get text(){return this.config.text}set text(t){this.textobj&&(this.textobj.innerHTML=t),this.config.text=t}get textobj(){return this._textobj}set textobj(t){this._textobj=t}}class ConstructiveButton extends SimpleButton{constructor(t){t.classes?t.classes.push("constructive"):t.classes=["constructive"],super(t)}}class DestructiveButton extends SimpleButton{constructor(t){t.classes?t.classes.push("destructive"):t.classes=["destructive","foobar"],super(t)}}class ButtonMenu extends SimpleButton{static get DEFAULT_CONFIG(){return{focusin:function(t,e){e.open()},secondicon:"triangle-down",items:[]}}constructor(t){(t=Object.assign({},ButtonMenu.DEFAULT_CONFIG,t)).classes?t.classes.push("menu"):t.classes=["menu"],super(t),this.menu||this.buildMenu()}get isopen(){return this.button.hasAttribute("aria-expanded")}toggle(){this.isopen?this.close():this.open()}open(){const t=this;if(this.isopen)return;this.button.setAttribute("aria-expanded","true"),this.menu.removeAttribute("aria-hidden"),this.menu.querySelector("li:first-child").focus();let e=Array.from(this.menu.querySelector("li"));for(let t of e)t.setAttribute("tabindex","0");window.setTimeout(function(){t.setCloseListener()},200)}close(){this.button.removeAttribute("aria-expanded"),this.menu.setAttribute("aria-hidden","true");let t=Array.from(this.menu.querySelector("li"));for(let e of t)e.setAttribute("tabindex","-1")}setCloseListener(){const t=this;window.addEventListener("click",function(e){e.target===t.menu?t.setCloseListener():t.close()},{once:!0})}buildMenu(){const t=this;this.menu=document.createElement("ul"),this.menu.setAttribute("aria-hidden","true"),this.menu.setAttribute("tabindex","0");let e=1;for(let i of this.items){let s=e+1,n=e-1;n<1&&(n=1),s>this.items.length&&(s=this.items.length);let o=document.createElement("li");o.setAttribute("tabindex","-1"),o.setAttribute("data-order",e),o.addEventListener("keydown",function(e){9===e.keyCode?t.close():27===e.keyCode?t.close():38===e.keyCode?(e.preventDefault(),t.menu.querySelector(`[data-order='${n}']`).focus()):40===e.keyCode?(e.preventDefault(),t.menu.querySelector(`[data-order='${s}']`).focus()):13!==e.keyCode&&32!==e.keyCode||t.querySelector("a").click()});let r=document.createElement("a");i.icon&&r.appendChild(IconFactory.icon(i.icon));let a=document.createElement("span");a.innerHTML=i.label,r.appendChild(a),r.addEventListener("click",function(e){e.preventDefault(),i.action&&"function"==typeof i.action&&i.action(e),t.close()}),o.appendChild(r),this.menu.appendChild(o),e++}this.button.appendChild(this.menu)}get items(){return this.config.items}set items(t){this.config.items=t}get menu(){return this._menu}set menu(t){this._menu=t}}class HelpButton extends SimpleButton{static get DEFAULT_CONFIG(){return{action:function(t,e){e.stayopen()},hoverin:function(t,e){e.open()},hoverout:function(t,e){e.close()},icon:"help-circle",tipicon:"help-circle",help:null}}constructor(t){(t=Object.assign({},HelpButton.DEFAULT_CONFIG,t)).classes?(t.classes.push("naked"),t.classes.push("help")):t.classes=["naked","help"],t.id||(t.id=`help-${Utils.getUniqueKey(5)}`),super(t)}stayopen(){this.button.classList.add("stayopen"),this.open()}open(){const t=this;this.tooltip||this.buildTooltip(),this.button.setAttribute("aria-expanded","true"),this.tooltip.removeAttribute("aria-hidden"),setTimeout(function(){t.tooltip.style.top=`calc(0px - ${t.tooltip.style.height} - .5em)`},1)}close(){this.button.classList.contains("stayopen")||(this.button.removeAttribute("aria-expanded"),this.tooltip.setAttribute("aria-hidden","true"))}buildTooltip(){const t=this;if(this.tooltip=document.createElement("div"),this.tooltip.classList.add("tooltip"),this.tooltip.setAttribute("aria-hidden","true"),this.tooltip.setAttribute("id",this.id),this.tipicon){let t=IconFactory.icon(this.tipicon);t.classList.add("tipicon"),this.tooltip.appendChild(t)}this.helptext=document.createElement("div"),this.helptext.classList.add("helptext"),this.helptext.setAttribute("id",`${this.id}-tt`),this.helptext.innerHTML=this.help,this.closebutton=new SimpleButton({icon:"echx",text:"Close",shape:"square",classes:["naked","closebutton"],action:function(e){e.preventDefault(),e.stopPropagation(),t.button.classList.remove("stayopen"),t.close()}}),this.tooltip.appendChild(this.helptext),this.tooltip.appendChild(this.closebutton.button),this.button.removeAttribute("aria-expanded"),this.button.appendChild(this.tooltip)}get button(){return this._button||this.buildButton(),this.tooltip||this.buildTooltip(),this._button}set button(t){this._button=t}get closebutton(){return this._closebutton}set closebutton(t){this._closebutton=t}get help(){return this.config.help}set help(t){this.config.help=t}get helptext(){return this._helptext}set helptext(t){this._helptext=t}get tipicon(){return this.config.tipicon}set tipicon(t){this.config.tipicon=t}get tooltip(){return this._tooltip}set tooltip(t){this._tooltip=t}}class SkipButton extends SimpleButton{static get DEFAULT_CONFIG(){return{text:"Skip to Content",classes:["visually-hidden"],id:"content-jump",hot:!0,contentstart:"#content-start",focusin:function(t,e){e.button.classList.remove("visually-hidden")},focusout:function(t,e){e.button.classList.add("visually-hidden")},action:function(t,e){let i=location.href;location.href=e.contentstart,history.replaceState(null,null,i)}}}constructor(t){super(t=Object.assign({},SkipButton.DEFAULT_CONFIG,t))}get contentstart(){return this.config.contentstart}set contentstart(t){this.config.contentstart=t}}class HamburgerButton extends SimpleButton{static get DEFAULT_CONFIG(){return{toggletarget:null,text:"Open Menu",shape:"square",naked:!0,icon:HamburgerButton.MAGIC_HAMBURGER,action:function(t,e){e.toggle()}}}static get MAGIC_HAMBURGER(){let t=document.createElement("span");return t.classList.add("magichamburger"),t.innerHTML="<span></span><span></span><span></span>",t}constructor(t){(t=Object.assign({},HamburgerButton.DEFAULT_CONFIG,t)).classes?t.classes.push("hamburger"):t.classes=["hamburger"],super(t)}get isopen(){return this.button.hasAttribute("aria-expanded")}toggle(){this.isopen?this.close():(this.open(),this.toggletarget&&this.toggletarget.toggle&&this.toggletarget.toggle())}open(){this.isopen||this.button.setAttribute("aria-expanded","true")}close(){this.button.removeAttribute("aria-expanded")}get toggletarget(){return this.config.toggletarget}set toggletarget(t){this.config.toggletarget=t}}class InputElement{static get DEFAULT_CONFIG(){return{id:null,name:null,form:null,counter:null,forceconstraints:null,type:"text",label:null,placeholder:null,title:null,pattern:null,icon:null,passive:!1,unsettext:"(Not Set)",help:null,helpwaittime:5e3,required:!1,requiredtext:"required",requirederror:"This field is required",hidden:!1,autocomplete:"off",arialabel:null,maxlength:null,value:"",disabled:!1,classes:[],onreturn:null,ontab:null,onkeyup:null,onkeydown:null,focusin:null,focusout:null,validator:null}}constructor(t){this.config=Object.assign({},TextInput.DEFAULT_CONFIG,t),this.arialabel||(this.label?this.arialabel=this.label:this.title&&(this.arialabel=this.title)),this.id||(this.id=`e-${Utils.getUniqueKey(5)}`),this.name||(this.name=this.id),this.config.value||(this.config.value=""),this.config.value?this.origval=this.config.value:this.origval="",this.touched=!1}get inputmode(){return"text"}get topcontrol(){return this.charactercounter}get inputcontrol(){return null}get naked(){return this.input}isDirty(){return this.origval!==this.value}validate(t){return this.errors=[],this.warnings=[],t||!this.required||this.value&&0!==this.value.length||this.errors.push(this.requirederror),this.localValidator&&"function"==typeof this.localValidator&&this.localValidator(t),this.validator&&"function"==typeof this.validator&&this.validator(this),this.errors.length>0||this.warnings.length>0?(this.showMessages(),this.errors.length>0?this.input.setAttribute("aria-invalid","true"):this.input.removeAttribute("aria-invalid")):(this.clearMessages(),this.input.removeAttribute("aria-invalid"),this.isDirty()&&!t?this.container.classList.add("valid"):this.container.classList.remove("valid")),this.errors.length<1}localValidator(t){}showMessages(){this.messagebox.innerHTML="";for(let t of this.errors)this.addError(t);for(let t of this.warnings)this.addWarning(t);this.errors.length>0?this.container.classList.add("error"):this.warnings.length>0&&this.container.classList.add("warning"),this.messagebox.removeAttribute("aria-hidden")}clearMessages(){this.errors=[],this.warnings=[],this.messagebox.innerHTML="",this.messagebox.setAttribute("aria-hidden","true"),this.container.classList.remove("error"),this.container.classList.remove("warning")}addError(t){let e=document.createElement("li");e.classList.add("error"),e.innerHTML=t,this.messagebox.appendChild(e)}addWarning(t){let e=document.createElement("li");e.classList.add("warning"),e.innerHTML=t,this.messagebox.appendChild(e)}updateCounter(){if(!this.counter)return;let t="";t="limit"===this.counter?`${this.value.length} of ${this.maxlength} characters entered`:"sky"===this.counter?`${this.value.length} characters entered`:`${this.maxlength-this.value.length} characters remaining`,this.charactercounter.innerHTML=t,this.maxlength&&this.value.length>=this.maxlength?this.charactercounter.classList.add("outofbounds"):"sky"!==this.counter&&this.value.length>=.9*this.maxlength?(this.charactercounter.classList.remove("outofbounds"),this.charactercounter.classList.add("danger")):(this.charactercounter.classList.remove("danger"),this.charactercounter.classList.remove("outofbounds"))}calculatePlaceholder(){return null}disable(){this.input.setAttribute("disabled","true"),this.disabled=!0,this.container&&this.container.classList.add("disabled")}enable(){this.input.removeAttribute("disabled"),this.disabled=!1,this.container&&this.container.classList.remove("disabled")}pacify(){this.container.classList.add("passive"),this.passive=!0}activate(){this.container.classList.remove("passive"),this.passive=!1}toggleActivation(){this.container.classList.contains("passive")?this.activate():this.pacify()}get passivetext(){return this.value?this.value:this.config.value?this.config.value:this.unsettext}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container");for(let t of this.classes)this.container.classList.add(t);this.label&&this.container.appendChild(this.labelobj);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.input),this.inputcontrol&&t.appendChild(this.inputcontrol),this.container.appendChild(t),this.container.appendChild(this.passivebox),this.topcontrol&&this.container.appendChild(this.topcontrol),this.container.appendChild(this.messagebox),this.postContainerScrub()}postContainerScrub(){this.required&&(this.container.classList.add("required"),this.input.setAttribute("required","required")),this.mute&&this.container.classList.add("mute"),this.disabled&&this.container.classList.add("disabled"),this.hidden&&(this.container.style.display="none",this.container.setAttribute("aria-hidden","true")),this.config.value&&this.config.value.length>0&&this.container.classList.add("filled"),this.passive&&this.pacify(),this.help&&(this.input.setAttribute("aria-described-by",`${this.help.id}-tt`),this.input.setAttribute("aria-labeled-by",`label-${this.id}`)),this.validate(!0)}buildInactiveBox(){this.passivebox=document.createElement("div"),this.passivebox.classList.add("passivebox"),this.passivebox.innerHTML=this.passivetext}buildInput(){const t=this;"textarea"===this.type?this.input=document.createElement("textarea"):this.input=document.createElement("input"),this.input.setAttribute("type",this.type),this.input.setAttribute("id",this.id),this.input.setAttribute("name",this.name),this.input.setAttribute("inputmode",this.inputmode),this.input.setAttribute("aria-describedby",`msg-${this.id}`),this.input.setAttribute("role","textbox"),this.input.setAttribute("tabindex","0"),this.title&&this.input.setAttribute("title",this.title),this.autocomplete&&this.input.setAttribute("autocomplete",this.autocomplete),this.placeholder&&this.input.setAttribute("placeholder",this.placeholder),this.arialabel&&this.input.setAttribute("aria-label",this.arialabel),this.pattern&&this.input.setAttribute("pattern",this.pattern),this.maxlength&&this.input.setAttribute("maxlength",this.maxlength);for(let t of this.classes)this.input.classList.add(t);this.input.addEventListener("keydown",function(e){t.input.removeAttribute("aria-invalid"),t.updateCounter(),t.touched=!0,t.onkeydown&&"function"==typeof t.onkeydown&&t.onkeydown(e,t)}),this.input.addEventListener("keyup",function(e){t.helptimer&&(clearTimeout(t.helptimer),t.helpicon.close()),t.value&&t.value.length>0&&t.container?t.container.classList.add("filled"):t.container.classList.remove("filled"),t.form&&t.required&&(0===t.input.value.length||1===t.input.value.length)&&t.form&&t.form.validate(),13===e.keyCode&&t.onreturn&&"function"==typeof t.onreturn?(e.preventDefault(),e.stopPropagation(),t.onreturn(e,t)):t.onkeyup&&"function"==typeof t.onkeyup&&t.onkeyup(e,t)}),this.input.addEventListener("focusin",function(e){t.mute&&t.placeholder&&t.placeholder!==t.label&&t.input.setAttribute("placeholder",t.placeholder),t.container&&t.container.classList.add("active"),t.help&&(t.helptimer=setTimeout(function(){t.helpicon.open()},t.helpwaittime)),t.focusin&&"function"==typeof t.focusin&&t.focusin(e,t)}),this.input.addEventListener("focusout",function(e){t.passivebox.innerHTML=t.passivetext,t.helptimer&&(clearTimeout(t.helptimer),t.helpicon.close()),t.mute&&t.label&&t.input.setAttribute("placeholder",`${t.label} ${t.required?"("+t.requiredtext+")":""}`),t.container&&t.container.classList.remove("active"),t.validate(),t.form&&t.form.validate(),t.focusout&&"function"==typeof t.focusout&&t.focusout(e,t)}),this.input.value=this.config.value,this.required&&(this.input.setAttribute("required","true"),this.label&&this.labelobj.setAttribute("data-required-text",`${this.requiredtext}`)),this.mute&&(this.input.classList.add("mute"),this.label&&this.input.setAttribute("placeholder",`${this.label} ${this.required?"("+this.requiredtext+")":""}`)),this.hidden&&this.input.setAttribute("hidden","hidden"),this.disabled&&this.disable(),this.icon&&this.input.classList.add(`cfb-${this.icon}`)}buildLabel(){const t=this;if(!this.label)return null;this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.setAttribute("id",`label-${this.id}`),this.labelobj.innerHTML=this.label,this.labelobj.addEventListener("click",function(){}),this.form&&this.labelobj.setAttribute("form",this.form.id),this.help&&(this.helpicon=new HelpButton({help:this.help}),this.labelobj.appendChild(this.helpicon.button),this.labelobj.addEventListener("onmouseover",function(){t.helpicon.open()}),this.labelobj.addEventListener("onmouseout",function(){t.helpicon.close()}))}buildMessagebox(){this.messagebox=document.createElement("ul"),this.messagebox.setAttribute("id",`msg-${this.id}`),this.messagebox.classList.add("messagebox")}buildCharacterCounter(){this.counter&&(this.charactercounter=document.createElement("div"),this.charactercounter.classList.add("charcounter"),this.charactercounter.classList.add("topcontrol"),this.charactercounter.classList.add(this.counter),(!this.maxlength||this.maxlength<=0)&&(this.counter="sky"),this.updateCounter())}toString(){return Utils.getConfig(this)}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get autocomplete(){return this.config.autocomplete}set autocomplete(t){this.config.autocomplete=t}get charactercounter(){return this._charactercounter||this.buildCharacterCounter(),this._charactercounter}set charactercounter(t){this._charactercounter=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get counter(){return this.config.counter}set counter(t){this.config.counter=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get helptimer(){return this._helptimer}set helptimer(t){this._helptimer=t}get messagebox(){return this._messagebox||this.buildMessagebox(),this._messagebox}set messagebox(t){this._messagebox=t}get errors(){return this._errors}set errors(t){this._errors=t}get focusin(){return this.config.focusin}set focusin(t){"function"!=typeof t&&console.error("Action provided for focusin is not a function!"),this.config.focusin=t}get focusout(){return this.config.focusout}set focusout(t){"function"!=typeof t&&console.error("Action provided for focusout is not a function!"),this.config.focusout=t}get form(){return this.config.form}set form(t){this.config.form=t}get forceconstraints(){return this.config.forceconstraints}set forceconstraints(t){this.config.forceconstraints=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get help(){return this.config.help}set help(t){this.config.help=t}get helpicon(){return this._helpicon}set helpicon(t){this._helpicon=t}get helpwaittime(){return this.config.helpwaittime}set helpwaittime(t){this.config.helpwaittime=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get id(){return this.config.id}set id(t){this.config.id=t}get input(){return this._input||this.buildInput(),this._input}set input(t){this._input=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get maxlength(){return this.config.maxlength}set maxlength(t){this.config.maxlength=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get name(){return this.config.name}set name(t){this.config.name=t}get onkeydown(){return this.config.onkeydown}set onkeydown(t){"function"!=typeof t&&console.error("Action provided for onkeydown is not a function!"),this.config.onkeydown=t}get onkeyup(){return this.config.onkeyup}set onkeyup(t){"function"!=typeof t&&console.error("Action provided for onkeyup is not a function!"),this.config.onkeyup=t}get onreturn(){return this.config.onreturn}set onreturn(t){"function"!=typeof t&&console.error("Action provided for onreturn is not a function!"),this.config.onreturn=t}get ontab(){return this.config.ontab}set ontab(t){"function"!=typeof t&&console.error("Action provided for ontab is not a function!"),this.config.ontab=t}get origval(){return this.config.origval}set origval(t){this.config.origval=t}get passive(){return this.config.passive}set passive(t){this.config.passive=t}get passivebox(){return this._passivebox||this.buildInactiveBox(),this._passivebox}set passivebox(t){this._passivebox=t}get pattern(){return this.config.pattern}set pattern(t){this.config.pattern=t}get placeholder(){return this.config.placeholder?this.config.placeholder:this.calculatePlaceholder()}set placeholder(t){this.config.placeholder=t}get required(){return this.config.required}set required(t){this.config.required=t}get requirederror(){return this.config.requirederror}set requirederror(t){this.config.requirederror=t}get requiredtext(){return this.config.requiredtext}set requiredtext(t){this.config.requiredtext=t}get title(){return this.config.title}set title(t){this.config.title=t}get touched(){return this._touched}set touched(t){this._touched=t}get type(){return this.config.type}set type(t){this.config.type=t}get unsettext(){return this.config.unsettext}set unsettext(t){this.config.unsettext=t}get validator(){return this.config.validator}set validator(t){this.config.validator=t}get value(){return this.input.value}set value(t){this.config.value=t,this.input.value=t,this.passivebox.value=t}get warnings(){return this._warnings}set warnings(t){this._warnings=t}}class TextInput extends InputElement{constructor(t){t.type="text",super(t)}}class BooleanToggle{static get DEFAULT_CONFIG(){return{id:null,name:null,form:null,label:null,checked:!1,classes:[],disabled:!1,labelside:"right",style:null,onchange:null,validator:null,value:null}}constructor(t){this.config=Object.assign({},BooleanToggle.DEFAULT_CONFIG,t),!this.arialabel&&this.label&&(this.arialabel=this.label),this.id||(this.id=`check-${Utils.getUniqueKey(5)}`),this.name||(this.name=this.id),this.origval=this.checked}get naked(){return this.toggle}validate(){let t=!0;return this.validator&&"function"==typeof this.validator&&(t=this.validator(this)),t}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("checkbox"),this.hidden&&(this.container.style.display="none"),this.disabled&&this.container.classList.add("disabled"),"right"===this.labelside?(this.container.classList.add("rightside"),this.container.appendChild(this.toggle),this.container.appendChild(this.labelobj)):(this.container.appendChild(this.labelobj),this.container.appendChild(this.toggle))}build(){const t=this;this.toggle=document.createElement("input"),this.toggle.setAttribute("type","checkbox"),this.toggle.setAttribute("id",this.id),this.toggle.setAttribute("name",this.name),this.toggle.setAttribute("tabindex","0"),this.toggle.setAttribute("role","checkbox"),this.toggle.setAttribute("value",this.value),this.toggle.classList.add(this.style);for(let t of this.classes)this.toggle.classList.add(t);this.toggle.addEventListener("change",function(){t.toggle.checked?(t.toggle.setAttribute("aria-checked","true"),t.toggle.checked=!0):(t.toggle.removeAttribute("aria-checked"),t.toggle.checked=!1),t.checked=t.toggle.checked,t.onchange&&"function"==typeof t.onchange&&t.onchange(t)}),this.disabled&&this.disable(),this.hidden&&this.toggle.setAttribute("hidden","true"),this.checked&&(this.toggle.checked=!0,this.toggle.setAttribute("aria-checked","true"))}buildLabel(){if(!this.label)return null;this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.innerHTML=this.label,this.form&&this.labelobj.setAttribute("form",this.form.id)}disable(){this.toggle.setAttribute("disabled","disabled"),this.disabled=!0,this.container&&this.container.classList.add("disabled")}enable(){this.toggle.removeAttr("disabled"),this.disabled=!1,this.container&&this.container.classList.remove("disabled")}toString(){return Utils.getConfig(this)}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get checked(){return this.config.checked}set checked(t){this.config.checked=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get form(){return this.config.form}set form(t){this.config.form=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get id(){return this.config.id}set id(t){this.config.id=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get labelside(){return this.config.labelside}set labelside(t){this.config.labelside=t}get name(){return this.config.name}set name(t){this.config.name=t}get onchange(){return this.config.onchange}set onchange(t){"function"!=typeof t&&console.error("Action provided for onchange is not a function!"),this.config.onchange=t}get origval(){return this.config.origval}set origval(t){this.config.origval=t}get style(){return this.config.style}set style(t){this.config.style=t}get toggle(){return this._toggle||this.build(),this._toggle}set toggle(t){this._toggle=t}get validator(){return this.config.validator}set validator(t){this.config.validator=t}get value(){return this.config.value}set value(t){this.input.attr("value",t),this.config.value=t}}class NumberInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",minnumber:null,maxnumber:null,wholenumbers:!1,steppers:!0,step:null}}constructor(t){(t=Object.assign({},NumberInput.DEFAULT_CONFIG,t)).step&&(isNaN(parseFloat(t.step))?(console.error(`step is defined as ${t.step} but is not a number. Deleting.`),delete t.step):Number(t.step)<=0?(console.error("step cannot be a negative number. Deleting."),delete t.step):t.step=Number(t.step)),t.maxnumber&&(isNaN(parseFloat(t.maxnumber))?(console.error(`maxnumber is defined as ${t.maxnumber} but is not a number. Deleting.`),delete t.maxnumber):t.maxnumber=Number(t.maxnumber)),t.minnumber&&(isNaN(parseFloat(t.minnumber))?(console.error(`minnumber is defined as ${t.minnumber} but is not a number. Deleting.`),delete t.maxnumber):t.minnumber=Number(t.minnumber)),t.onkeydown&&(t.origkeydown=t.onkeydown),t.onkeydown=function(t,e){38===t.keyCode?(t.preventDefault(),t.stopPropagation(),e.increment()):40===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.decrement()),e.origkeydown&&"function"==typeof e.origkeydown&&e.origkeydown(t,e)},"range"===t.type&&console.log(`type: ${t.type}`),super(t)}get inputmode(){return"numeric"}get inputcontrol(){return this.stepbuttons}localValidator(t){if(this.value){if(isNaN(this.value))return void this.errors.push("This is not a number.");let t=parseFloat(this.value);"undefined"!==this.minnumber&&t<this.minnumber?this.errors.push(`The minimum value for this field is '${this.minnumber}'.`):"undefined"!==this.maxnumber&&t>this.maxnumber?this.errors.push(`The maximum value for this field is '${this.maxnumber}'.`):this.step&&t%this.step!=0?this.errors.push(`Values must be divisible by ${this.step}.`):this.wholenumbers&&t%1>0&&this.errors.push("Values must be whole numbers.")}}calculatePlaceholder(){let t="Enter a number";return"undefined"!==this.minnumber&&"undefined"!==this.maxnumber?t=`Enter a number between ${this.minnumber} and ${this.maxnumber}`:"undefined"!==this.minnumber?t=`Enter a number larger than ${this.minnumber}`:"undefined"!==this.maxnumber&&(t=`Enter a number smaller than ${this.maxnumber}`),this.step&&(t+=` (increments of ${this.step})`),t+="."}increment(t){t&&!isNaN(t)||(t=1);let e=Number(this.value);e||(e=0),isNaN(e)||(e+=t,"undefined"!==this.maxnumber&&e>this.maxnumber&&(e=this.maxnumber),this.value=e)}decrement(t){t&&!isNaN(t)||(t=1);let e=Number(this.value);e||(e=0),isNaN(e)||(e-=t,"undefined"!==this.minnumber&&e<this.minnumber&&(e=this.minnumber),this.value=e)}buildSteppers(){const t=this;this.steppers&&(this.upbtn=new SimpleButton({classes:["naked"],icon:"triangle-up",notab:!0,action:function(e){e.preventDefault(),e.stopPropagation(),t.increment(t.step)}}),this.downbtn=new SimpleButton({classes:["naked"],icon:"triangle-down",notab:!0,action:function(e){e.preventDefault(),e.stopPropagation(),t.decrement(t.step)}}),this.stepbuttons=document.createElement("div"),this.stepbuttons.classList.add("stepbuttons"),this.stepbuttons.classList.add("inputcontrol"),this.stepbuttons.appendChild(this.upbtn.button),this.stepbuttons.appendChild(this.downbtn.button),this.stepbuttons.addEventListener("mousedown",function(t){t.preventDefault()}))}get downbtn(){return this._downbtn}set downbtn(t){this._downbtn=t}get maxnumber(){return this.config.maxnumber}set maxnumber(t){this.config.maxnumber=t}get minnumber(){return this.config.minnumber}set minnumber(t){this.config.minnumber=t}get origkeydown(){return this.config.origkeydown}set origkeydown(t){this.config.origkeydown=t}get step(){return this.config.step}set step(t){this.config.step=t}get stepbuttons(){return this._stepbuttons||this.buildSteppers(),this._stepbuttons}set stepbuttons(t){this._stepbuttons=t}get steppers(){return this.config.steppers}set steppers(t){this.config.steppers=t}get upbtn(){return this._upbtn}set upbtn(t){this._upbtn=t}get wholenumbers(){return this.config.wholenumbers}set wholenumbers(t){this.config.wholenumbers=t}}class EmailInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",forceconstraints:!0,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$"}}static isValid(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}constructor(t){super(t=Object.assign({},EmailInput.DEFAULT_CONFIG,t))}get inputmode(){return"email"}calculatePlaceholder(){return"person@myemailaccount.net"}localValidator(){this.value&&this.forceconstraints&&(EmailInput.isValid(this.value)||this.errors.push("This is an invalid email address."))}}class URIInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",forceconstraints:!0}}static isEncoded(t){return(t=t||"")!==decodeURIComponent(t)}static isValid(t){return new RegExp(/\w+:(\/?\/?)[^\s]+/).test(t)}constructor(t){(t=Object.assign({},URIInput.DEFAULT_CONFIG,t)).value&&URIInput.isEncoded(t.value)&&(t.value=decodeURIComponent(t.value)),super(t)}get inputmode(){return"url"}calculatePlaceholder(){return"https://somewhere.cornflower.blue/"}localValidator(){this.value&&this.forceconstraints&&(URIInput.isValid(this.value)||this.errors.push("This is an invalid web address."))}}class HiddenField extends TextInput{constructor(t){t.hidden=!0,t.type="hidden",super(t)}get container(){return this.input}}class PasswordInput extends TextInput{static get DEFAULT_CONFIG(){return{minlength:5,suggestedlength:8,maxlength:30,visibilityswitch:!0,startvisible:!1,forceconstraints:!1,type:"password"}}constructor(t){super(t=Object.assign({},PasswordInput.DEFAULT_CONFIG,t))}get topcontrol(){return this.visibilityswitcher}buildVisibilitySwitcher(){const t=this;this.visibilityswitch&&(this.hidepwbutton=new SimpleButton({classes:["naked"],text:"Hide Password",hidden:!0,notab:!0,icon:"eye-slash",action:function(){t.setVisibility(!1)}}),this.showpwbutton=new SimpleButton({classes:["naked"],text:"Show Password",hidden:!0,notab:!0,icon:"eye",action:function(){t.setVisibility(!0)}}),this.visibilityswitcher=document.createElement("div"),this.visibilityswitcher.classList.add("visibilityswitch"),this.visibilityswitcher.classList.add("topcontrol"),this.visibilityswitcher.appendChild(this.hidepwbutton.button),this.visibilityswitcher.appendChild(this.showpwbutton.button),this.setVisibility(this.startvisible))}setVisibility(t){t?(this.mode=!1,this.input.setAttribute("type","text"),this.hidepwbutton.show(),this.showpwbutton.hide()):(this.mode=!0,this.input.setAttribute("type","password"),this.hidepwbutton.hide(),this.showpwbutton.show()),this.input.focus()}localValidator(){this.value&&this.forceconstraints&&(this.value.length<this.minlength?this.errors.push(`Password must be at least ${this.minlength} characters.`):this.value.length<this.suggestedlength?this.warnings.push(`Password is less than the suggested length of ${this.suggestedlength} characters.`):this.value.length>this.maxlength&&this.errors.push(`Password must be less than ${this.maxlength} characters.`))}get minlength(){return this.config.minlength}set minlength(t){this.config.minlength=t}get hidepwbutton(){return this._hidepwbutton}set hidepwbutton(t){this._hidepwbutton=t}get showpwbutton(){return this._showpwbutton}set showpwbutton(t){this._showpwbutton=t}get mode(){return this._mode}set mode(t){this._mode=t}get startvisible(){return this.config.startvisible}set startvisible(t){this.config.startvisible=t}get suggestedlength(){return this.config.suggestedlength}set suggestedlength(t){this.config.suggestedlength=t}get visibilityswitch(){return this.config.visibilityswitch}set visibilityswitch(t){this.config.visibilityswitch=t}get visibilityswitcher(){return this._visibilityswitcher||this.buildVisibilitySwitcher(),this._visibilityswitcher}set visibilityswitcher(t){this._visibilityswitcher=t}}class SelectMenu extends InputElement{static get DEFAULT_CONFIG(){return{unselectedtext:"(Select)",icon:"chevron-down",prefix:null,searchtext:!0,options:[],onchange:null}}constructor(t){super(t=Object.assign({},SelectMenu.DEFAULT_CONFIG,t))}get selected(){let t=this.optionlist.querySelector(`input[name=${this.name}]:checked`);return t.length>0?t:null}get value(){return this.optionlist.querySelector(`input[name=${this.name}]:checked`).value}get topcontrol(){return this.searchdisplay}get passivetext(){return this.selectedoption?this.selectedoption.label:this.value?this.value:this.config.value?this.config.value:this.unsettext}open(){const t=this;this.optionlist.removeAttribute("aria-hidden"),this.triggerbox.setAttribute("aria-expanded","true");let e=Array.from(this.optionlist.querySelector("li"));for(let t of e)t.setAttribute("tabindex","0");let i=15*Utils.getSingleEmInPixels();this.container?i+=parseInt(this.container.getBoundingClientRect().top):i+=parseInt(this.optionlist.getBoundingClientRect().top),i>window.innerHeight?(this.optionlist.classList.add("vert"),this.container&&this.container.classList.add("vert")):(this.optionlist.classList.remove("vert"),this.container&&this.container.classList.remove("vert")),setTimeout(function(){let e=t.optionlist.querySelector('li[aria-selected="true"]');e||(e=t.optionlist.querySelector("li:first-child")),e&&(t.scrollto(e),e.focus())},100),setTimeout(function(){t.setCloseListener()},200)}setCloseListener(){const t=this;window.addEventListener("click",function(e){e.target===t.optionlist?t.setCloseListener():e.target===t.triggerbox&&"true"===t.triggerbox.getAttribute("aria-expanded")||t.close()},{once:!0})}scrollto(t){t&&(this.scrolleditem&&t.getAttribute("id")===this.scrolleditem.getAttribute("id")||(this.optionlist.scrollTop=t.offsetHeight,t.focus(),this.scrolleditem=t))}close(){this.optionlist.setAttribute("aria-hidden","true"),this.triggerbox.removeAttribute("aria-expanded");let t=Array.from(this.optionlist.querySelector("li"));for(let e of t)e.setAttribute("tabindex","-1");this.searchkeys=[],this.updateSearch()}disable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.setAttribute("disabled","disabled");this.triggerbox.setAttribute("disabled","disabled"),this.triggerbox.removeAttribute("aria-expanded"),this.disabled=!0,this.triggerbox&&this.triggerbox.classList.add("disabled"),this.container&&this.container.classList.add("disabled")}enable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.removeAttribute("disabled");this.triggerbox.removeAttribute("disabled"),this.disabled=!1,this.triggerbox&&this.triggerbox.classList.remove("disabled"),this.container&&this.container.classList.remove("disabled")}pacify(){this.container.classList.add("passive"),this.optionlist.setAttribute("aria-hidden",!0),this.passive=!0}activate(){this.container.classList.remove("passive"),this.optionlist.removeAttribute("aria-hidden"),this.passive=!1}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("select-container");for(let t of this.classes)this.container.classList.add(t);this.labelobj&&this.container.appendChild(this.labelobj);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.triggerbox),this.container.append(t),this.container.appendChild(this.optionlist),this.container.appendChild(this.passivebox),this.container.appendChild(this.topcontrol),this.container.appendChild(this.messagebox),this.postContainerScrub()}buildTriggerBox(){const t=this;this.triggerbox=document.createElement("div"),this.triggerbox.classList.add("trigger"),this.triggerbox.setAttribute("tabindex","0"),this.triggerbox.addEventListener("focus",function(e){t.disabled?e.stopPropagation():t.open()}),this.mute&&this.triggerbox.classList.add("mute"),this.icon&&this.triggerbox.classList.add(`cfb-${this.icon}`)}buildOptions(){this.optionlist=document.createElement("ul"),this.optionlist.classList.add("selectmenu"),this.optionlist.setAttribute("id",this.id),this.optionlist.setAttribute("aria-hidden","true"),this.optionlist.setAttribute("tabindex","0"),this.optionlist.setAttribute("role","radiogroup");let t=1;for(let e of this.options){let i=this.buildOption(e,t);e.checked&&(this.selectedoption=e),t++,this.optionlist.appendChild(i)}if(this.unselectedtext){let t={label:this.unselectedtext,value:"",checked:!this.selectedoption,unselectoption:!0},e=this.buildOption(t,0);e.setAttribute("data-menuorder",0),this.optionlist.prepend(e)}}buildOption(t,e){const i=this,s=`${this.id}-${Utils.getUniqueKey(5)}`;let n=e+1,o=e-1;this.unselectedtext?o<0&&(o=0):o<1&&(o=1),n>this.options.length&&(n=this.options.length);let r=document.createElement("li");r.setAttribute("tabindex","-1"),r.setAttribute("id",`li-${s}`),r.setAttribute("data-menuorder",e),r.addEventListener("keydown",function(t){t.shiftKey&&9===t.keyCode?i.close():9===t.keyCode?i.close():27===t.keyCode?i.close():38===t.keyCode?(t.preventDefault(),i.optionlist.querySelector(`[data-menuorder='${o}']`).focus()):40===t.keyCode?(t.preventDefault(),i.optionlist.querySelector(`[data-menuorder='${n}']`).focus()):13===t.keyCode||32===t.keyCode?r.querySelector("input").click():8===t.keyCode?i.rmSearchKey():17===t.keyCode||18===t.keyCode||91===t.keyCode||i.runKeySearch(t.key)}),r.addEventListener("click",function(){let t=i.optionlist.querySelectorAll("li");for(let e of t)e.removeAttribute("aria-selected");r.setAttribute("aria-selected","true")});let a=document.createElement("label");a.setAttribute("for",s),a.innerHTML=t.label;let l=document.createElement("input");return l.setAttribute("id",s),l.setAttribute("type","radio"),l.setAttribute("name",this.name),l.setAttribute("tabindex","-1"),l.setAttribute("value",t.value),l.setAttribute("aria-labelledby",s),l.setAttribute("aria-label",t.label),l.setAttribute("role","radio"),l.addEventListener("change",function(){i.prefix?i.triggerbox.innerHTML=`${i.prefix} ${t.label}`:i.triggerbox.innerHTML=t.label,i.selectedoption=t,t.label===i.unselectedtext?i.passivebox.innerHTML=i.unsettext:i.passivebox.innerHTML=t.label;let e=i.optionlist.querySelectorAll("label");for(let t of e)t.classList.remove("cfb-triangle-down");a.classList.add("cfb-triangle-down"),i.close(),i.validate(),i.form&&i.form.validate(),i.onchange&&"function"==typeof i.onchange&&i.onchange(i)}),t.checked&&(this.origval=t.value,this.prefix?this.triggerbox.innerHTML=`${this.prefix} ${t.label}`:this.triggerbox.innerHTML=t.label,r.setAttribute("aria-selected","true"),l.setAttribute("aria-checked","checked"),l.setAttribute("checked","checked")),r.appendChild(l),r.appendChild(a),r}buildSearchDisplay(){this.searchtext&&(this.searchdisplay=document.createElement("div"),this.searchdisplay.classList.add("searchdisplay"),this.searchdisplay.classList.add("topcontrol"),this.updateSearch())}updateSearch(){if(0===this.searchkeys.length)return this.searchdisplay.classList.add("hidden"),void(this.searchdisplay.innerHTML="");this.searchdisplay.classList.remove("hidden"),this.searchdisplay.innerHTML=this.searchkeys.join("")}rmSearchKey(){0!==this.searchkeys.length&&(this.searchkeys.pop(),this.searchkeys.length>0&&this.findByString(this.searchkeys.join("")),this.updateSearch())}runKeySearch(t){this.searchkeys.push(t),this.searchkeys.length>0&&this.findByString(this.searchkeys.join("")),this.updateSearch()}findByString(t){if(!t||"string"!=typeof t)return;let e,i=this.optionlist.querySelectorAll("li");for(let s of i){if(s.querySelector("label").innerHTML.toUpperCase().startsWith(t.toUpperCase())){e=s;break}}this.scrollto(e)}get optionlist(){return this._optionlist||this.buildOptions(),this._optionlist}set optionlist(t){this._optionlist=t}get options(){return this.config.options}set options(t){this.config.options=t}get prefix(){return this.config.prefix}set prefix(t){this.config.prefix=t}get searchdisplay(){return this._searchdisplay||this.buildSearchDisplay(),this._searchdisplay}set searchdisplay(t){this._searchdisplay=t}get searchkeys(){return this._searchkeys||(this._searchkeys=[]),this._searchkeys}set searchkeys(t){this._searchkeys=t}get searchtext(){return this.config.searchtext}set searchtext(t){this.config.searchtext=t}get selectedoption(){return this._selectedoption}set selectedoption(t){this._selectedoption=t}get scrolleditem(){return this._scrolleditem}set scrolleditem(t){this._scrolleditem=t}get triggerbox(){return this._triggerbox||this.buildTriggerBox(),this._triggerbox}set triggerbox(t){this._triggerbox=t}get unselectedtext(){return this.config.unselectedtext}set unselectedtext(t){this.config.unselectedtext=t}}class RadioGroup extends SelectMenu{static get DEFAULT_CONFIG(){return{id:null,name:null,form:null,label:null,passive:!1,required:!1,unsettext:"(Not Set)",classes:[],disabled:!1,options:[],onchange:null,validator:null}}constructor(t){(t=Object.assign({},RadioGroup.DEFAULT_CONFIG,t)).id||(t.id=`radiogroup-${Utils.getUniqueKey(5)}`),t.name||(t.name=t.id),super(t)}get input(){return this.optionlist}get passivetext(){return this.selectedoption?this.selectedoption.label:this.value?this.value:this.config.value?this.config.value:this.unsettext}disable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.setAttribute("disabled","disabled");this.disabled=!0,this.container&&this.container.classList.add("disabled")}enable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.removeAttribute("disabled");this.disabled=!1,this.container&&this.container.classList.remove("disabled")}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("radiogroup-container");for(let t of this.classes)this.container.classList.add(t);this.container.appendChild(this.labelobj),this.container.appendChild(this.optionlist),this.container.appendChild(this.passivebox),this.postContainerScrub()}postContainerScrub(){this.hidden&&(this.container.style.display="none"),this.required&&(this.container.classList.add("required"),this.optionlist.setAttribute("required","required")),this.hidden&&(this.container.style.display="none",this.container.setAttribute("aria-hidden","true")),this.passive&&this.pacify(),this.disabled&&this.disable(),this.help&&(this.optionlist.setAttribute("aria-described-by",`${this.help.id}-tt`),this.optionlist.setAttribute("aria-labeled-by",`label-${this.id}`))}buildOption(t){const e=this,i=`${this.id}-${Utils.getUniqueKey(5)}`;let s=document.createElement("input");s.setAttribute("id",i),s.setAttribute("type","radio"),s.setAttribute("name",this.name),s.setAttribute("tabindex","0"),s.setAttribute("value",t.value),s.setAttribute("aria-label",t.label),s.setAttribute("role","radio");for(let t of this.classes)s.classList.add(t);s.addEventListener("change",function(){s.checked?s.setAttribute("aria-checked","true"):s.removeAttribute("aria-checked"),e.selectedoption=t,t.label===e.unselectedtext?e.passivebox.innerHTML=e.unsettext:e.passivebox.innerHTML=t.label,e.validate(),e.form&&e.form.validate(),e.onchange&&"function"==typeof e.onchange&&e.onchange(e)});let n=document.createElement("label");n.setAttribute("for",i),n.innerHTML=t.label,t.checked&&(this.origval=t.value,s.checked=!0,s.setAttribute("aria-checked","true"));let o=document.createElement("li");return o.classList.add("radio"),o.appendChild(s),o.appendChild(n),o}buildOptions(){this.optionlist=document.createElement("ul"),this.optionlist.classList.add("radiogroup"),this.optionlist.setAttribute("tabindex","-1"),this.optionlist.setAttribute("role","radiogroup");for(let t of this.options){let e=this.buildOption(t);t.checked&&(this.selectedoption=t),this.optionlist.appendChild(e)}}get onchange(){return this.config.onchange}set onchange(t){"function"!=typeof t&&console.error("Action provided for onchange is not a function!"),this.config.onchange=t}}class StateMenu extends SelectMenu{static get DEFAULT_CONFIG(){return{unselectedtext:"(Select State or Province)",valuesas:"code",set:null}}constructor(t){t=Object.assign({},StateMenu.DEFAULT_CONFIG,t);let e=StateProvince.list(t.set),i=[];for(let s of e){let e={label:s.name};t.valuesas&&"name"===t.valuesas?e.value=s.name:e.value=s.id,!t.value||t.value.toUpperCase()!==s.id&&t.value.toUpperCase()!==s.name||(e.checked=!0),i.push(e)}t.options=i,super(t)}}class TextArea extends InputElement{static get DEFAULT_CONFIG(){return{counter:"sky"}}constructor(t){(t=Object.assign({},TextArea.DEFAULT_CONFIG,t)).type="textarea",super(t)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("textarea-container"),this.container.appendChild(this.labelobj),this.container.appendChild(this.charactercounter);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.input),this.container.appendChild(t),this.container.appendChild(this.passivebox),this.container.appendChild(this.messagebox),this.postContainerScrub()}}class FileInput extends InputElement{static get DEFAULT_CONFIG(){return{type:"file",icon:"upload",accept:"image/png,image/gif,image/jpg,image/jpeg",multiple:!1,onchange:null}}static get DEFAULT_STRINGS(){return{multiple_file_placeholder:"Select files (multiple accepted)",single_file_placeholder:"Select file"}}constructor(t){super(t=Object.assign({},FileInput.DEFAULT_CONFIG,t))}get value(){return this.selected?this.selected.val():""}get topcontrol(){return this.searchdisplay}get passivetext(){return this.selectedoption?this.selectedoption.label:this.value?this.value:this.config.value?this.config.value:this.unsettext}calculatePlaceholder(){return this.multiple?FileInput.DEFAULT_STRINGS.multiple_file_placeholder:FileInput.DEFAULT_STRINGS.single_file_placeholder}disable(){this.triggerbox.setAttribute("disabled","disabled"),this.triggerbox.classList.add("disabled"),this.container.classList.add("disabled"),this.disabled=!0}enable(){this.triggerbox.removeAttr("disabled"),this.triggerbox.classList.remove("disabled"),this.container.classList.remove("disabled"),this.disabled=!1}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("file-container");for(let t of this.classes)this.container.classList.add(t);this.container.appendChild(this.labelobj),this.container.appendChild(this.fileinput);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.triggerbox),this.container.appendChild(t),this.container.appendChild(this.messagebox),this.postContainerScrub()}buildTriggerBox(){const t=this;this.triggerbox=document.createElement("div"),this.triggerbox.classList.add("trigger"),this.triggerbox.setAttribute("tabindex","-1"),this.triggerbox.innerHTML=this.placeholder,this.triggerbox.addEventListener("click",function(e){t.disabled?e.stopPropagation():t.labelobj.click()}),this.triggerbox.addEventListener("keydown",function(e){9===e.keyCode?t.triggerbox.blur():13!==e.keyCode&&32!==e.keyCode||t.labelobj.click()}),this.mute&&this.triggerbox.classList.add("mute"),this.icon&&this.triggerbox.classList.add(`cfb-${this.icon}`)}buildFileInput(){const t=this;this.fileinput=document.createElement("input"),this.fileinput.setAttribute("type",this.type),this.fileinput.setAttribute("name",this.name),this.fileinput.setAttribute("id",this.id),this.fileinput.setAttribute("accept",this.accept),this.fileinput.setAttribute("multiple",this.multiple),this.fileinput.setAttribute("aria-labelled-by",this.labelobj.id),this.fileinput.addEventListener("focusin",function(){t.triggerbox.focus()}),this.fileinput.addEventListener("change",function(t){if(t.fileinput.files&&t.fileinput.files.length>0){let e=t.fileinput.files,i=[];for(let t of e)i.push(t.name);i.length>0?(t.triggerbox.classList.add("files"),t.triggerbox.innerHTML=i.join(", ")):(t.triggerbox.classList.remove("files"),t.triggerbox.innerHTML=t.placeholder)}t.onchange&&"function"==typeof t.onchange&&t.onchange(t)})}get accept(){return this.config.accept}set accept(t){this.config.accept=t}get fileinput(){return this._fileinput||this.buildFileInput(),this._fileinput}set fileinput(t){this._fileinput=t}get multiple(){return this.config.multiple}set multiple(t){this.config.multiple=t}get triggerbox(){return this._triggerbox||this.buildTriggerBox(),this._triggerbox}set triggerbox(t){this._triggerbox=t}}class DialogWindow{static get DEFAULT_CONFIG(){return{id:null,form:null,content:"<p />No provided content</p",classes:[],header:null,title:null,trailer:null,clickoutsidetoclose:!0,escapecloses:!0,showclose:!0}}constructor(t){this.config=Object.assign({},DialogWindow.DEFAULT_CONFIG,t),t.id||(t.id=`dialog-${Utils.getUniqueKey(5)}`),this.build()}open(){const t=this;this.prevfocus=document.querySelector(":focus"),this.mask=document.createElement("div"),this.mask.classList.add("window-mask");for(let t of this.classes)this.mask.classList.add(t);if(this.mask.addEventListener("click",function(e){e.preventDefault(),t.clickoutsidetoclose&&t.close()}),this.container.appendChild(t.window),this.trailer&&"string"==typeof this.trailer){let t=document.createElement("div");t.classList.add("trailer"),t.innerHTML=this.trailer,this.container.appendChild(t)}else this.trailer&&this.container.appendChild(this.trailer);document.body.appendChild(this.mask),document.body.appendChild(this.container),document.body.classList.add("modalopen"),this.escapelistener=function(e){"Escape"===e.key&&t.close()},setTimeout(function(){let e=t.contentbox.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e[0]&&e[0].focus(),t.escapecloses&&document.addEventListener("keyup",t.escapelistener)},100)}close(){this.container.parentNode.removeChild(this.container),this.mask.parentNode.removeChild(this.mask),this.prevfocus&&this.prevfocus.focus(),document.body.classList.remove("modalopen"),document.removeEventListener("keyup",this.escapelistener)}escape(t,e){console.log(t.key),"Escape"===t.key&&(console.log("asdfadssadfasdfasdads"),console.log(e),e.close())}build(){const t=this;this.container=document.createElement("div"),this.container.classList.add("window-container"),this.window=document.createElement("div"),this.window.classList.add("dialog"),this.window.setAttribute("id",this.id);for(let t of this.classes)this.container.classList.add(t),this.window.classList.add(t);if(this.title||this.header){if(!this.header){this.header=document.createElement("h2");let t=document.createElement("span");t.classList.add("t"),t.innerHTML=this.title,this.header.appendChild(t)}this.window.appendChild(this.header),this.showclose&&(this.closebutton=new SimpleButton({icon:"echx",text:"Close",shape:"square",classes:["naked","closebutton"],action:function(e){e.preventDefault(),t.close()}}),this.header.appendChild(this.closebutton.button))}else this.showclose&&console.error("Dialog defines 'showclose' but no title is defined.");this.form?(this.form.dialog=this,this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.contentbox.appendChild(this.form.form),this.window.classList.add("isform"),this.window.appendChild(this.contentbox)):this.content&&(this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.contentbox.appendChild(this.content),this.window.appendChild(this.contentbox))}toString(){return Utils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get clickoutsidetoclose(){return this.config.clickoutsidetoclose}set clickoutsidetoclose(t){this.config.clickoutsidetoclose=t}get closebutton(){return this._closebutton}set closebutton(t){this._closebutton=t}get container(){return this._container}set container(t){this._container=t}get content(){return this.config.content}set content(t){this.config.content=t}get contentbox(){return this._contentbox}set contentbox(t){this._contentbox=t}get escapecloses(){return this.config.escapecloses}set escapecloses(t){this.config.escapecloses=t}get escapelistener(){return this._escapelistener}set escapelistener(t){this._escapelistener=t}get form(){return this.config.form}set form(t){this.config.form=t}get header(){return this.config.header}set header(t){this.config.header=t}get id(){return this.config.id}set id(t){this.config.id=t}get mask(){return this._mask}set mask(t){this._mask=t}get prevfocus(){return this._prevfocus}set prevfocus(t){this._prevfocus=t}get showclose(){return this.config.showclose}set showclose(t){this.config.showclose=t}get title(){return this.config.title}set title(t){this.config.title=t}get trailer(){return this.config.trailer}set trailer(t){this.config.trailer=t}get window(){return this._window}set window(t){this._window=t}}class FloatingPanel{static get DEFAULT_CONFIG(){return{id:null,title:null,content:null,style:"plain",hidden:!1,togglecontrol:!0,closeicon:"triangle-down-circle",minimized:!1,position:"top-left",classes:[],onclose:null,onopen:null}}constructor(t){this.config=Object.assign({},FloatingPanel.DEFAULT_CONFIG,t),this.id||(this.id=`panel-${Utils.getUniqueKey(5)}`)}toggleClose(){this.minimized?this.open():this.close()}open(){this.container.setAttribute("aria-expanded","true"),this.pcontent.setAttribute("aria-hidden","false"),this.minimized=!1,this.onopen&&"function"==typeof this.onopen&&this.onopen(this)}close(){this.container.setAttribute("aria-expanded","false"),this.pcontent.setAttribute("aria-hidden","true"),this.minimized=!0,this.onclose&&"function"==typeof this.onclose&&this.onclose(this)}show(){this.container.removeAttribute("aria-hidden")}hide(){this.container.setAttribute("aria-hidden","true")}buildContainer(){const t=this;this.container=document.createElement("div"),this.container.classList.add("panel"),this.container.classList.add(this.style),this.container.classList.add(this.position);for(let t of this.classes)this.container.classList.add(t);this.togglecontrol&&(this.togglebutton=new SimpleButton({icon:this.closeicon,text:"Close",naked:!0,shape:"square",classes:["togglebutton"],action:function(t){t.preventDefault()}})),this.title?(this.titlecontainer=document.createElement("h3"),this.titlecontainer.addEventListener("click",function(e){e.preventDefault(),t.toggleClose()}),this.togglecontrol&&this.titlecontainer.appendChild(this.togglebutton.button),this.titleactual=document.createElement("span"),this.titleactual.classList.add("text"),this.titleactual.innerHTML=this.title,this.titlecontainer.appendChild(this.titleactual)):this.togglecontrol&&this.container.appendChild(this.togglebutton.button),this.pcontent=document.createElement("div"),this.pcontent.classList.add("pcontent"),this.content&&this.pcontent.appendChild(this.content),this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.title&&this.contentbox.appendChild(this.titlecontainer),this.contentbox.appendChild(this.pcontent),this.container.appendChild(this.contentbox),this.minimized?this.close():this.open(),this.hidden&&this.hide()}replace(t){this.content=t,this.pcontent.innerHTML="",this.pcontent.appendChild(this.content)}toString(){return Utils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get togglebutton(){return this._togglebutton}set togglebutton(t){this._togglebutton=t}get togglecontrol(){return this.config.togglecontrol}set togglecontrol(t){this.config.togglecontrol=t}get closeicon(){return this.config.closeicon}set closeicon(t){this.config.closeicon=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get content(){return this.config.content}set content(t){this.pcontent&&(this.pcontent.innerHTML=t),this.config.content=t}get contentbox(){return this._contentbox}set contentbox(t){this._contentbox=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get id(){return this.config.id}set id(t){this.config.id=t}get minimized(){return this._minimized}set minimized(t){this._minimized=t}get onclose(){return this.config.onclose}set onclose(t){"function"!=typeof t&&console.error("Action provided for onclose is not a function!"),this.config.onclose=t}get onopen(){return this.config.onopen}set onopen(t){"function"!=typeof t&&console.error("Action provided for onopen is not a function!"),this.config.onopen=t}get pcontent(){return this._pcontent}set pcontent(t){this._pcontent=t}get position(){return this.config.position}set position(t){this.config.position=t}get style(){return this.config.style}set style(t){this.config.style=t}get title(){return this.config.title}set title(t){this.config.title=t,this.titleactual&&(this.titleactual.innerHTML=t)}get titleactual(){return this._titleactual}set titleactual(t){this._titleactual=t}get titlecontainer(){return this._titlecontainer}set titlecontainer(t){this._titlecontainer=t}}class Growler extends FloatingPanel{static get DEFAULT_CONFIG(){return{text:null,closeicon:"echx",duration:4e3,icon:null,position:"bottom-right"}}static get GROWLBOX_ID(){return"gbox-"}static growl(t,e){return new Growler({text:t,title:e})}static error(t){return new Growler({text:t,title:"Error",icon:"warn-hex",classes:["error"]})}static warn(t){return new Growler({text:t,title:"Warning",icon:"warn-triangle",classes:["warn"]})}static caution(t){return new Growler({text:t,title:"Caution",icon:"warn-circle",classes:["caution"]})}static success(t){return new Growler({text:t,title:"Success",icon:"check-circle",classes:["success"]})}static buildGrowlbox(t){let e=document.createElement("div");return e.classList.add("growlbox"),e.setAttribute("id",`${Growler.GROWLBOX_ID}${t}`),e.classList.add(t),document.querySelector("body").appendChild(e),e}constructor(t){super(t=Object.assign({},Growler.DEFAULT_CONFIG,t)),this.growlbox=document.getElementById(`${Growler.GROWLBOX_ID}${this.position}`),this.growlbox||(this.growlbox=Growler.buildGrowlbox(this.position)),this.show()}close(){const t=this;this.timer&&clearTimeout(this.timer),this.container.setAttribute("aria-hidden","true"),setTimeout(function(){t.onclose&&"function"==typeof t.onclose&&t.onclose(t),t.container.parentNode.removeChild(t.container)},100)}quickClose(){this.timer&&clearTimeout(this.timer),this.container.parentNode.removeChild(this.container),this.onclose&&"function"==typeof this.onclose&&this.onclose(this)}show(){const t=this;this.container.removeAttribute("aria-hidden"),this.duration>0&&(this.timer=setTimeout(function(){t.close()},this.duration)),this.onopen&&"function"==typeof this.onopen&&this.onopen(this)}buildContainer(){const t=this;this.container=document.createElement("div"),this.container.setAttribute("aria-hidden","true"),this.container.classList.add("growler");for(let t of this.classes)this.container.classList.add(t);if(this.closebutton=new SimpleButton({icon:"echx",text:"Close",shape:"square",classes:["closebutton"],action:function(e){e.preventDefault(),t.quickClose()}}),this.title){let t=document.createElement("h3"),e=document.createElement("span");e.classList.add("text"),e.innerHTML=this.title,t.appendChild(e),t.appendChild(this.closebutton.button),this.container.appendChild(t)}else this.container.appendChild(this.closebutton.button);if(this.text){let t=document.createElement("div");if(t.classList.add("payload"),this.icon){let e=IconFactory.icon(this.icon);e.classList.add("i"),t.append(e)}let e=document.createElement("div");e.classList.add("text"),e.innerHTML=this.text,t.appendChild(e),this.container.appendChild(t)}this.growlbox.appendChild(this.container)}toString(){return Utils.getConfig(this)}get duration(){return this.config.duration}set duration(t){this.config.duration=t}get growlbox(){return this._growlbox}set growlbox(t){this._growlbox=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get text(){return this.config.text}set text(t){this.config.text=t}get timer(){return this._timer}set timer(t){this._timer=t}}class InstructionBox{static get DEFAULT_CONFIG(){return{icon:"help-circle",id:null,instructions:[],classes:[]}}constructor(t){return this.config=Object.assign({},InstructionBox.DEFAULT_CONFIG,t),(!this.instructions||this.instructions.length<1)&&console.warn("No instructions provided to InstructionBox"),this}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("instructions");for(let t of this.classes)this.container.classList.add(t);this.icon&&this.container.appendChild(IconFactory.icon(this.icon)),this.instructions&&this.instructions.length>0&&(this.setInstructions(this.instructions),this.container.appendChild(this.list))}buildList(){this.list=document.createElement("ul")}setInstructions(t){this.container.classList.remove("size-1"),this.container.classList.remove("size-2"),this.container.classList.remove("size-3"),this.list.innerHTML="";for(let e of t){let t=document.createElement("li");t.innerHTML=e,this.list.appendChild(t)}t.length>0&&t.length<4&&this.container.classList.add(`size-${t.length}`)}toString(){return Utils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get id(){return this.config.id}set id(t){this.config.id=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get list(){return this._list||this.buildList(),this._list}set list(t){this._list=t}get title(){return this.config.title}set title(t){this.config.title=t}}class MessageBox{static get DEFAULT_CONFIG(){return{id:null,errors:null,warnings:null,results:null,errorstitle:null,successtitle:null,warningstitle:null,erroricon:"warn-hex",warningicon:"warn-triangle",successicon:"disc-check",classes:[]}}constructor(t){return this.config=Object.assign({},MessageBox.DEFAULT_CONFIG,t),this}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("messagebox");for(let t of this.classes)this.container.classList.add(t);this.errors&&this.errors.length>0&&this.container.appendChild(this.buildBox("errors")),this.results&&this.results.length>0&&this.container.appendChild(this.buildBox("results")),this.warnings&&this.warnings.length>0&&this.container.appendChild(this.buildBox("warnings"))}buildBox(t="results"){let e,i,s,n=document.createElement("div");switch(n.classList.add("box"),n.classList.add(t),t){case"errors":e=this.errors,i=this.erroricon,s=this.errorstitle;break;case"warnings":e=this.warnings,i=this.warningicon,s=this.warningstitle;break;case"results":default:e=this.results,i=this.successicon,s=this.successtitle}if(s){let t=document.createElement("h4");t.innerHTML=s,n.appendChild(t)}let o=document.createElement("div");o.classList.add("lbox"),i&&o.appendChild(IconFactory.icon(i));let r=document.createElement("ul");for(let t of e){let e=document.createElement("li");e.innerHTML=t,r.appendChild(e)}return o.appendChild(r),o.classList.add(`size-${e.length}`),n.appendChild(o),n}toString(){return Utils.getConfig(this)}get id(){return this.config.id}set id(t){this.config.id=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get errors(){return this.config.errors}set errors(t){this.config.errors=t}get errorstitle(){return this.config.errorstitle}set errorstitle(t){this.config.errorstitle=t}get erroricon(){return this.config.erroricon}set erroricon(t){this.config.erroricon=t}get results(){return this.config.results}set results(t){this.config.results=t}get successtitle(){return this.config.successtitle}set successtitle(t){this.config.successtitle=t}get successicon(){return this.config.successicon}set successicon(t){this.config.successicon=t}get warnings(){return this.config.warnings}set warnings(t){this.config.warnings=t}get warningstitle(){return this.config.warningstitle}set warningstitle(t){this.config.warningstitle=t}get warningicon(){return this.config.warningicon}set warningicon(t){this.config.warningicon=t}}class PasswordGenerator{static get DEFAULT_CONFIG(){return{id:null,buttontext:"Generate Password",buttonicon:"refresh",length:15,autofills:[],sets:["lc","uc","num","punc"]}}static get DATASETS(){return{lc:{id:"lc",label:"Lowercase",set:"a-z",chars:"abcdefghijklmnopqrstuvwxyz"},uc:{id:"uc",label:"Uppercase",set:"A-Z",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},num:{id:"num",label:"Numbers",set:"0-9",chars:"0123456789"},punc:{id:"punc",label:"Punctuation",set:"#",chars:"![]{}()%&*$#^<>~@|"}}}static getDataSet(t){return PasswordGenerator.DATASETS[t]}static randomPassword(t=PasswordGenerator.DEFAULT_CONFIG.sets,e=15){let i="";for(let e of t)PasswordGenerator.getDataSet(e)&&(i+=PasswordGenerator.getDataSet(e).chars);let s="";for(let t=0;t<e;t++)s+=i.charAt(Math.floor(Math.random()*i.length));return s}constructor(t){this.config=Object.assign({},PasswordGenerator.DEFAULT_CONFIG,t),this.id||(this.id=`pwgen-${Utils.getUniqueKey(5)}`),this.setactuals=[]}generatePassword(){let t=[];if(this.sets&&0!==this.sets.length)for(let e of this.setactuals)e.checked&&t.push(e.value);else t=PasswordGenerator.DEFAULT_CONFIG.sets;let e=PasswordGenerator.randomPassword(t,this.length);if(this.autofills&&this.autofills.length>0){let t;for(let i of this.autofills)i.value=e,i.form&&(t=i.form);t&&t.validate()}}buildContainer(){const t=this;if(this.container=document.createElement("div"),this.container.classList.add("pwgenerator"),this.datasetblock=document.createElement("ul"),this.datasetblock.classList.add("datasets"),this.datasetblock.setAttribute("aria-hidden","true"),this.sets.length>0)for(let t of this.sets)if(t in PasswordGenerator.DATASETS){let e=PasswordGenerator.getDataSet(t),i=new BooleanToggle({name:`dset-${e.id}`,id:`${this.id}-${e.id}`,value:e.id,label:e.label,checked:!0});this.setactuals.push(i);let s=document.createElement("li");s.appendChild(i.container),this.datasetblock.appendChild(s)}this.button=new SimpleButton({text:this.buttontext,naked:!0,action:function(e){e.preventDefault(),t.generatePassword()}}),this.configbutton=new SimpleButton({icon:"gear",naked:!0,arialabel:"Configure Generator",classes:["config"],action:function(e){e.preventDefault(),t.datasetblock.getAttribute("aria-hidden")?t.datasetblock.removeAttribute("aria-hidden"):t.datasetblock.setAttribute("aria-hidden","true")}});let e=document.createElement("div");e.classList.add("controls"),e.appendChild(this.button.button),e.appendChild(this.configbutton.button),this.container.appendChild(e),this.container.appendChild(this.datasetblock)}toString(){return Utils.getConfig(this)}get autofills(){return this.config.autofills}set autofills(t){this.config.autofills=t}get button(){return this._button}set button(t){this._button=t}get configbutton(){return this._configbutton}set configbutton(t){this._configbutton=t}get buttonicon(){return this.config.buttonicon}set buttonicon(t){this.config.buttonicon=t}get buttontext(){return this.config.buttontext}set buttontext(t){this.config.buttontext=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get datasetblock(){return this._datasetblock}set datasetblock(t){this._datasetblock=t}get id(){return this.config.id}set id(t){this.config.id=t}get length(){return this.config.length}set length(t){this.config.length=t}get sets(){return this.config.sets}set sets(t){this.config.sets=t}get setactuals(){return this._setactuals}set setactuals(t){this._setactuals=t}}class PasswordChangeForm{static get DEFAULT_CONFIG(){return{maxlength:30,minlength:5,suggestedlength:8,cannotbe:[],instructions:["Change your password here."],buttontext:"Change Password",pwcurrlabel:"Current Password",pwcurrplaceholder:"Your current password",pwcurrhelp:"This is your <i>current</i> password. We need to confirm that you are who you are.",pwonelabel:"New Password",pwoneplaceholder:null,pwonehelp:null,pwtwolabel:"Confirm Password",pwtwoplaceholder:null,pwtwohelp:null,badpasswordhook:null}}constructor(t){this.config=Object.assign({},PasswordChangeForm.DEFAULT_CONFIG,t),this.id||(this.id=`pwchange-${Utils.getUniqueKey(5)}`)}runChecks(t){let e=!0;if(this.pwone.value!==this.pwtwo.value&&(this.pwone.errors.push("Passwords must match."),this.pwone.showMessages(),e=!1),this.cannotbe&&this.cannotbe.length>0)for(let t of this.cannotbe)this.pwone.value===t&&(this.pwone.errors.push("This cannot be used as a password."),e=!1);return e&&this.badpasswordhook&&"function"==typeof this.badpasswordhook&&(e=this.badpasswordhook(this.pwone)),e&&this.pwone.clearMessages(),e}buildForm(){const t=this;this.pwcurr=new PasswordInput({id:`${this.id}-pwcurr`,label:this.pwcurrlabel,showpasswordbydefault:!0,required:!0,placeholder:this.pwcurrplaceholder,help:this.pwcurrhelp}),this.pwone=new PasswordInput({id:`${this.id}-pwone`,label:this.pwonelabel,showpasswordbydefault:!0,required:!0,placeholder:this.pwoneplaceholder,help:this.pwonehelp}),this.pwtwo=new PasswordInput({id:`${this.id}-pwtwo`,label:this.pwtwolabel,required:!0,showpasswordbydefault:!0,placeholder:this.pwtwoplaceholder,help:this.pwtwohelp}),this.pwgen=new PasswordGenerator({autofills:[this.pwone,this.pwtwo]}),this.form=new SimpleForm({instructions:{icon:"help-circle",instructions:this.instructions},elements:[new HiddenField({name:this.name}),this.pwcurr,this.pwone,this.pwtwo,this.pwgen],validator:function(e){return t.runChecks(e)},handler:function(t,e){e({success:!0,results:["Your password has been changed successfully!"]})},actions:[new ConstructiveButton({text:this.buttontext,hot:!0,submits:!0,disabled:!0})]})}calculatePlaceholder(){return this.placeholder?this.placeholder:this.forceconstraints?`Must be at least ${this.minlength} characters.`:this.suggestedlength?`Should be at least ${this.suggestedlength} characters.`:void 0}get container(){return this.form.container}get pwonehelp(){if(this.config.pwonehelp)return this.config.pwonehelp}get pwoneplaceholder(){if(this.config.pwoneplaceholder)return this.config.pwoneplaceholder}get pwtwohelp(){if(this.config.pwtwohelp)return this.config.pwtwohelp}get pwtwoplaceholder(){if(this.config.pwtwoplaceholder)return this.config.pwtwoplaceholder}toString(){return Utils.getConfig(this)}get badpasswordhook(){return this.config.badpasswordhook}set badpasswordhook(t){"function"!=typeof t&&console.error("Action provided for badpasswordhook is not a function!"),this.config.badpasswordhook=t}get buttontext(){return this.config.buttontext}set buttontext(t){this.config.buttontext=t}get cannotbe(){return this.config.cannotbe}set cannotbe(t){this.config.cannotbe=t}get form(){return this._form||this.buildForm(),this._form}set form(t){this._form=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get maxlength(){return this.config.maxlength}set maxlength(t){this.config.maxlength=t}get minlength(){return this.config.minlength}set minlength(t){this.config.minlength=t}get pwactual(){return this._pwactual}set pwactual(t){this._pwactual=t}get pwcurr(){return this._pwcurr}set pwcurr(t){this._pwcurr=t}get pwgen(){return this._pwgen}set pwgen(t){this._pwgen=t}get pwone(){return this._pwone}set pwone(t){this._pwone=t}get pwtwo(){return this._pwtwo}set pwtwo(t){this._pwtwo=t}get pwcurrhelp(){return this.config.pwcurrhelp}set pwcurrhelp(t){this.config.pwcurrhelp=t}get pwcurrlabel(){return this.config.pwcurrlabel}set pwcurrlabel(t){this.config.pwcurrlabel=t}get pwcurrplaceholder(){return this.config.pwcurrplaceholder}set pwcurrplaceholder(t){this.config.pwcurrplaceholder=t}get pwonelabel(){return this.config.pwonelabel}set pwonelabel(t){this.config.pwonelabel=t}get pwtwolabel(){return this.config.pwtwolabel}set pwtwolabel(t){this.config.pwtwolabel=t}get suggestedlength(){return this.config.suggestedlength}set suggestedlength(t){this.config.suggestedlength=t}get value(){return this.pwactual.val()}set value(t){this.pwactual.val(t)}}class TabBar{static get DEFAULT_CONFIG(){return{id:null,navigation:!1,responsive:!0,menuicon:"menu",menulabel:"Toggle Menu",arialabel:"Primary",vertical:!1,animation:"popin",tabs:[],action:null,classes:[]}}constructor(t){this.config=Object.assign({},TabBar.DEFAULT_CONFIG,t),this.tabmap={},this.id||(this.id=`tabbar-${Utils.getUniqueKey(5)}`)}select(t){"string"==typeof t&&(t=document.querySelectorAll(`[data-tabid='${t}']`)[0]),t?(this.selected&&(this.selected.removeAttribute("aria-selected"),this.selected.setAttribute("tabindex","-1")),this.selected=t,this.selected.setAttribute("aria-selected","true"),this.selected.setAttribute("tabindex","0"),this.responsive&&this.menutitle&&(this.menutitle.innerHTML=this.selected.getAttribute("data-tabtext"))):console.warn(`Tab does not exist: ${t}`)}buildContainer(){const t=this;this.list=document.createElement("ul"),this.list.setAttribute("role","tablist"),this.list.classList.add("tabbar");for(let t of this.classes)this.list.classList.add(t);this.vertical&&this.list.classList.add("vertical");let e=1;for(let i of this.tabs){let s,n,o=e+1,r=e-1;if(r<1&&(r=1),o>this.tabs.length&&(o=this.tabs.length),!i.label&&!i.icon){console.warn("TabBar: Element defined but has neither icon or text.  Skipping");break}i.icon&&(s=IconFactory.icon(i.icon)),i.label&&((n=document.createElement("span")).innerHTML=i.label);let a=document.createElement("a");a.setAttribute("role","tab"),a.setAttribute("aria-controls",`t-${i.id}`),a.setAttribute("tabindex","-1"),a.setAttribute("data-tabtext",`${i.label}`),a.setAttribute("data-tabno",`${e}`),a.setAttribute("id",i.id),a.setAttribute("data-tabid",i.id),s&&a.appendChild(s),a.appendChild(n),a.addEventListener("keydown",function(e){"ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),t.list.querySelector(`[data-tabno='${r}']`).focus()):"ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),t.list.querySelector(`[data-tabno='${o}']`).focus()):" "!==e.key&&"Spacebar"!==e.key&&"Enter"!==e.key||a.click()}),a.addEventListener("click",function(e){e.preventDefault(),t.select(i.id),i.action&&"function"==typeof i.action?i.action(i.id,t):t.action&&t.action(i.id,t)});let l=document.createElement("li");if(l.setAttribute("role","presentation"),l.appendChild(a),i.classes)for(let t of i.classes)l.classList.add(t);this.tabmap[i.id]=l,this.animation&&(this.tabmap[i.id].style.setProperty("--anim-order",`${e}`),this.tabmap[i.id].classList.add(this.animation)),this.list.appendChild(this.tabmap[i.id]),e++,i.selected&&window.setTimeout(function(){t.select(i.id)},100)}this.navigation?(this.container=document.createElement("nav"),this.container.setAttribute("role","navigation"),this.container.setAttribute("aria-label",this.arialabel)):this.container=document.createElement("div"),this.container.classList.add("tablist-container");for(let t of this.classes)this.container.classList.add(t);this.responsive&&(this.responsivebox=document.createElement("div"),this.responsivebox.classList.add("responsivebox"),this.menubutton=new HamburgerButton({text:this.menulabel,toggletarget:t}),this.responsivebox.appendChild(this.menubutton.button),this.menutitle=document.createElement("div"),this.menutitle.classList.add("menutitle"),this.responsivebox.appendChild(this.menutitle),this.container.classList.add("responsive"),this.container.appendChild(this.responsivebox)),this.container.appendChild(this.list)}get isopen(){return this.container.hasAttribute("aria-expanded")}toggle(){this.isopen?this.close():this.open()}open(){const t=this;this.isopen||(this.container.setAttribute("aria-expanded","true"),this.menubutton&&this.menubutton.open(),setTimeout(function(){t.setCloseListener()},200))}close(){this.container.removeAttribute("aria-expanded"),this.menubutton&&this.menubutton.close()}setCloseListener(){const t=this;window.addEventListener("click",function(e){e.target===t.list?t.setCloseListener():t.close()},{once:!0})}toString(){return Utils.getConfig(this)}get action(){return this.config.action}set action(t){this.config.action=t}get animation(){return this.config.animation}set animation(t){this.config.animation=t}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get id(){return this.config.id}set id(t){this.config.id=t}get list(){return this._list}set list(t){this._list=t}get menuicon(){return this.config.menuicon}set menuicon(t){this.config.menuicon=t}get menulabel(){return this.config.menulabel}set menulabel(t){this.config.menulabel=t}get menubutton(){return this._menubutton}set menubutton(t){this._menubutton=t}get menutitle(){return this._menutitle}set menutitle(t){this._menutitle=t}get navigation(){return this.config.navigation}set navigation(t){this.config.navigation=t}get responsive(){return this.config.responsive}set responsive(t){this.config.responsive=t}get responsivebox(){return this._responsivebox}set responsivebox(t){this._responsivebox=t}get selected(){return this._selected}set selected(t){this._selected=t}get tabmap(){return this._tabmap}set tabmap(t){this._tabmap=t}get tabs(){return this.config.tabs}set tabs(t){this.config.tabs=t}get vertical(){return this.config.vertical}set vertical(t){this.config.vertical=t}}class SimpleProgressMeter{static get DEFAULT_CONFIG(){return{id:null,classes:[],label:null,help:null,style:null,commaseparate:!0,currentrank:null,nextrank:null,showcaps:!0,decalposition:"interior",maxvalue:100,minvalue:0,value:50,width:null}}constructor(t){this.config=Object.assign({},SimpleProgressMeter.DEFAULT_CONFIG,t),this.id||(this.id=`progress-${Utils.getUniqueKey(5)}`),this.determineWidth()}determineWidth(){if(this.width)return;let t=this.maxvalue-this.minvalue,e=this.value-this.minvalue;this.value<this.minvalue&&(e=this.value),this.width=e/t*100}buildContainer(){const t=this;this.progress=document.createElement("div"),this.progress.classList.add("progress"),this.bar=document.createElement("div"),this.bar.classList.add("simpleprogress"),this.bar.classList.add(this.style),this.bar.appendChild(this.progress),this.container=document.createElement("div"),this.container.classList.add("progressbar-container");for(let t of this.classes)this.container.classList.add(t);this.label&&this.container.append(this.labelobj),(this.currentrank||this.nextrank)&&this.decalposition&&"exterior"===this.decalposition&&(this.container.appendChild(this.decallayer),this.bar.classList.add("exteriordecal")),this.container.append(this.bar),(this.currentrank||this.nextrank)&&this.decalposition&&"exterior"!==this.decalposition&&"none"!==this.decalposition&&("exterior-bottom"===this.decalposition?(this.container.appendChild(this.decallayer),this.bar.classList.add("exteriordecal-bottom")):(this.bar.appendChild(this.decallayer),this.bar.classList.add("withdecals"))),setTimeout(function(){t.progress.style.width=`${t.width}%`},500)}buildDecalLayer(){if(!this.currentrank&&!this.nextrank&&!this.showcaps)return null;if("none"===this.decalposition)return null;if(this.decallayer=document.createElement("div"),this.decallayer.classList.add("decals"),this.decallayer.classList.add(this.decalposition),this.currentrank||this.showcaps){let t=document.createElement("div");if(t.classList.add("current"),this.currentrank){let e=document.createElement("div");e.classList.add("name"),e.innerHTML=this.currentrank,t.appendChild(e)}if(this.showcaps){let e=document.createElement("div");e.classList.add("value"),e.innerHTML=this.commaseparate?Utils.readableNumber(this.minvalue):this.minvalue,t.appendChild(e)}this.decallayer.append(t)}if(this.nextrank||this.showcaps){let t=document.createElement("div");if(t.classList.add("next"),this.nextrank){let e=document.createElement("div");e.classList.add("name"),e.innerHTML=this.nextrank,t.appendChild(e)}if(this.showcaps){let e=document.createElement("div");e.classList.add("value"),e.innerHTML=this.commaseparate?Utils.readableNumber(this.maxvalue):this.maxvalue,t.appendChild(e)}this.decallayer.appendChild(t)}}buildLabel(){const t=this;if(!this.label)return null;this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.innerHTML=this.label,this.help&&(this.helpicon=new HelpButton({help:this.help}),this.labelobj.appendChild(this.helpicon.button),this.labelobj.addEventListener("onmouseover",function(){t.helpicon.open()}),this.labelobj.addEventListener("onmouseout",function(){t.helpicon.close()}))}toString(){return Utils.getConfig(this)}get bar(){return this._bar}set bar(t){this._bar=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get commaseparate(){return this.config.commaseparate}set commaseparate(t){this.config.commaseparate=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get decallayer(){return this._decallayer||this.buildDecalLayer(),this._decallayer}set decallayer(t){this._decallayer=t}get decalposition(){return this.config.decalposition}set decalposition(t){this.config.decalposition=t}get help(){return this.config.help}set help(t){this.config.help=t}get helpicon(){return this._helpicon}set helpicon(t){this._helpicon=t}get id(){return this.config.id}set id(t){this.config.id=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get maxvalue(){return this.config.maxvalue}set maxvalue(t){this.config.maxvalue=t}get minvalue(){return this.config.minvalue}set minvalue(t){this.config.minvalue=t}get nextrank(){return this.config.nextrank}set nextrank(t){this.config.nextrank=t}get currentrank(){return this.config.currentrank}set currentrank(t){this.config.currentrank=t}get progress(){return this._progress}set progress(t){this._progress=t}get value(){return this.config.value}set value(t){this.config.value=t}get showcaps(){return this.config.showcaps}set showcaps(t){this.config.showcaps=t}get style(){return this.config.style}set style(t){this.config.style=t}get width(){return this.config.width}set width(t){this.config.width=t}}class RadialProgressMeter extends SimpleProgressMeter{static get DEFAULT_CONFIG(){return{numberposition:"center",badge:null,stinger:null,size:"medium",style:"solid",segments:null,strokewidth:null}}constructor(t){super(t=Object.assign({},RadialProgressMeter.DEFAULT_CONFIG,t)),this.calculateSize(),this.strokewidth||(this.strokewidth=.07*this.actualsize),"ticks"===this.style&&(this.segments=null),this.radius=this.actualsize/2-2*this.strokewidth,this.circumference=2*this.radius*Math.PI}calculateSize(){if("number"==typeof this.size)this.actualsize=this.size;else if(this.size.toLowerCase().endsWith("px"))this.actualsize=parseInt(this.size),isNaN(this.actualsize)&&(console.error(`RadialProgressMeter: provided invalid size: ${this.size}`),this.actualsize=200);else if(this.size.toLowerCase().endsWith("em"))this.actualsize=Utils.getSingleEmInPixels()*parseInt(this.size),isNaN(this.actualsize)&&(console.error(`RadialProgressMeter: provided invalid size: ${this.size}`),this.actualsize=200);else switch(this.size){case"small":this.actualsize=100;break;case"large":this.actualsize=400;break;case"huge":this.actualsize=800;break;case"medium":default:this.actualsize=200}this.actualsize>=800?this.sizeclass="huge":this.actualsize>=400?this.sizeclass="large":this.actualsize>=200?this.sizeclass="medium":this.actualsize>=100?this.sizeclass="small":this.sizeclass="tiny"}setProgress(t){const e=this.circumference-t/100*this.circumference;let i=this.container.querySelector(".radialcircle");if(i.style.strokeDasharray=`${this.circumference} ${this.circumference}`,i.style.strokeDashoffset=e,this.segments){let t=2*this.segments,e=(2*this.radius*Math.PI-t)/this.segments,i=this.container.querySelector(".tickmarks");i.style.strokeDasharray=`2px ${e}px`,i.style.strokeDashoffset=0}}circleTemplate(t){let e=document.createElement("circle");return e.classList.add(t),e.setAttribute("stroke-width",this.strokewidth),e.setAttribute("r",this.radius),e.setAttribute("cx",this.actualsize/2),e.setAttribute("cy",this.actualsize/2),e}buildContainer(){const t=this;this.container=document.createElement("div"),this.container.classList.add(this.sizeclass),this.container.classList.add("progressbar-container"),this.label&&this.container.appendChild(this.labelobj);let e=document.createElement("div");e.classList.add("circlewrap"),e.style.width=`${this.actualsize}`,e.style.height=`${this.actualsize}`;let i=document.createElement("svg");i.setAttribute("height",this.actualsize),i.setAttribute("width",this.actualsize),i.classList.add("progressgutter"),i.classList.add(this.style),i.appendChild(this.circleTemplate("gutter")),i.appendChild(this.circleTemplate("radialcircle")),(this.segments||"ticks"===this.style)&&i.appendChild(this.circleTemplate("tickmarks")),e.appendChild(i),e.appendChild(this.decallayer),this.container.appendChild(e),this.container.innerHTML=this.container.innerHTML,this.setProgress(0);window.setTimeout(function(){t.setProgress(t.value)},500)}buildDecalLayer(){this.badge||(this.badge=`${this.value}<sup>%</sup>`),this.badgeobj=document.createElement("div"),this.badgeobj.classList.add("badge"),this.badgeobj.innerHTML=this.badge,this.stinger&&(this.stingerobj=document.createElement("div"),this.stingerobj.classList.add("stinger"),this.stingerobj.innerHTML=this.stinger),this.decallayer=document.createElement("div"),this.decallayer.classList.add("decals"),this.decallayer.classList.add(this.numberposition),this.decallayer.appendChild(this.badgeobj),this.stinger&&this.decallayer.appendChild(this.stingerobj)}get actualsize(){return this._actualsize}set actualsize(t){this._actualsize=t}get badge(){return this.config.badge}set badge(t){this.config.badge=t}get badgeobj(){return this._badgeobj}set badgeobj(t){this._badgeobj=t}get circumference(){return this._circumference}set circumference(t){this._circumference=t}get numberposition(){return this.config.numberposition}set numberposition(t){this.config.numberposition=t}get radius(){return this._radius}set radius(t){this._radius=t}get size(){return this.config.size}set size(t){this.config.size=t}get sizeclass(){return this._sizeclass}set sizeclass(t){this._sizeclass=t}get stinger(){return this.config.stinger}set stinger(t){this.config.stinger=t}get stingerobj(){return this._stingerobj}set stingerobj(t){this._stingerobj=t}get strokewidth(){return this.config.strokewidth}set strokewidth(t){this.config.strokewidth=t}get style(){return this.config.style}set style(t){this.config.style=t}get segments(){return this.config.segments}set segments(t){this.config.segments=t}get wrap(){return this._wrap}set wrap(t){this._wrap=t}}class SimpleForm{static get DEFAULT_CONFIG(){return{id:null,name:null,handler:null,url:null,target:null,dialog:null,enctype:null,autocomplete:"off",method:"get",header:null,passive:!1,instructions:null,passiveinstructions:null,spinnerstyle:"spin",spinnertext:"...Please Wait...",results:null,classes:[],submittors:[],elements:[],actions:[],passiveactions:[],handlercallback:null,onsuccess:null,onfailure:null,onvalid:null,oninvalid:null,validator:null}}constructor(t){this.config=Object.assign({},SimpleForm.DEFAULT_CONFIG,t),this.id||(this.id=`form-${Utils.getUniqueKey(5)}`)}pacify(){this.form.classList.add("passive"),this.passive=!0;for(let t of this.elements)t.pacify();this.passiveinstructions&&this.instructionbox&&this.instructionbox.setInstructions(this.passiveinstructions.instructions)}activate(){this.form.classList.remove("passive"),this.passive=!1;for(let t of this.elements)t.activate();this.instructions&&this.instructionbox&&this.instructionbox.setInstructions(this.instructions.instructions)}toggleActivation(){this.form.hasClass("passive")?this.activate():this.pacify()}submit(){const t=this;this.passive||this.validate()&&(this.handler?(this.form.classList.add("shaded"),"function"==typeof this.handler?this.handler(t,function(e){t.handlercallback&&"function"==typeof t.handlercallback?(t.handlercallback(t,e),t.container.classList.remove("shaded")):t.handleResults(e)}):this.doAjax(function(e){t.handlercallback&&"function"==typeof t.handlercallback?(t.handlercallback(t,e),t.container.classList.remove("shaded")):t.handleResults(e)})):this.url?this.form.submit():console.log(`No handler defined for form ${this.id} :: ${this.name}`))}doAjax(t){let e=[];for(let t of this.elements)e.push(`${t.name}=${t.value}`);const i=e.join("&");fetch(this.handler,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:this.method,body:i}).then(t=>t.json()).then(e=>{t&&"function"==typeof t&&t(e)}).catch(t=>{console.error("Error while executing ajax call."),console.error(t)})}handleResults(t,e){this.messagebox&&this.messagebox.remove(),this.messagebox=new MessageBox(t).container,this.headerbox.append(this.messagebox),this.container.classList.remove("shaded"),e||(t.success&&this.onsuccess&&"function"==typeof this.onsuccess?this.onsuccess(this,t):this.onfailure&&"function"==typeof this.onfailure&&this.onfailure(this,t))}validate(){let t=!0;for(let e of this.elements)if(e.touched){e.validate()||(t=!1)}else e.required&&""===e.value&&(t=!1);return t&&this.validator&&"function"==typeof this.validator&&(t=this.validator(this)),t?this.runValid():this.runInvalid(),t}runValid(){for(let t of this.submittors)t.enable();this.onvalid&&"function"==typeof this.onvalid&&this.onvalid(this)}runInvalid(){for(let t of this.submittors)t.disable();this.oninvalid&&"function"==typeof this.oninvalid&&this.oninvalid(this)}buildForm(){const t=this;this.form=document.createElement("form"),this.form.setAttribute("id",this.id),this.form.setAttribute("novalidate",!0),this.name&&this.form.setAttribute("name",this.name),this.form.setAttribute("method",this.method),this.enctype&&this.form.setAttribute("enctype",this.enctype),this.form.setAttribute("role","form"),this.form.setAttribute("autocomplete",this.autocomplete),this.form.classList.add("cornflowerblue");for(let t of this.classes)this.form.classList.add(t);this.form.addEventListener("submit",function(e){e.preventDefault(),t.submit()}),this.handler&&"function"!=typeof this.handler&&this.target&&this.form.setAttribute("target",this.target),this.contentbox.appendChild(this.headerbox),this.contentbox.appendChild(this.elementbox),this.form.appendChild(this.shade),this.form.appendChild(this.contentbox),this.actions.length>0&&this.form.appendChild(this.actionbox),this.passiveactions.length>0&&this.form.appendChild(this.passiveactionbox),this.validate(),this.passive&&this.pacify()}buildHeaderBox(){this.headerbox=document.createElement("div"),this.headerbox.classList.add("header"),(this.header||this.instructions&&this.instructions.instructions&&this.instructions.instructions.length>0)&&(this.header&&this.headerbox.appendChild(this.header),this.instructions&&this.headerbox.appendChild(this.instructionbox.container)),this.results&&this.handleResults(this.results,!0)}buildInstructionBox(){if(!this.instructions||0===this.instructions.length)return;let t=this.instructions;this.passive&&this.passiveinstructions&&this.passiveinstructions.length>0&&(t=this.passiveinstructions),this.instructionbox=new InstructionBox(t)}buildShade(){if(this.shade=document.createElement("div"),this.shade.classList.add("shade"),this.spinnerstyle){let t=document.createElement("div");t.classList.add("spinner"),t.classList.add(this.spinnerstyle),this.shade.append(t)}if(this.spinnertext){let t=document.createElement("div");t.classList.add("spinnertext"),t.classList.innerHTML=this.spinnertext,this.shade.append(t)}}buildElementBox(){this.elementbox=document.createElement("div"),this.elementbox.classList.add("elements");for(let t of this.elements)t.form=this,"file"===t.type&&this.form.setAttribute("enctype","multipart/form-data"),!t.id&&t.name?t.id=`${this.id}-${t.name}`:t.id||(t.id=`${this.id}-e-${Utils.getUniqueKey(5)}`),this.addElement(t),this.elementbox.appendChild(t.container)}buildContentBox(){this.contentbox=document.createElement("div"),this.contentbox.classList.add("contentbox")}buildActionBox(){if(this.actions&&this.actions.length>0){this.actionbox=document.createElement("div"),this.actionbox.classList.add("actions");for(let t of this.actions)t.cansubmit&&t.submits&&this.submittors.push(t),t.form=this,this.actionbox.appendChild(t.container)}}buildPassiveActionBox(){if(this.passiveactions&&this.passiveactions.length>0){this.passiveactionbox=document.createElement("div"),this.passiveactionbox.classList.add("passiveactions");for(let t of this.passiveactions)t.cansubmit&&t.submits&&this.submittors.push(t),t.form=this,this.passiveactionbox.appendChild(t.container)}}getElement(t){return this.elementmap[t]}addElement(t){this.elementmap[t.id]=t}toString(){return Utils.getConfig(this)}get actionbox(){return this._actionbox||this.buildActionBox(),this._actionbox}set actionbox(t){this._actionbox=t}get actions(){return this.config.actions}set actions(t){this.config.actions=t}get autocomplete(){return this.config.autocomplete}set autocomplete(t){this.config.autocomplete=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this.form}set container(t){this.form=t}get contentbox(){return this._contentbox||this.buildContentBox(),this._contentbox}set contentbox(t){this._contentbox=t}get dialog(){return this.config.dialog}set dialog(t){this.config.dialog=t}get elementbox(){return this._elementbox||this.buildElementBox(),this._elementbox}set elementbox(t){this._elementbox=t}get elementmap(){return this._elementmap||(this._elementmap={}),this._elementmap}set elementmap(t){this._elementmap=t}get elements(){return this.config.elements}set elements(t){this.config.elements=t}get enctype(){return this.config.enctype}set enctype(t){this.config.enctype=t}get form(){return this._form||this.buildForm(),this._form}set form(t){this._form=t}get handler(){return this.config.handler}set handler(t){"function"!=typeof t&&console.error("Action provided for handler is not a function!"),this.config.handler=t}get handlercallback(){return this.config.handlercallback}set handlercallback(t){"function"!=typeof t&&console.error("Action provided for handlercallback is not a function!"),this.config.handlercallback=t}get header(){return this.config.header}set header(t){this.config.header=t}get headerbox(){return this._headerbox||this.buildHeaderBox(),this._headerbox}set headerbox(t){this._headerbox=t}get id(){return this.config.id}set id(t){this.config.id=t}get passive(){return this.config.passive}set passive(t){this.config.passive=t}get passiveactionbox(){return this._passiveactionbox||this.buildPassiveActionBox(),this._passiveactionbox}set passiveactionbox(t){this._passiveactionbox=t}get passiveactions(){return this.config.passiveactions}set passiveactions(t){this.config.passiveactions=t}get passiveinstructions(){return this.config.passiveinstructions}set passiveinstructions(t){this.config.passiveinstructions=t}get instructionbox(){return this._instructionbox||this.buildInstructionBox(),this._instructionbox}set instructionbox(t){this._instructionbox=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get messagebox(){return this._messagebox}set messagebox(t){this._messagebox=t}get method(){return this.config.method}set method(t){this.config.method=t}get name(){return this.config.name}set name(t){this.config.name=t}get onfailure(){return this.config.onfailure}set onfailure(t){"function"!=typeof t&&console.error("Action provided for onfailure is not a function!"),this.config.onfailure=t}get onsuccess(){return this.config.onsuccess}set onsuccess(t){"function"!=typeof t&&console.error("Action provided for onsuccess is not a function!"),this.config.onsuccess=t}get oninvalid(){return this.config.oninvalid}set oninvalid(t){"function"!=typeof t&&console.error("Action provided for oninvalid is not a function!"),this.config.oninvalid=t}get onvalid(){return this.config.onvalid}set onvalid(t){"function"!=typeof t&&console.error("Action provided for onvalid is not a function!"),this.config.onvalid=t}get results(){return this.config.results}set results(t){this.config.results=t}get shade(){return this._shade||this.buildShade(),this._shade}set shade(t){this._shade=t}get spinnerstyle(){return this.config.spinnerstyle}set spinnerstyle(t){this.config.spinnerstyle=t}get spinnertext(){return this.config.spinnertext}set spinnertext(t){this.config.spinnertext=t}get submittors(){return this.config.submittors}set submittors(t){this.config.submittors=t}get target(){return this.config.target}set target(t){this.config.target=t}get url(){return this.config.url}set url(t){this.config.url=t}get validator(){return this.config.validator}set validator(t){"function"!=typeof t&&console.error("Action provided for validator is not a function!"),this.config.validator=t}}
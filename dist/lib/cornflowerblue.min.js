/*! Cornflower Blue - v0.1.1 - 2021-08-31
* http://www.gaijin.com/cornflowerblue/
* Copyright (c) 2021 Brandon Harris; Licensed MIT */
class CFBUtils{static debounce(t,e=300){let i;return(...s)=>{clearTimeout(i),i=setTimeout((()=>{t.apply(this,s)}),e)}}static closeOpen(){clearTimeout(ToolTip.timer),ToolTip.activeTooltip&&(clearTimeout(ToolTip.activeTooltip.timer),ToolTip.activeTooltip.close()),SelectMenu.activeMenu&&SelectMenu.activeMenu.close(),ButtonMenu.activeMenu&&ButtonMenu.activeMenu.close()}static applyAttributes(t,e){if(t&&e)for(let i of Object.keys(t))e.setAttribute(i,t[i])}static applyDataAttributes(t,e){if(t&&e)for(let i of Object.keys(t))e.setAttribute(`data-${i}`,t[i])}static setCursorPosition(t,e=0){if(t)if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){let i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}}static stripHTML(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""}static formatBytes(t,e=2){if(0===t)return"0 Bytes";const i=e<0?0:e,s=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,s)).toFixed(i))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}static setTimeZone(t,e,i="en-US"){let s=new Date(t.toLocaleString(i,{timeZone:e})),n=t.getTime()-s.getTime();return new Date(t.getTime()+n)}static getCookie(t){return`; ${document.cookie}`.split(`; ${t}=`).pop().split(";").shift()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}static getAllURLParams(t){let e=t?t.split("?")[1]:window.location.search.slice(1),i={};if(e){e=e.split("#")[0];let t=e.split("&");for(let e=0;e<t.length;e++){let s=t[e].split("="),n=s[0],a=void 0===s[1]||s[1];if(n=n.toLowerCase(),"string"==typeof a&&(a=a.toLowerCase()),n.match(/\[(\d+)?\]$/)){let t=n.replace(/\[(\d+)?\]/,"");if(i[t]||(i[t]=[]),n.match(/\[\d+\]$/)){let e=/\[(\d+)\]/.exec(n)[1];i[t][e]=a}else i[t].push(a)}else i[n]?i[n]&&"string"==typeof i[n]?(i[n]=[i[n]],i[n].push(a)):i[n].push(a):i[n]=a}}return i}static getConfig(t){let e=Object.keys(t.config).sort(((t,e)=>{let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1})),i=[];for(let s of e)"function"==typeof t[s]?i.push(`\t ${s} : (...) => { ... }`):Array.isArray(t[s])?i.push(`\t ${s} : [${t[s]}]`):"string"==typeof t[s]?i.push(`\t ${s} : "${t[s]}"`):i.push(`\t ${s} : ${t[s]}`);let s=t.constructor.name+" {\n";return s+=i.join(",\n"),s+="\n}\n",s}static prettyPrintConfig(t){let e=Object.keys(t.config).sort(((t,e)=>{let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1})),i=[];for(let s of e){let e="";if("id"===s||"name"===s)e=`    <span class="key">${s}</span> : <span class="value">&lt;string&gt;</span>`;else if("function"==typeof t[s])e=`    <span class="key">${s}</span> : (...) => { ... }`;else if(Array.isArray(t[s])){if(e=`    <span class="key">${s}</span> : [`,null!==t[s]&&t[s].length>0){let i=[];for(let e of t[s])"string"==typeof e?i.push(`"<span class="value">${e}</span>"`):i.push(`<span class="value">${e}</span>`);e+=i.join(", ")}e+="]"}else e="string"==typeof t[s]?`    <span class="key">${s}</span> : "<span class="value">${t[s]}</span>"`:`    <span class="key">${s}</span> : <span class="value">${t[s]}</span>`;(Array.isArray(t[s])&&CFBUtils.arrayEquals(t[s],t.constructor.DEFAULT_CONFIG[s])||t[s]===t.constructor.DEFAULT_CONFIG[s])&&(e=`<span class="default">${e}</span>`),i.push(e)}let s=t.constructor.name+" {\n";return s+=i.join(",\n"),s+="\n}\n",s}static arrayEquals(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;t.sort(((t,e)=>{let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1})),e.sort(((t,e)=>{let i=t.toLowerCase(),s=e.toLowerCase();return i===s?0:i>s?1:-1}));for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}static getSingleEmInPixels(){let t=0,e=200,i=Math.round((e-t)/2)+t,s=0;for(;e-t>1;){if(s+=1,window.matchMedia(`(min-width: ${i}em)`).matches?t=i:e=i,i=Math.round((e-t)/2)+t,s>10)break}return Math.ceil(window.innerWidth/i)}static supportsCrypto(){return window.crypto&&crypto.subtle&&window.TextEncoder}static hash(t,e){return crypto.subtle.digest(t,(new TextEncoder).encode(e))}static hex(t){return[].map.call(new Uint8Array(t),(t=>("00"+t.toString(16)).slice(-2))).join("")}static encode64(t){return btoa(new Uint8Array(t).reduce(((t,e)=>t+String.fromCharCode(e)),""))}static async sha256(t){const e=new TextEncoder("utf-8").encode(t),i=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(i)).map((t=>("00"+t.toString(16)).slice(-2))).join("")}static async sha256Encrypt(t,e){const i=new TextEncoder("utf-8").encode(t),s=await crypto.subtle.encrypt("SHA-256",e,i);return Array.from(new Uint8Array(s)).map((t=>("00"+t.toString(16)).slice(-2))).join("")}static excerpt(t,e=70,i=!0){if(i){let e=document.createElement("div");e.innerHTML=t,t=e.textContent||e.innerText||""}return t.length>e?`${t.substring(0,e-3)}...`:t}static readableNumber(t){return null==t?null:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static formatMoney(t,e,i,s,n){e=isNaN(e=Math.abs(e))?2:e,s=void 0===s?".":s,i=void 0===i?",":i,n=void 0===n?"$":n;let a,o,r=t,c=r<0?"-":"";return a=parseInt(r=Math.abs(+r||0).toFixed(e))+"",o=(o=a.length)>3?o%3:0,c+n+(o?a.substr(0,o)+i:"")+a.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?s+Math.abs(r-a).toFixed(e).slice(2):"")}static randomNumber(t=100){return Math.floor(1+Math.random()*t)}static coinFlip(){return 0===Math.floor(2*Math.random())}static dieRoll(t=6){return Math.floor(Math.random()*t)+1}static getUniqueKey(t=30){let e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}static selectElementContents(t){let e=document.createRange();e.selectNodeContents(t);let i=window.getSelection();i.removeAllRanges(),i.addRange(e)}static determineScrollbarWidth(){let t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}static isEdge(){return navigator.userAgent.match(/Edge/i)}static isAndroid(){return navigator.userAgent.match(/Android/i)}static isBlackBerry(){return navigator.userAgent.match(/BlackBerry/i)}static isIOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}static isIPhone(){return navigator.userAgent.match(/iPhone|iPod/i)}static isIPad(){return navigator.userAgent.match(/iPad/i)}static isOperaMobile(){return navigator.userAgent.match(/Opera Mini/i)}static isWindowsMobile(){return navigator.userAgent.match(/IEMobile/i)}static isMobile(){return this.isAndroid()||this.isBlackBerry()||this.isIOS()||this.isOperaMobile()||this.isWindowsMobile()}}window.CFBUtils=CFBUtils;class BusinessObject{static get CONFIG(){return{identifier:"id",source:null,cadence:6e4,dataprocessor:null,sourcemethod:"GET",sourceargs:null,sortfunction:(t,e)=>t.name>e.name?1:t.name<e.name?-1:0,fields:[]}}constructor(){this.config=BusinessObject.CONFIG,this.initialized=!1}get options(){let t=[];for(let e of Object.values(this.cache))t.push({value:e[this.identifier],label:e.name});return t.sort(((t,e)=>t.label>e.label?1:t.label<e.label?-1:0)),t}get list(){let t=[];for(let e of Object.values(this.cache))t.push(e);return t.sort(((t,e)=>this.sortfunction(t,e))),t}static search(t){if(!t||t.length()<1)return[];let e=[];for(let i of Object.values(this.cache))for(let s of this.fields)switch(s.type){case"number":Number(t)===i[s.name]&&e.push(i);break;case"stringarray":for(let n of i[s.name])if(n.toUpperCase().indexOf(t.toUpperCase())>=0){e.push(i);break}break;case"string":i[s.name].toUpperCase().indexOf(t.toUpperCase())>=0&&e.push(i)}return e}async update(t){this.load(t)}needsupdate(){return!(this.cadence&&this.cadence<1)&&(!this.updated||(new Date).getTime()-this.updated>this.cadence)}async load(t){this.updating||this.source&&(this.updating=!0,await fetch(this.source,{method:this.sourcemethod,headers:{"Content-Type":"application/json; charset=utf-8"}}).then((t=>t.json())).then((e=>{if(e=this.dataprocessor&&"function"==typeof this.dataprocessor?this.dataprocessor(e):e.data,this.identifier)for(let t of e)this.put(t);this.updated=(new Date).getTime(),this.initialized=!0,this.updating=!1,t&&"function"==typeof t&&t(e)})).catch((t=>{console.error(`Error while fetching data from ${this.source}`),console.error(t)})))}get(t){return this.cache[t]}put(t){this.cache||(this.cache={}),this.cache[t[this.identifier]]=t}remove(t){t&&(Object.getPrototypeOf(t).isPrototypeOf(Object)?delete this.cache[t[this.identifier]]:delete this.cache[t])}clear(){this.cache={}}get cache(){return this._cache||(this._cache={}),this._cache}set cache(t){this._cache=t}get cadence(){return this.config.cadence}set cadence(t){this.config.cadence=t}get dataprocessor(){return this.config.dataprocessor}set dataprocessor(t){this.config.dataprocessor=t}get identifier(){return this.config.identifier}set identifier(t){this.config.identifier=t}get initialized(){return this._initialized}set initialized(t){this._initialized=t}get fields(){return this.config.fields}set fields(t){this.config.fields=t}get sortfunction(){return this.config.sortfunction}set sortfunction(t){this.config.sortfunction=t}get source(){return this.config.source}set source(t){this.config.source=t}get sourcemethod(){return this.config.sourcemethod}set sourcemethod(t){this.config.sourcemethod=t}get updated(){return this._updated}set updated(t){this._updated=t}get updating(){return this._updating}set updating(t){this._updating=t}}window.BusinessObject=BusinessObject;class CountryCode extends BusinessObject{static get CONFIG(){return{identifier:"code",cadence:-1,fields:[new GridField({name:"code",label:TextFactory.get("code"),identifier:!0,readonly:!0,type:"string"}),new GridField({name:"name",label:TextFactory.get("country"),readonly:!0,type:"string"})]}}static get MAP(){return{AF:{code:"AF",name:"Afghanistan"},AX:{code:"AX",name:"Åland Islands"},AL:{code:"AL",name:"Albania"},DZ:{code:"DZ",name:"Algeria"},AS:{code:"AS",name:"American Samoa"},AD:{code:"AD",name:"Andorra"},AO:{code:"AO",name:"Angola"},AI:{code:"AI",name:"Anguilla"},AQ:{code:"AQ",name:"Antarctica"},AG:{code:"AG",name:"Antigua and Barbuda"},AR:{code:"AR",name:"Argentina"},AM:{code:"AM",name:"Armenia"},AW:{code:"AW",name:"Aruba"},AU:{code:"AU",name:"Australia"},AT:{code:"AT",name:"Austria"},AZ:{code:"AZ",name:"Azerbaijan"},BS:{code:"BS",name:"Bahamas"},BH:{code:"BH",name:"Bahrain"},BD:{code:"BD",name:"Bangladesh"},BB:{code:"BB",name:"Barbados"},BY:{code:"BY",name:"Belarus"},BE:{code:"BE",name:"Belgium"},BZ:{code:"BZ",name:"Belize"},BJ:{code:"BJ",name:"Benin"},BM:{code:"BM",name:"Bermuda"},BT:{code:"BT",name:"Bhutan"},BO:{code:"BO",name:"Bolivia, Plurinational State of"},BQ:{code:"BQ",name:"Bonaire, Sint Eustatius and Saba"},BA:{code:"BA",name:"Bosnia and Herzegovina"},BW:{code:"BW",name:"Botswana"},BV:{code:"BV",name:"Bouvet Island"},BR:{code:"BR",name:"Brazil"},IO:{code:"IO",name:"British Indian Ocean Territory"},BN:{code:"BN",name:"Brunei Darussalam"},BG:{code:"BG",name:"Bulgaria"},BF:{code:"BF",name:"Burkina Faso"},BI:{code:"BI",name:"Burundi"},KH:{code:"KH",name:"Cambodia"},CM:{code:"CM",name:"Cameroon"},CA:{code:"CA",name:"Canada"},CV:{code:"CV",name:"Cape Verde"},KY:{code:"KY",name:"Cayman Islands"},CF:{code:"CF",name:"Central African Republic"},TD:{code:"TD",name:"Chad"},CL:{code:"CL",name:"Chile"},CN:{code:"CN",name:"China"},CX:{code:"CX",name:"Christmas Island"},CC:{code:"CC",name:"Cocos (Keeling) Islands"},CO:{code:"CO",name:"Colombia"},KM:{code:"KM",name:"Comoros"},CG:{code:"CG",name:"Congo"},CD:{code:"CD",name:"Congo, the Democratic Republic of the"},CK:{code:"CK",name:"Cook Islands"},CR:{code:"CR",name:"Costa Rica"},CI:{code:"CI",name:"Côte d'Ivoire"},HR:{code:"HR",name:"Croatia"},CU:{code:"CU",name:"Cuba"},CW:{code:"CW",name:"Curaçao"},CY:{code:"CY",name:"Cyprus"},CZ:{code:"CZ",name:"Czech Republic"},DK:{code:"DK",name:"Denmark"},DJ:{code:"DJ",name:"Djibouti"},DM:{code:"DM",name:"Dominica"},DO:{code:"DO",name:"Dominican Republic"},EC:{code:"EC",name:"Ecuador"},EG:{code:"EG",name:"Egypt"},SV:{code:"SV",name:"El Salvador"},GQ:{code:"GQ",name:"Equatorial Guinea"},ER:{code:"ER",name:"Eritrea"},EE:{code:"EE",name:"Estonia"},ET:{code:"ET",name:"Ethiopia"},FK:{code:"FK",name:"Falkland Islands (Malvinas)"},FO:{code:"FO",name:"Faroe Islands"},FJ:{code:"FJ",name:"Fiji"},FI:{code:"FI",name:"Finland"},FR:{code:"FR",name:"France"},GF:{code:"GF",name:"French Guiana"},PF:{code:"PF",name:"French Polynesia"},TF:{code:"TF",name:"French Southern Territories"},GA:{code:"GA",name:"Gabon"},GM:{code:"GM",name:"Gambia"},GE:{code:"GE",name:"Georgia"},DE:{code:"DE",name:"Germany"},GH:{code:"GH",name:"Ghana"},GI:{code:"GI",name:"Gibraltar"},GR:{code:"GR",name:"Greece"},GL:{code:"GL",name:"Greenland"},GD:{code:"GD",name:"Grenada"},GP:{code:"GP",name:"Guadeloupe"},GU:{code:"GU",name:"Guam"},GT:{code:"GT",name:"Guatemala"},GG:{code:"GG",name:"Guernsey"},GN:{code:"GN",name:"Guinea"},GW:{code:"GW",name:"Guinea-Bissau"},GY:{code:"GY",name:"Guyana"},HT:{code:"HT",name:"Haiti"},HM:{code:"HM",name:"Heard Island and McDonald Islands"},VA:{code:"VA",name:"Holy See (Vatican City State)"},HN:{code:"HN",name:"Honduras"},HK:{code:"HK",name:"Hong Kong"},HU:{code:"HU",name:"Hungary"},IS:{code:"IS",name:"Iceland"},IN:{code:"IN",name:"India"},ID:{code:"ID",name:"Indonesia"},IR:{code:"IR",name:"Iran, Islamic Republic of"},IQ:{code:"IQ",name:"Iraq"},IE:{code:"IE",name:"Ireland"},IM:{code:"IM",name:"Isle of Man"},IL:{code:"IL",name:"Israel"},IT:{code:"IT",name:"Italy"},JM:{code:"JM",name:"Jamaica"},JP:{code:"JP",name:"Japan"},JE:{code:"JE",name:"Jersey"},JO:{code:"JO",name:"Jordan"},KZ:{code:"KZ",name:"Kazakhstan"},KE:{code:"KE",name:"Kenya"},KI:{code:"KI",name:"Kiribati"},KP:{code:"KP",name:"Korea, Democratic People's Republic of"},KR:{code:"KR",name:"Korea, Republic of"},KW:{code:"KW",name:"Kuwait"},KG:{code:"KG",name:"Kyrgyzstan"},LA:{code:"LA",name:"Lao People's Democratic Republic"},LV:{code:"LV",name:"Latvia"},LB:{code:"LB",name:"Lebanon"},LS:{code:"LS",name:"Lesotho"},LR:{code:"LR",name:"Liberia"},LY:{code:"LY",name:"Libya"},LI:{code:"LI",name:"Liechtenstein"},LT:{code:"LT",name:"Lithuania"},LU:{code:"LU",name:"Luxembourg"},MO:{code:"MO",name:"Macao"},MK:{code:"MK",name:"Macedonia, the Former Yugoslav Republic of"},MG:{code:"MG",name:"Madagascar"},MW:{code:"MW",name:"Malawi"},MY:{code:"MY",name:"Malaysia"},MV:{code:"MV",name:"Maldives"},ML:{code:"ML",name:"Mali"},MT:{code:"MT",name:"Malta"},MH:{code:"MH",name:"Marshall Islands"},MQ:{code:"MQ",name:"Martinique"},MR:{code:"MR",name:"Mauritania"},MU:{code:"MU",name:"Mauritius"},YT:{code:"YT",name:"Mayotte"},MX:{code:"MX",name:"Mexico"},FM:{code:"FM",name:"Micronesia, Federated States of"},MD:{code:"MD",name:"Moldova, Republic of"},MC:{code:"MC",name:"Monaco"},MN:{code:"MN",name:"Mongolia"},ME:{code:"ME",name:"Montenegro"},MS:{code:"MS",name:"Montserrat"},MA:{code:"MA",name:"Morocco"},MZ:{code:"MZ",name:"Mozambique"},MM:{code:"MM",name:"Myanmar"},NA:{code:"NA",name:"Namibia"},NR:{code:"NR",name:"Nauru"},NP:{code:"NP",name:"Nepal"},NL:{code:"NL",name:"Netherlands"},NC:{code:"NC",name:"New Caledonia"},NZ:{code:"NZ",name:"New Zealand"},NI:{code:"NI",name:"Nicaragua"},NE:{code:"NE",name:"Niger"},NG:{code:"NG",name:"Nigeria"},NU:{code:"NU",name:"Niue"},NF:{code:"NF",name:"Norfolk Island"},MP:{code:"MP",name:"Northern Mariana Islands"},NO:{code:"NO",name:"Norway"},OM:{code:"OM",name:"Oman"},PK:{code:"PK",name:"Pakistan"},PW:{code:"PW",name:"Palau"},PS:{code:"PS",name:"Palestine, State of"},PA:{code:"PA",name:"Panama"},PG:{code:"PG",name:"Papua New Guinea"},PY:{code:"PY",name:"Paraguay"},PE:{code:"PE",name:"Peru"},PH:{code:"PH",name:"Philippines"},PN:{code:"PN",name:"Pitcairn"},PL:{code:"PL",name:"Poland"},PT:{code:"PT",name:"Portugal"},PR:{code:"PR",name:"Puerto Rico"},QA:{code:"QA",name:"Qatar"},RE:{code:"RE",name:"Réunion"},RO:{code:"RO",name:"Romania"},RU:{code:"RU",name:"Russian Federation"},RW:{code:"RW",name:"Rwanda"},BL:{code:"BL",name:"Saint Barthélemy"},SH:{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},KN:{code:"KN",name:"Saint Kitts and Nevis"},LC:{code:"LC",name:"Saint Lucia"},MF:{code:"MF",name:"Saint Martin (French part)"},PM:{code:"PM",name:"Saint Pierre and Miquelon"},VC:{code:"VC",name:"Saint Vincent and the Grenadines"},WS:{code:"WS",name:"Samoa"},SM:{code:"SM",name:"San Marino"},ST:{code:"ST",name:"Sao Tome and Principe"},SA:{code:"SA",name:"Saudi Arabia"},SN:{code:"SN",name:"Senegal"},RS:{code:"RS",name:"Serbia"},SC:{code:"SC",name:"Seychelles"},SL:{code:"SL",name:"Sierra Leone"},SG:{code:"SG",name:"Singapore"},SX:{code:"SX",name:"Sint Maarten (Dutch part)"},SK:{code:"SK",name:"Slovakia"},SI:{code:"SI",name:"Slovenia"},SB:{code:"SB",name:"Solomon Islands"},SO:{code:"SO",name:"Somalia"},ZA:{code:"ZA",name:"South Africa"},GS:{code:"GS",name:"South Georgia and the South Sandwich Islands"},SS:{code:"SS",name:"South Sudan"},ES:{code:"ES",name:"Spain"},LK:{code:"LK",name:"Sri Lanka"},SD:{code:"SD",name:"Sudan"},SR:{code:"SR",name:"Suriname"},SJ:{code:"SJ",name:"Svalbard and Jan Mayen"},SZ:{code:"SZ",name:"Swaziland"},SE:{code:"SE",name:"Sweden"},CH:{code:"CH",name:"Switzerland"},SY:{code:"SY",name:"Syrian Arab Republic"},TW:{code:"TW",name:"Taiwan, Province of China"},TJ:{code:"TJ",name:"Tajikistan"},TZ:{code:"TZ",name:"Tanzania, United Republic of"},TH:{code:"TH",name:"Thailand"},TL:{code:"TL",name:"Timor-Leste"},TG:{code:"TG",name:"Togo"},TK:{code:"TK",name:"Tokelau"},TO:{code:"TO",name:"Tonga"},TT:{code:"TT",name:"Trinidad and Tobago"},TN:{code:"TN",name:"Tunisia"},TR:{code:"TR",name:"Turkey"},TM:{code:"TM",name:"Turkmenistan"},TC:{code:"TC",name:"Turks and Caicos Islands"},TV:{code:"TV",name:"Tuvalu"},UG:{code:"UG",name:"Uganda"},UA:{code:"UA",name:"Ukraine"},AE:{code:"AE",name:"United Arab Emirates"},GB:{code:"GB",name:"United Kingdom"},US:{code:"US",name:"United States"},UM:{code:"UM",name:"United States Minor Outlying Islands"},UY:{code:"UY",name:"Uruguay"},UZ:{code:"UZ",name:"Uzbekistan"},VU:{code:"VU",name:"Vanuatu"},VE:{code:"VE",name:"Venezuela, Bolivarian Republic of"},VN:{code:"VN",name:"Viet Nam"},VG:{code:"VG",name:"Virgin Islands, British"},VI:{code:"VI",name:"Virgin Islands, U.S."},WF:{code:"WF",name:"Wallis and Futuna"},EH:{code:"EH",name:"Western Sahara"},YE:{code:"YE",name:"Yemen"},ZM:{code:"ZM",name:"Zambia"},ZW:{code:"ZW",name:"Zimbabwe"}}}constructor(){return super(),CountryCode.instance||(this.config=Object.assign({},this.config,CountryCode.CONFIG),this.cache=CountryCode.MAP,this.initialized=!0,CountryCode.instance=this),CountryCode.instance}}window.CountryCode=CountryCode;class StateProvince extends BusinessObject{static get CONFIG(){return{identifier:"id",cadence:-1,fields:[new GridField({name:"id",label:TextFactory.get("code"),identifier:!0,readonly:!0,type:"string"}),new GridField({name:"name",label:TextFactory.get("name"),readonly:!0,type:"string"}),new GridField({name:"country",label:TextFactory.get("country"),readonly:!0,type:"string"}),new GridField({name:"alt",label:TextFactory.get("alternate_names"),readonly:!0,type:"stringarray"})]}}static get MAP(){return{AL:{id:"AL",name:"Alabama",country:"US"},AK:{id:"AK",name:"Alaska",country:"US"},AZ:{id:"AZ",name:"Arizona",country:"US"},AR:{id:"AR",name:"Arkansas",country:"US"},CA:{id:"CA",name:"California",country:"US"},CO:{id:"CO",name:"Colorado",country:"US"},CT:{id:"CT",name:"Connecticut",country:"US"},DC:{id:"DC",name:"District of Columbia",country:"US",alt:["Washington DC","Washington D.C."]},DE:{id:"DE",name:"Delaware",country:"US"},FL:{id:"FL",name:"Florida",country:"US"},GA:{id:"GA",name:"Georgia",country:"US"},HI:{id:"HI",name:"Hawaii",country:"US"},ID:{id:"ID",name:"Idaho",country:"US"},IL:{id:"IL",name:"Illinois",country:"US"},IN:{id:"IN",name:"Indiana",country:"US"},IA:{id:"IA",name:"Iowa",country:"US"},KS:{id:"KS",name:"Kansas",country:"US"},KY:{id:"KY",name:"Kentucky",country:"US"},LA:{id:"LA",name:"Louisiana",country:"US"},ME:{id:"ME",name:"Maine",country:"US"},MD:{id:"MD",name:"Maryland",country:"US"},MA:{id:"MA",name:"Massachusetts",country:"US"},MI:{id:"MI",name:"Michigan",country:"US"},MN:{id:"MN",name:"Minnesota",country:"US"},MS:{id:"MS",name:"Mississippi",country:"US"},MO:{id:"MO",name:"Missouri",country:"US"},MT:{id:"MT",name:"Montana",country:"US"},NE:{id:"NE",name:"Nebraska",country:"US"},NV:{id:"NV",name:"Nevada",country:"US"},NH:{id:"NH",name:"New Hampshire",country:"US"},NJ:{id:"NJ",name:"New Jersey",country:"US"},NM:{id:"NM",name:"New Mexico",country:"US"},NY:{id:"NY",name:"New York",country:"US"},NC:{id:"NC",name:"North Carolina",country:"US"},ND:{id:"ND",name:"North Dakota",country:"US"},OH:{id:"OH",name:"Ohio",country:"US"},OK:{id:"OK",name:"Oklahoma",country:"US"},OR:{id:"OR",name:"Oregon",country:"US"},PA:{id:"PA",name:"Pennsylvania",country:"US"},RI:{id:"RI",name:"Rhode Island",country:"US"},SC:{id:"SC",name:"South Carolina",country:"US"},SD:{id:"SD",name:"South Dakota",country:"US"},TN:{id:"TN",name:"Tennessee",country:"US"},TX:{id:"TX",name:"Texas",country:"US"},UT:{id:"UT",name:"Utah",country:"US"},VT:{id:"VT",name:"Vermont",country:"US"},VA:{id:"VA",name:"Virginia",country:"US"},WA:{id:"WA",name:"Washington",country:"US"},WV:{id:"WV",name:"West Virginia",country:"US"},WI:{id:"WI",name:"Wisconsin",country:"US"},WY:{id:"WY",name:"Wyoming",country:"US"},AS:{id:"AS",name:"American Samoa",country:"US"},GU:{id:"GU",name:"Guam",country:"US"},MP:{id:"MP",name:"Northern Mariana Islands",country:"US"},PR:{id:"PR",name:"Puerto Rico",country:"US"},UM:{id:"UM",name:"United States Minor Outlying Islands",country:"US"},VI:{id:"VI",name:"Virgin Islands",country:"US"},AB:{id:"AB",name:"Alberta",country:"CA"},BC:{id:"BC",name:"British Columbia",country:"CA"},MB:{id:"MB",name:"Manitoba",country:"CA"},NB:{id:"NB",name:"New Brunswick",country:"CA"},NL:{id:"NL",name:"Newfoundland and Labrador",country:"CA",alt:["Newfoundland","Labrador"]},NS:{id:"NS",name:"Nova Scotia",country:"CA"},NU:{id:"NU",name:"Nunavut",country:"CA"},NT:{id:"NT",name:"Northwest Territories",country:"CA"},ON:{id:"ON",name:"Ontario",country:"CA"},PE:{id:"PE",name:"Prince Edward Island",country:"CA"},QC:{id:"QC",name:"Quebec",country:"CA"},SK:{id:"SK",name:"Saskatchewan",country:"CA"},YT:{id:"YT",name:"Yukon",country:"CA"}}}static get US_STATES(){return["AL","AK","AZ","AR","CA","CO","CT","DC","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AS","GU","MP","PR","UM","VI"]}static get CA_STATES(){return["AB","BC","MB","NB","NL","NS","NU","NT","ON","PE","QC","SK","YT"]}set(t){let e=[];switch(t){case"US":for(let t of StateProvince.US_STATES)e.push(this.get(t));break;case"CA":for(let t of StateProvince.CA_STATES)e.push(this.get(t));break;default:for(let t of StateProvince.US_STATES)e.push(this.get(t));for(let t of StateProvince.CA_STATES)e.push(this.get(t))}return e.sort(((t,e)=>this.sortfunction(t,e))),e}static search(t){if(!t||t.length()<1)return[];let e=[];for(let i of Object.keys(StateProvince.MAP)){let s=StateProvince.MAP[i];if(t.toUpperCase()===i)e.push(s);else if(s.name.toUpperCase().indexOf(t.toUpperCase())>=0)e.push(s);else if(s.alt&&s.alt.length>0){let i=!1;for(let n of s.alt)!i&&n.toUpperCase().indexOf(t.toUpperCase())>=0&&e.push(s)}}return e}constructor(){return super(),StateProvince.instance||(this.config=Object.assign({},this.config,StateProvince.CONFIG),this.cache=StateProvince.MAP,this.initialized=!0,StateProvince.instance=this),StateProvince.instance}}window.StateProvince=StateProvince;class TimeZoneDefinition extends BusinessObject{static get CONFIG(){return{identifier:"id",cadence:-1,fields:[new GridField({name:"id",label:TextFactory.get("name"),identifier:!0,readonly:!0,type:"string"}),new GridField({name:"countrycode",label:TextFactory.get("country_code"),readonly:!0,type:"string"}),new GridField({name:"country",label:TextFactory.get("country"),readonly:!0,type:"string"}),new GridField({name:"name",label:TextFactory.get("time_zone"),readonly:!0,type:"string"}),new GridField({name:"offset",label:TextFactory.get("offset"),readonly:!0,type:"string"})],sortfunction:(t,e)=>t.tz>e.tz?1:t.tz<e.tz?-1:0}}static get MAP(){return{"Asia/Kabul":{id:"Asia/Kabul",countrycode:"AF",country:"Afghanistan",name:"Asia/Kabul",offset:"UTC +04:30"},"Europe/Tirane":{id:"Europe/Tirane",countrycode:"AL",country:"Albania",name:"Europe/Tirane",offset:"UTC +01:00"},"Africa/Algiers":{id:"Africa/Algiers",countrycode:"DZ",country:"Algeria",name:"Africa/Algiers",offset:"UTC +01:00"},"Pacific/Pago_Pago":{id:"Pacific/Pago_Pago",countrycode:"AS",country:"American Samoa",name:"Pacific/Pago_Pago",offset:"UTC -11:00"},"Europe/Andorra":{id:"Europe/Andorra",countrycode:"AD",country:"Andorra",name:"Europe/Andorra",offset:"UTC +01:00"},"Africa/Luanda":{id:"Africa/Luanda",countrycode:"AO",country:"Angola",name:"Africa/Luanda",offset:"UTC +01:00"},"America/Anguilla":{id:"America/Anguilla",countrycode:"AI",country:"Anguilla",name:"America/Anguilla",offset:"UTC -04:00"},"Antarctica/Casey":{id:"Antarctica/Casey",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Casey",offset:"UTC +08:00"},"Antarctica/Davis":{id:"Antarctica/Davis",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Davis",offset:"UTC +07:00"},"Antarctica/DumontDUrville":{id:"Antarctica/DumontDUrville",countrycode:"AQ",country:"Antarctica",name:"Antarctica/DumontDUrville",offset:"UTC +10:00"},"Antarctica/Mawson":{id:"Antarctica/Mawson",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Mawson",offset:"UTC +05:00"},"Antarctica/McMurdo":{id:"Antarctica/McMurdo",countrycode:"AQ",country:"Antarctica",name:"Antarctica/McMurdo",offset:"UTC +13:00"},"Antarctica/Palmer":{id:"Antarctica/Palmer",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Palmer",offset:"UTC -03:00"},"Antarctica/Rothera":{id:"Antarctica/Rothera",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Rothera",offset:"UTC -03:00"},"Antarctica/Syowa":{id:"Antarctica/Syowa",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Syowa",offset:"UTC +03:00"},"Antarctica/Troll":{id:"Antarctica/Troll",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Troll",offset:"UTC"},"Antarctica/Vostok":{id:"Antarctica/Vostok",countrycode:"AQ",country:"Antarctica",name:"Antarctica/Vostok",offset:"UTC +06:00"},"America/Antigua":{id:"America/Antigua",countrycode:"AG",country:"Antigua and Barbuda",name:"America/Antigua",offset:"UTC -04:00"},"America/Argentina/Buenos_Aires":{id:"America/Argentina/Buenos_Aires",countrycode:"AR",country:"Argentina",name:"America/Argentina/Buenos_Aires",offset:"UTC -03:00"},"America/Argentina/Catamarca":{id:"America/Argentina/Catamarca",countrycode:"AR",country:"Argentina",name:"America/Argentina/Catamarca",offset:"UTC -03:00"},"America/Argentina/Cordoba":{id:"America/Argentina/Cordoba",countrycode:"AR",country:"Argentina",name:"America/Argentina/Cordoba",offset:"UTC -03:00"},"America/Argentina/Jujuy":{id:"America/Argentina/Jujuy",countrycode:"AR",country:"Argentina",name:"America/Argentina/Jujuy",offset:"UTC -03:00"},"America/Argentina/La_Rioja":{id:"America/Argentina/La_Rioja",countrycode:"AR",country:"Argentina",name:"America/Argentina/La_Rioja",offset:"UTC -03:00"},"America/Argentina/Mendoza":{id:"America/Argentina/Mendoza",countrycode:"AR",country:"Argentina",name:"America/Argentina/Mendoza",offset:"UTC -03:00"},"America/Argentina/Rio_Gallegos":{id:"America/Argentina/Rio_Gallegos",countrycode:"AR",country:"Argentina",name:"America/Argentina/Rio_Gallegos",offset:"UTC -03:00"},"America/Argentina/Salta":{id:"America/Argentina/Salta",countrycode:"AR",country:"Argentina",name:"America/Argentina/Salta",offset:"UTC -03:00"},"America/Argentina/San_Juan":{id:"America/Argentina/San_Juan",countrycode:"AR",country:"Argentina",name:"America/Argentina/San_Juan",offset:"UTC -03:00"},"America/Argentina/San_Luis":{id:"America/Argentina/San_Luis",countrycode:"AR",country:"Argentina",name:"America/Argentina/San_Luis",offset:"UTC -03:00"},"America/Argentina/Tucuman":{id:"America/Argentina/Tucuman",countrycode:"AR",country:"Argentina",name:"America/Argentina/Tucuman",offset:"UTC -03:00"},"America/Argentina/Ushuaia":{id:"America/Argentina/Ushuaia",countrycode:"AR",country:"Argentina",name:"America/Argentina/Ushuaia",offset:"UTC -03:00"},"Asia/Yerevan":{id:"Asia/Yerevan",countrycode:"AM",country:"Armenia",name:"Asia/Yerevan",offset:"UTC +04:00"},"America/Aruba":{id:"America/Aruba",countrycode:"AW",country:"Aruba",name:"America/Aruba",offset:"UTC -04:00"},"Antarctica/Macquarie":{id:"Antarctica/Macquarie",countrycode:"AU",country:"Australia",name:"Antarctica/Macquarie",offset:"UTC +11:00"},"Australia/Adelaide":{id:"Australia/Adelaide",countrycode:"AU",country:"Australia",name:"Australia/Adelaide",offset:"UTC +10:30"},"Australia/Brisbane":{id:"Australia/Brisbane",countrycode:"AU",country:"Australia",name:"Australia/Brisbane",offset:"UTC +10:00"},"Australia/Broken_Hill":{id:"Australia/Broken_Hill",countrycode:"AU",country:"Australia",name:"Australia/Broken_Hill",offset:"UTC +10:30"},"Australia/Currie":{id:"Australia/Currie",countrycode:"AU",country:"Australia",name:"Australia/Currie",offset:"UTC +11:00"},"Australia/Darwin":{id:"Australia/Darwin",countrycode:"AU",country:"Australia",name:"Australia/Darwin",offset:"UTC +09:30"},"Australia/Eucla":{id:"Australia/Eucla",countrycode:"AU",country:"Australia",name:"Australia/Eucla",offset:"UTC +08:45"},"Australia/Hobart":{id:"Australia/Hobart",countrycode:"AU",country:"Australia",name:"Australia/Hobart",offset:"UTC +11:00"},"Australia/Lindeman":{id:"Australia/Lindeman",countrycode:"AU",country:"Australia",name:"Australia/Lindeman",offset:"UTC +10:00"},"Australia/Lord_Howe":{id:"Australia/Lord_Howe",countrycode:"AU",country:"Australia",name:"Australia/Lord_Howe",offset:"UTC +11:00"},"Australia/Melbourne":{id:"Australia/Melbourne",countrycode:"AU",country:"Australia",name:"Australia/Melbourne",offset:"UTC +11:00"},"Australia/Perth":{id:"Australia/Perth",countrycode:"AU",country:"Australia",name:"Australia/Perth",offset:"UTC +08:00"},"Australia/Sydney":{id:"Australia/Sydney",countrycode:"AU",country:"Australia",name:"Australia/Sydney",offset:"UTC +11:00"},"Europe/Vienna":{id:"Europe/Vienna",countrycode:"AT",country:"Austria",name:"Europe/Vienna",offset:"UTC +01:00"},"Asia/Baku":{id:"Asia/Baku",countrycode:"AZ",country:"Azerbaijan",name:"Asia/Baku",offset:"UTC +04:00"},"America/Nassau":{id:"America/Nassau",countrycode:"BS",country:"Bahamas",name:"America/Nassau",offset:"UTC -05:00"},"Asia/Bahrain":{id:"Asia/Bahrain",countrycode:"BH",country:"Bahrain",name:"Asia/Bahrain",offset:"UTC +03:00"},"Asia/Dhaka":{id:"Asia/Dhaka",countrycode:"BD",country:"Bangladesh",name:"Asia/Dhaka",offset:"UTC +06:00"},"America/Barbados":{id:"America/Barbados",countrycode:"BB",country:"Barbados",name:"America/Barbados",offset:"UTC -04:00"},"Europe/Minsk":{id:"Europe/Minsk",countrycode:"BY",country:"Belarus",name:"Europe/Minsk",offset:"UTC +03:00"},"Europe/Brussels":{id:"Europe/Brussels",countrycode:"BE",country:"Belgium",name:"Europe/Brussels",offset:"UTC +01:00"},"America/Belize":{id:"America/Belize",countrycode:"BZ",country:"Belize",name:"America/Belize",offset:"UTC -06:00"},"Africa/Porto-Novo":{id:"Africa/Porto-Novo",countrycode:"BJ",country:"Benin",name:"Africa/Porto-Novo",offset:"UTC +01:00"},"Atlantic/Bermuda":{id:"Atlantic/Bermuda",countrycode:"BM",country:"Bermuda",name:"Atlantic/Bermuda",offset:"UTC -04:00"},"Asia/Thimphu":{id:"Asia/Thimphu",countrycode:"BT",country:"Bhutan",name:"Asia/Thimphu",offset:"UTC +06:00"},"America/La_Paz":{id:"America/La_Paz",countrycode:"BO",country:"Bolivia, Plurinational State of",name:"America/La_Paz",offset:"UTC -04:00"},"America/Kralendijk":{id:"America/Kralendijk",countrycode:"BQ",country:"Bonaire, Sint Eustatius and Saba",name:"America/Kralendijk",offset:"UTC -04:00"},"Europe/Sarajevo":{id:"Europe/Sarajevo",countrycode:"BA",country:"Bosnia and Herzegovina",name:"Europe/Sarajevo",offset:"UTC +01:00"},"Africa/Gaborone":{id:"Africa/Gaborone",countrycode:"BW",country:"Botswana",name:"Africa/Gaborone",offset:"UTC +02:00"},"America/Araguaina":{id:"America/Araguaina",countrycode:"BR",country:"Brazil",name:"America/Araguaina",offset:"UTC -03:00"},"America/Bahia":{id:"America/Bahia",countrycode:"BR",country:"Brazil",name:"America/Bahia",offset:"UTC -03:00"},"America/Belem":{id:"America/Belem",countrycode:"BR",country:"Brazil",name:"America/Belem",offset:"UTC -03:00"},"America/Boa_Vista":{id:"America/Boa_Vista",countrycode:"BR",country:"Brazil",name:"America/Boa_Vista",offset:"UTC -04:00"},"America/Campo_Grande":{id:"America/Campo_Grande",countrycode:"BR",country:"Brazil",name:"America/Campo_Grande",offset:"UTC -04:00"},"America/Cuiaba":{id:"America/Cuiaba",countrycode:"BR",country:"Brazil",name:"America/Cuiaba",offset:"UTC -04:00"},"America/Eirunepe":{id:"America/Eirunepe",countrycode:"BR",country:"Brazil",name:"America/Eirunepe",offset:"UTC -05:00"},"America/Fortaleza":{id:"America/Fortaleza",countrycode:"BR",country:"Brazil",name:"America/Fortaleza",offset:"UTC -03:00"},"America/Maceio":{id:"America/Maceio",countrycode:"BR",country:"Brazil",name:"America/Maceio",offset:"UTC -03:00"},"America/Manaus":{id:"America/Manaus",countrycode:"BR",country:"Brazil",name:"America/Manaus",offset:"UTC -04:00"},"America/Noronha":{id:"America/Noronha",countrycode:"BR",country:"Brazil",name:"America/Noronha",offset:"UTC -02:00"},"America/Porto_Velho":{id:"America/Porto_Velho",countrycode:"BR",country:"Brazil",name:"America/Porto_Velho",offset:"UTC -04:00"},"America/Recife":{id:"America/Recife",countrycode:"BR",country:"Brazil",name:"America/Recife",offset:"UTC -03:00"},"America/Rio_Branco":{id:"America/Rio_Branco",countrycode:"BR",country:"Brazil",name:"America/Rio_Branco",offset:"UTC -05:00"},"America/Santarem":{id:"America/Santarem",countrycode:"BR",country:"Brazil",name:"America/Santarem",offset:"UTC -03:00"},"America/Sao_Paulo":{id:"America/Sao_Paulo",countrycode:"BR",country:"Brazil",name:"America/Sao_Paulo",offset:"UTC -03:00"},"Indian/Chagos":{id:"Indian/Chagos",countrycode:"IO",country:"British Indian Ocean Territory",name:"Indian/Chagos",offset:"UTC +06:00"},"Asia/Brunei":{id:"Asia/Brunei",countrycode:"BN",country:"Brunei Darussalam",name:"Asia/Brunei",offset:"UTC +08:00"},"Europe/Sofia":{id:"Europe/Sofia",countrycode:"BG",country:"Bulgaria",name:"Europe/Sofia",offset:"UTC +02:00"},"Africa/Ouagadougou":{id:"Africa/Ouagadougou",countrycode:"BF",country:"Burkina Faso",name:"Africa/Ouagadougou",offset:"UTC"},"Africa/Bujumbura":{id:"Africa/Bujumbura",countrycode:"BI",country:"Burundi",name:"Africa/Bujumbura",offset:"UTC +02:00"},"Asia/Phnom_Penh":{id:"Asia/Phnom_Penh",countrycode:"KH",country:"Cambodia",name:"Asia/Phnom_Penh",offset:"UTC +07:00"},"Africa/Douala":{id:"Africa/Douala",countrycode:"CM",country:"Cameroon",name:"Africa/Douala",offset:"UTC +01:00"},"America/Atikokan":{id:"America/Atikokan",countrycode:"CA",country:"Canada",name:"America/Atikokan",offset:"UTC -05:00"},"America/Blanc-Sablon":{id:"America/Blanc-Sablon",countrycode:"CA",country:"Canada",name:"America/Blanc-Sablon",offset:"UTC -04:00"},"America/Cambridge_Bay":{id:"America/Cambridge_Bay",countrycode:"CA",country:"Canada",name:"America/Cambridge_Bay",offset:"UTC -07:00"},"America/Creston":{id:"America/Creston",countrycode:"CA",country:"Canada",name:"America/Creston",offset:"UTC -07:00"},"America/Dawson":{id:"America/Dawson",countrycode:"CA",country:"Canada",name:"America/Dawson",offset:"UTC -08:00"},"America/Dawson_Creek":{id:"America/Dawson_Creek",countrycode:"CA",country:"Canada",name:"America/Dawson_Creek",offset:"UTC -07:00"},"America/Edmonton":{id:"America/Edmonton",countrycode:"CA",country:"Canada",name:"America/Edmonton",offset:"UTC -07:00"},"America/Fort_Nelson":{id:"America/Fort_Nelson",countrycode:"CA",country:"Canada",name:"America/Fort_Nelson",offset:"UTC -07:00"},"America/Glace_Bay":{id:"America/Glace_Bay",countrycode:"CA",country:"Canada",name:"America/Glace_Bay",offset:"UTC -04:00"},"America/Goose_Bay":{id:"America/Goose_Bay",countrycode:"CA",country:"Canada",name:"America/Goose_Bay",offset:"UTC -04:00"},"America/Halifax":{id:"America/Halifax",countrycode:"CA",country:"Canada",name:"America/Halifax",offset:"UTC -04:00"},"America/Inuvik":{id:"America/Inuvik",countrycode:"CA",country:"Canada",name:"America/Inuvik",offset:"UTC -07:00"},"America/Iqaluit":{id:"America/Iqaluit",countrycode:"CA",country:"Canada",name:"America/Iqaluit",offset:"UTC -05:00"},"America/Moncton":{id:"America/Moncton",countrycode:"CA",country:"Canada",name:"America/Moncton",offset:"UTC -04:00"},"America/Nipigon":{id:"America/Nipigon",countrycode:"CA",country:"Canada",name:"America/Nipigon",offset:"UTC -05:00"},"America/Pangnirtung":{id:"America/Pangnirtung",countrycode:"CA",country:"Canada",name:"America/Pangnirtung",offset:"UTC -05:00"},"America/Rainy_River":{id:"America/Rainy_River",countrycode:"CA",country:"Canada",name:"America/Rainy_River",offset:"UTC -06:00"},"America/Rankin_Inlet":{id:"America/Rankin_Inlet",countrycode:"CA",country:"Canada",name:"America/Rankin_Inlet",offset:"UTC -06:00"},"America/Regina":{id:"America/Regina",countrycode:"CA",country:"Canada",name:"America/Regina",offset:"UTC -06:00"},"America/Resolute":{id:"America/Resolute",countrycode:"CA",country:"Canada",name:"America/Resolute",offset:"UTC -06:00"},"America/St_Johns":{id:"America/St_Johns",countrycode:"CA",country:"Canada",name:"America/St_Johns",offset:"UTC -03:30"},"America/Swift_Current":{id:"America/Swift_Current",countrycode:"CA",country:"Canada",name:"America/Swift_Current",offset:"UTC -06:00"},"America/Thunder_Bay":{id:"America/Thunder_Bay",countrycode:"CA",country:"Canada",name:"America/Thunder_Bay",offset:"UTC -05:00"},"America/Toronto":{id:"America/Toronto",countrycode:"CA",country:"Canada",name:"America/Toronto",offset:"UTC -05:00"},"America/Vancouver":{id:"America/Vancouver",countrycode:"CA",country:"Canada",name:"America/Vancouver",offset:"UTC -08:00"},"America/Whitehorse":{id:"America/Whitehorse",countrycode:"CA",country:"Canada",name:"America/Whitehorse",offset:"UTC -08:00"},"America/Winnipeg":{id:"America/Winnipeg",countrycode:"CA",country:"Canada",name:"America/Winnipeg",offset:"UTC -06:00"},"America/Yellowknife":{id:"America/Yellowknife",countrycode:"CA",country:"Canada",name:"America/Yellowknife",offset:"UTC -07:00"},"Atlantic/Cape_Verde":{id:"Atlantic/Cape_Verde",countrycode:"CV",country:"Cape Verde",name:"Atlantic/Cape_Verde",offset:"UTC -01:00"},"America/Cayman":{id:"America/Cayman",countrycode:"KY",country:"Cayman Islands",name:"America/Cayman",offset:"UTC -05:00"},"Africa/Bangui":{id:"Africa/Bangui",countrycode:"CF",country:"Central African Republic",name:"Africa/Bangui",offset:"UTC +01:00"},"Africa/Ndjamena":{id:"Africa/Ndjamena",countrycode:"TD",country:"Chad",name:"Africa/Ndjamena",offset:"UTC +01:00"},"America/Punta_Arenas":{id:"America/Punta_Arenas",countrycode:"CL",country:"Chile",name:"America/Punta_Arenas",offset:"UTC -03:00"},"America/Santiago":{id:"America/Santiago",countrycode:"CL",country:"Chile",name:"America/Santiago",offset:"UTC -03:00"},"Pacific/Easter":{id:"Pacific/Easter",countrycode:"CL",country:"Chile",name:"Pacific/Easter",offset:"UTC -05:00"},"Asia/Shanghai":{id:"Asia/Shanghai",countrycode:"CN",country:"China",name:"Asia/Shanghai",offset:"UTC +08:00"},"Asia/Urumqi":{id:"Asia/Urumqi",countrycode:"CN",country:"China",name:"Asia/Urumqi",offset:"UTC +06:00"},"Indian/Christmas":{id:"Indian/Christmas",countrycode:"CX",country:"Christmas Island",name:"Indian/Christmas",offset:"UTC +07:00"},"Indian/Cocos":{id:"Indian/Cocos",countrycode:"CC",country:"Cocos (Keeling) Islands",name:"Indian/Cocos",offset:"UTC +06:30"},"America/Bogota":{id:"America/Bogota",countrycode:"CO",country:"Colombia",name:"America/Bogota",offset:"UTC -05:00"},"Indian/Comoro":{id:"Indian/Comoro",countrycode:"KM",country:"Comoros",name:"Indian/Comoro",offset:"UTC +03:00"},"Africa/Brazzaville":{id:"Africa/Brazzaville",countrycode:"CG",country:"Congo",name:"Africa/Brazzaville",offset:"UTC +01:00"},"Africa/Kinshasa":{id:"Africa/Kinshasa",countrycode:"CD",country:"Congo, the Democratic Republic of the",name:"Africa/Kinshasa",offset:"UTC +01:00"},"Africa/Lubumbashi":{id:"Africa/Lubumbashi",countrycode:"CD",country:"Congo, the Democratic Republic of the",name:"Africa/Lubumbashi",offset:"UTC +02:00"},"Pacific/Rarotonga":{id:"Pacific/Rarotonga",countrycode:"CK",country:"Cook Islands",name:"Pacific/Rarotonga",offset:"UTC -10:00"},"America/Costa_Rica":{id:"America/Costa_Rica",countrycode:"CR",country:"Costa Rica",name:"America/Costa_Rica",offset:"UTC -06:00"},"Europe/Zagreb":{id:"Europe/Zagreb",countrycode:"HR",country:"Croatia",name:"Europe/Zagreb",offset:"UTC +01:00"},"America/Havana":{id:"America/Havana",countrycode:"CU",country:"Cuba",name:"America/Havana",offset:"UTC -05:00"},"America/Curacao":{id:"America/Curacao",countrycode:"CW",country:"Curaçao",name:"America/Curacao",offset:"UTC -04:00"},"Asia/Famagusta":{id:"Asia/Famagusta",countrycode:"CY",country:"Cyprus",name:"Asia/Famagusta",offset:"UTC +02:00"},"Asia/Nicosia":{id:"Asia/Nicosia",countrycode:"CY",country:"Cyprus",name:"Asia/Nicosia",offset:"UTC +02:00"},"Europe/Prague":{id:"Europe/Prague",countrycode:"CZ",country:"Czech Republic",name:"Europe/Prague",offset:"UTC +01:00"},"Africa/Abidjan":{id:"Africa/Abidjan",countrycode:"CI",country:"Côte d'Ivoire",name:"Africa/Abidjan",offset:"UTC"},"Europe/Copenhagen":{id:"Europe/Copenhagen",countrycode:"DK",country:"Denmark",name:"Europe/Copenhagen",offset:"UTC +01:00"},"Africa/Djibouti":{id:"Africa/Djibouti",countrycode:"DJ",country:"Djibouti",name:"Africa/Djibouti",offset:"UTC +03:00"},"America/Dominica":{id:"America/Dominica",countrycode:"DM",country:"Dominica",name:"America/Dominica",offset:"UTC -04:00"},"America/Santo_Domingo":{id:"America/Santo_Domingo",countrycode:"DO",country:"Dominican Republic",name:"America/Santo_Domingo",offset:"UTC -04:00"},"America/Guayaquil":{id:"America/Guayaquil",countrycode:"EC",country:"Ecuador",name:"America/Guayaquil",offset:"UTC -05:00"},"Pacific/Galapagos":{id:"Pacific/Galapagos",countrycode:"EC",country:"Ecuador",name:"Pacific/Galapagos",offset:"UTC -06:00"},"Africa/Cairo":{id:"Africa/Cairo",countrycode:"EG",country:"Egypt",name:"Africa/Cairo",offset:"UTC +02:00"},"America/El_Salvador":{id:"America/El_Salvador",countrycode:"SV",country:"El Salvador",name:"America/El_Salvador",offset:"UTC -06:00"},"Africa/Malabo":{id:"Africa/Malabo",countrycode:"GQ",country:"Equatorial Guinea",name:"Africa/Malabo",offset:"UTC +01:00"},"Africa/Asmara":{id:"Africa/Asmara",countrycode:"ER",country:"Eritrea",name:"Africa/Asmara",offset:"UTC +03:00"},"Europe/Tallinn":{id:"Europe/Tallinn",countrycode:"EE",country:"Estonia",name:"Europe/Tallinn",offset:"UTC +02:00"},"Africa/Addis_Ababa":{id:"Africa/Addis_Ababa",countrycode:"ET",country:"Ethiopia",name:"Africa/Addis_Ababa",offset:"UTC +03:00"},"Atlantic/Stanley":{id:"Atlantic/Stanley",countrycode:"FK",country:"Falkland Islands (Malvinas)",name:"Atlantic/Stanley",offset:"UTC -03:00"},"Atlantic/Faroe":{id:"Atlantic/Faroe",countrycode:"FO",country:"Faroe Islands",name:"Atlantic/Faroe",offset:"UTC"},"Pacific/Fiji":{id:"Pacific/Fiji",countrycode:"FJ",country:"Fiji",name:"Pacific/Fiji",offset:"UTC +12:00"},"Europe/Helsinki":{id:"Europe/Helsinki",countrycode:"FI",country:"Finland",name:"Europe/Helsinki",offset:"UTC +02:00"},"Europe/Paris":{id:"Europe/Paris",countrycode:"FR",country:"France",name:"Europe/Paris",offset:"UTC +01:00"},"America/Cayenne":{id:"America/Cayenne",countrycode:"GF",country:"French Guiana",name:"America/Cayenne",offset:"UTC -03:00"},"Pacific/Gambier":{id:"Pacific/Gambier",countrycode:"PF",country:"French Polynesia",name:"Pacific/Gambier",offset:"UTC -09:00"},"Pacific/Marquesas":{id:"Pacific/Marquesas",countrycode:"PF",country:"French Polynesia",name:"Pacific/Marquesas",offset:"UTC -09:30"},"Pacific/Tahiti":{id:"Pacific/Tahiti",countrycode:"PF",country:"French Polynesia",name:"Pacific/Tahiti",offset:"UTC -10:00"},"Indian/Kerguelen":{id:"Indian/Kerguelen",countrycode:"TF",country:"French Southern Territories",name:"Indian/Kerguelen",offset:"UTC +05:00"},"Africa/Libreville":{id:"Africa/Libreville",countrycode:"GA",country:"Gabon",name:"Africa/Libreville",offset:"UTC +01:00"},"Africa/Banjul":{id:"Africa/Banjul",countrycode:"GM",country:"Gambia",name:"Africa/Banjul",offset:"UTC"},"Asia/Tbilisi":{id:"Asia/Tbilisi",countrycode:"GE",country:"Georgia",name:"Asia/Tbilisi",offset:"UTC +04:00"},"Europe/Berlin":{id:"Europe/Berlin",countrycode:"DE",country:"Germany",name:"Europe/Berlin",offset:"UTC +01:00"},"Europe/Busingen":{id:"Europe/Busingen",countrycode:"DE",country:"Germany",name:"Europe/Busingen",offset:"UTC +01:00"},"Africa/Accra":{id:"Africa/Accra",countrycode:"GH",country:"Ghana",name:"Africa/Accra",offset:"UTC"},"Europe/Gibraltar":{id:"Europe/Gibraltar",countrycode:"GI",country:"Gibraltar",name:"Europe/Gibraltar",offset:"UTC +01:00"},"Europe/Athens":{id:"Europe/Athens",countrycode:"GR",country:"Greece",name:"Europe/Athens",offset:"UTC +02:00"},"America/Danmarkshavn":{id:"America/Danmarkshavn",countrycode:"GL",country:"Greenland",name:"America/Danmarkshavn",offset:"UTC"},"America/Godthab":{id:"America/Godthab",countrycode:"GL",country:"Greenland",name:"America/Godthab",offset:"UTC -03:00"},"America/Scoresbysund":{id:"America/Scoresbysund",countrycode:"GL",country:"Greenland",name:"America/Scoresbysund",offset:"UTC -01:00"},"America/Thule":{id:"America/Thule",countrycode:"GL",country:"Greenland",name:"America/Thule",offset:"UTC -04:00"},"America/Grenada":{id:"America/Grenada",countrycode:"GD",country:"Grenada",name:"America/Grenada",offset:"UTC -04:00"},"America/Guadeloupe":{id:"America/Guadeloupe",countrycode:"GP",country:"Guadeloupe",name:"America/Guadeloupe",offset:"UTC -04:00"},"Pacific/Guam":{id:"Pacific/Guam",countrycode:"GU",country:"Guam",name:"Pacific/Guam",offset:"UTC +10:00"},"America/Guatemala":{id:"America/Guatemala",countrycode:"GT",country:"Guatemala",name:"America/Guatemala",offset:"UTC -06:00"},"Europe/Guernsey":{id:"Europe/Guernsey",countrycode:"GG",country:"Guernsey",name:"Europe/Guernsey",offset:"UTC"},"Africa/Conakry":{id:"Africa/Conakry",countrycode:"GN",country:"Guinea",name:"Africa/Conakry",offset:"UTC"},"Africa/Bissau":{id:"Africa/Bissau",countrycode:"GW",country:"Guinea-Bissau",name:"Africa/Bissau",offset:"UTC"},"America/Guyana":{id:"America/Guyana",countrycode:"GY",country:"Guyana",name:"America/Guyana",offset:"UTC -04:00"},"America/Port-au-Prince":{id:"America/Port-au-Prince",countrycode:"HT",country:"Haiti",name:"America/Port-au-Prince",offset:"UTC -05:00"},"Europe/Vatican":{id:"Europe/Vatican",countrycode:"VA",country:"Holy See (Vatican City State)",name:"Europe/Vatican",offset:"UTC +01:00"},"America/Tegucigalpa":{id:"America/Tegucigalpa",countrycode:"HN",country:"Honduras",name:"America/Tegucigalpa",offset:"UTC -06:00"},"Asia/Hong_Kong":{id:"Asia/Hong_Kong",countrycode:"HK",country:"Hong Kong",name:"Asia/Hong_Kong",offset:"UTC +08:00"},"Europe/Budapest":{id:"Europe/Budapest",countrycode:"HU",country:"Hungary",name:"Europe/Budapest",offset:"UTC +01:00"},"Atlantic/Reykjavik":{id:"Atlantic/Reykjavik",countrycode:"IS",country:"Iceland",name:"Atlantic/Reykjavik",offset:"UTC"},"Asia/Kolkata":{id:"Asia/Kolkata",countrycode:"IN",country:"India",name:"Asia/Kolkata",offset:"UTC +05:30"},"Asia/Jakarta":{id:"Asia/Jakarta",countrycode:"ID",country:"Indonesia",name:"Asia/Jakarta",offset:"UTC +07:00"},"Asia/Jayapura":{id:"Asia/Jayapura",countrycode:"ID",country:"Indonesia",name:"Asia/Jayapura",offset:"UTC +09:00"},"Asia/Makassar":{id:"Asia/Makassar",countrycode:"ID",country:"Indonesia",name:"Asia/Makassar",offset:"UTC +08:00"},"Asia/Pontianak":{id:"Asia/Pontianak",countrycode:"ID",country:"Indonesia",name:"Asia/Pontianak",offset:"UTC +07:00"},"Asia/Tehran":{id:"Asia/Tehran",countrycode:"IR",country:"Iran, Islamic Republic of",name:"Asia/Tehran",offset:"UTC +03:30"},"Asia/Baghdad":{id:"Asia/Baghdad",countrycode:"IQ",country:"Iraq",name:"Asia/Baghdad",offset:"UTC +03:00"},"Europe/Dublin":{id:"Europe/Dublin",countrycode:"IE",country:"Ireland",name:"Europe/Dublin",offset:"UTC"},"Europe/Isle_of_Man":{id:"Europe/Isle_of_Man",countrycode:"IM",country:"Isle of Man",name:"Europe/Isle_of_Man",offset:"UTC"},"Asia/Jerusalem":{id:"Asia/Jerusalem",countrycode:"IL",country:"Israel",name:"Asia/Jerusalem",offset:"UTC +02:00"},"Europe/Rome":{id:"Europe/Rome",countrycode:"IT",country:"Italy",name:"Europe/Rome",offset:"UTC +01:00"},"America/Jamaica":{id:"America/Jamaica",countrycode:"JM",country:"Jamaica",name:"America/Jamaica",offset:"UTC -05:00"},"Asia/Tokyo":{id:"Asia/Tokyo",countrycode:"JP",country:"Japan",name:"Asia/Tokyo",offset:"UTC +09:00"},"Europe/Jersey":{id:"Europe/Jersey",countrycode:"JE",country:"Jersey",name:"Europe/Jersey",offset:"UTC"},"Asia/Amman":{id:"Asia/Amman",countrycode:"JO",country:"Jordan",name:"Asia/Amman",offset:"UTC +02:00"},"Asia/Almaty":{id:"Asia/Almaty",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Almaty",offset:"UTC +06:00"},"Asia/Aqtau":{id:"Asia/Aqtau",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Aqtau",offset:"UTC +05:00"},"Asia/Aqtobe":{id:"Asia/Aqtobe",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Aqtobe",offset:"UTC +05:00"},"Asia/Atyrau":{id:"Asia/Atyrau",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Atyrau",offset:"UTC +05:00"},"Asia/Oral":{id:"Asia/Oral",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Oral",offset:"UTC +05:00"},"Asia/Qostanay":{id:"Asia/Qostanay",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Qostanay",offset:"UTC +06:00"},"Asia/Qyzylorda":{id:"Asia/Qyzylorda",countrycode:"KZ",country:"Kazakhstan",name:"Asia/Qyzylorda",offset:"UTC +05:00"},"Africa/Nairobi":{id:"Africa/Nairobi",countrycode:"KE",country:"Kenya",name:"Africa/Nairobi",offset:"UTC +03:00"},"Pacific/Enderbury":{id:"Pacific/Enderbury",countrycode:"KI",country:"Kiribati",name:"Pacific/Enderbury",offset:"UTC +13:00"},"Pacific/Kiritimati":{id:"Pacific/Kiritimati",countrycode:"KI",country:"Kiribati",name:"Pacific/Kiritimati",offset:"UTC +14:00"},"Pacific/Tarawa":{id:"Pacific/Tarawa",countrycode:"KI",country:"Kiribati",name:"Pacific/Tarawa",offset:"UTC +12:00"},"Asia/Pyongyang":{id:"Asia/Pyongyang",countrycode:"KP",country:"Korea, Democratic People's Republic of",name:"Asia/Pyongyang",offset:"UTC +09:00"},"Asia/Seoul":{id:"Asia/Seoul",countrycode:"KR",country:"Korea, Republic of",name:"Asia/Seoul",offset:"UTC +09:00"},"Asia/Kuwait":{id:"Asia/Kuwait",countrycode:"KW",country:"Kuwait",name:"Asia/Kuwait",offset:"UTC +03:00"},"Asia/Bishkek":{id:"Asia/Bishkek",countrycode:"KG",country:"Kyrgyzstan",name:"Asia/Bishkek",offset:"UTC +06:00"},"Asia/Vientiane":{id:"Asia/Vientiane",countrycode:"LA",country:"Lao People's Democratic Republic",name:"Asia/Vientiane",offset:"UTC +07:00"},"Europe/Riga":{id:"Europe/Riga",countrycode:"LV",country:"Latvia",name:"Europe/Riga",offset:"UTC +02:00"},"Asia/Beirut":{id:"Asia/Beirut",countrycode:"LB",country:"Lebanon",name:"Asia/Beirut",offset:"UTC +02:00"},"Africa/Maseru":{id:"Africa/Maseru",countrycode:"LS",country:"Lesotho",name:"Africa/Maseru",offset:"UTC +02:00"},"Africa/Monrovia":{id:"Africa/Monrovia",countrycode:"LR",country:"Liberia",name:"Africa/Monrovia",offset:"UTC"},"Africa/Tripoli":{id:"Africa/Tripoli",countrycode:"LY",country:"Libya",name:"Africa/Tripoli",offset:"UTC +02:00"},"Europe/Vaduz":{id:"Europe/Vaduz",countrycode:"LI",country:"Liechtenstein",name:"Europe/Vaduz",offset:"UTC +01:00"},"Europe/Vilnius":{id:"Europe/Vilnius",countrycode:"LT",country:"Lithuania",name:"Europe/Vilnius",offset:"UTC +02:00"},"Europe/Luxembourg":{id:"Europe/Luxembourg",countrycode:"LU",country:"Luxembourg",name:"Europe/Luxembourg",offset:"UTC +01:00"},"Asia/Macau":{id:"Asia/Macau",countrycode:"MO",country:"Macao",name:"Asia/Macau",offset:"UTC +08:00"},"Europe/Skopje":{id:"Europe/Skopje",countrycode:"MK",country:"Macedonia, the Former Yugoslav Republic of",name:"Europe/Skopje",offset:"UTC +01:00"},"Indian/Antananarivo":{id:"Indian/Antananarivo",countrycode:"MG",country:"Madagascar",name:"Indian/Antananarivo",offset:"UTC +03:00"},"Africa/Blantyre":{id:"Africa/Blantyre",countrycode:"MW",country:"Malawi",name:"Africa/Blantyre",offset:"UTC +02:00"},"Asia/Kuala_Lumpur":{id:"Asia/Kuala_Lumpur",countrycode:"MY",country:"Malaysia",name:"Asia/Kuala_Lumpur",offset:"UTC +08:00"},"Asia/Kuching":{id:"Asia/Kuching",countrycode:"MY",country:"Malaysia",name:"Asia/Kuching",offset:"UTC +08:00"},"Indian/Maldives":{id:"Indian/Maldives",countrycode:"MV",country:"Maldives",name:"Indian/Maldives",offset:"UTC +05:00"},"Africa/Bamako":{id:"Africa/Bamako",countrycode:"ML",country:"Mali",name:"Africa/Bamako",offset:"UTC"},"Europe/Malta":{id:"Europe/Malta",countrycode:"MT",country:"Malta",name:"Europe/Malta",offset:"UTC +01:00"},"Pacific/Kwajalein":{id:"Pacific/Kwajalein",countrycode:"MH",country:"Marshall Islands",name:"Pacific/Kwajalein",offset:"UTC +12:00"},"Pacific/Majuro":{id:"Pacific/Majuro",countrycode:"MH",country:"Marshall Islands",name:"Pacific/Majuro",offset:"UTC +12:00"},"America/Martinique":{id:"America/Martinique",countrycode:"MQ",country:"Martinique",name:"America/Martinique",offset:"UTC -04:00"},"Africa/Nouakchott":{id:"Africa/Nouakchott",countrycode:"MR",country:"Mauritania",name:"Africa/Nouakchott",offset:"UTC"},"Indian/Mauritius":{id:"Indian/Mauritius",countrycode:"MU",country:"Mauritius",name:"Indian/Mauritius",offset:"UTC +04:00"},"Indian/Mayotte":{id:"Indian/Mayotte",countrycode:"YT",country:"Mayotte",name:"Indian/Mayotte",offset:"UTC +03:00"},"America/Bahia_Banderas":{id:"America/Bahia_Banderas",countrycode:"MX",country:"Mexico",name:"America/Bahia_Banderas",offset:"UTC -06:00"},"America/Cancun":{id:"America/Cancun",countrycode:"MX",country:"Mexico",name:"America/Cancun",offset:"UTC -05:00"},"America/Chihuahua":{id:"America/Chihuahua",countrycode:"MX",country:"Mexico",name:"America/Chihuahua",offset:"UTC -07:00"},"America/Hermosillo":{id:"America/Hermosillo",countrycode:"MX",country:"Mexico",name:"America/Hermosillo",offset:"UTC -07:00"},"America/Matamoros":{id:"America/Matamoros",countrycode:"MX",country:"Mexico",name:"America/Matamoros",offset:"UTC -06:00"},"America/Mazatlan":{id:"America/Mazatlan",countrycode:"MX",country:"Mexico",name:"America/Mazatlan",offset:"UTC -07:00"},"America/Merida":{id:"America/Merida",countrycode:"MX",country:"Mexico",name:"America/Merida",offset:"UTC -06:00"},"America/Mexico_City":{id:"America/Mexico_City",countrycode:"MX",country:"Mexico",name:"America/Mexico_City",offset:"UTC -06:00"},"America/Monterrey":{id:"America/Monterrey",countrycode:"MX",country:"Mexico",name:"America/Monterrey",offset:"UTC -06:00"},"America/Ojinaga":{id:"America/Ojinaga",countrycode:"MX",country:"Mexico",name:"America/Ojinaga",offset:"UTC -07:00"},"America/Tijuana":{id:"America/Tijuana",countrycode:"MX",country:"Mexico",name:"America/Tijuana",offset:"UTC -08:00"},"Pacific/Chuuk":{id:"Pacific/Chuuk",countrycode:"FM",country:"Micronesia, Federated States of",name:"Pacific/Chuuk",offset:"UTC +10:00"},"Pacific/Kosrae":{id:"Pacific/Kosrae",countrycode:"FM",country:"Micronesia, Federated States of",name:"Pacific/Kosrae",offset:"UTC +11:00"},"Pacific/Pohnpei":{id:"Pacific/Pohnpei",countrycode:"FM",country:"Micronesia, Federated States of",name:"Pacific/Pohnpei",offset:"UTC +11:00"},"Europe/Chisinau":{id:"Europe/Chisinau",countrycode:"MD",country:"Moldova, Republic of",name:"Europe/Chisinau",offset:"UTC +02:00"},"Europe/Monaco":{id:"Europe/Monaco",countrycode:"MC",country:"Monaco",name:"Europe/Monaco",offset:"UTC +01:00"},"Asia/Choibalsan":{id:"Asia/Choibalsan",countrycode:"MN",country:"Mongolia",name:"Asia/Choibalsan",offset:"UTC +08:00"},"Asia/Hovd":{id:"Asia/Hovd",countrycode:"MN",country:"Mongolia",name:"Asia/Hovd",offset:"UTC +07:00"},"Asia/Ulaanbaatar":{id:"Asia/Ulaanbaatar",countrycode:"MN",country:"Mongolia",name:"Asia/Ulaanbaatar",offset:"UTC +08:00"},"Europe/Podgorica":{id:"Europe/Podgorica",countrycode:"ME",country:"Montenegro",name:"Europe/Podgorica",offset:"UTC +01:00"},"America/Montserrat":{id:"America/Montserrat",countrycode:"MS",country:"Montserrat",name:"America/Montserrat",offset:"UTC -04:00"},"Africa/Casablanca":{id:"Africa/Casablanca",countrycode:"MA",country:"Morocco",name:"Africa/Casablanca",offset:"UTC +01:00"},"Africa/Maputo":{id:"Africa/Maputo",countrycode:"MZ",country:"Mozambique",name:"Africa/Maputo",offset:"UTC +02:00"},"Asia/Yangon":{id:"Asia/Yangon",countrycode:"MM",country:"Myanmar",name:"Asia/Yangon",offset:"UTC +06:30"},"Africa/Windhoek":{id:"Africa/Windhoek",countrycode:"NA",country:"Namibia",name:"Africa/Windhoek",offset:"UTC +02:00"},"Pacific/Nauru":{id:"Pacific/Nauru",countrycode:"NR",country:"Nauru",name:"Pacific/Nauru",offset:"UTC +12:00"},"Asia/Kathmandu":{id:"Asia/Kathmandu",countrycode:"NP",country:"Nepal",name:"Asia/Kathmandu",offset:"UTC +05:45"},"Europe/Amsterdam":{id:"Europe/Amsterdam",countrycode:"NL",country:"Netherlands",name:"Europe/Amsterdam",offset:"UTC +01:00"},"Pacific/Noumea":{id:"Pacific/Noumea",countrycode:"NC",country:"New Caledonia",name:"Pacific/Noumea",offset:"UTC +11:00"},"Pacific/Auckland":{id:"Pacific/Auckland",countrycode:"NZ",country:"New Zealand",name:"Pacific/Auckland",offset:"UTC +13:00"},"Pacific/Chatham":{id:"Pacific/Chatham",countrycode:"NZ",country:"New Zealand",name:"Pacific/Chatham",offset:"UTC +13:45"},"America/Managua":{id:"America/Managua",countrycode:"NI",country:"Nicaragua",name:"America/Managua",offset:"UTC -06:00"},"Africa/Niamey":{id:"Africa/Niamey",countrycode:"NE",country:"Niger",name:"Africa/Niamey",offset:"UTC +01:00"},"Africa/Lagos":{id:"Africa/Lagos",countrycode:"NG",country:"Nigeria",name:"Africa/Lagos",offset:"UTC +01:00"},"Pacific/Niue":{id:"Pacific/Niue",countrycode:"NU",country:"Niue",name:"Pacific/Niue",offset:"UTC -11:00"},"Pacific/Norfolk":{id:"Pacific/Norfolk",countrycode:"NF",country:"Norfolk Island",name:"Pacific/Norfolk",offset:"UTC +12:00"},"Pacific/Saipan":{id:"Pacific/Saipan",countrycode:"MP",country:"Northern Mariana Islands",name:"Pacific/Saipan",offset:"UTC +10:00"},"Europe/Oslo":{id:"Europe/Oslo",countrycode:"NO",country:"Norway",name:"Europe/Oslo",offset:"UTC +01:00"},"Asia/Muscat":{id:"Asia/Muscat",countrycode:"OM",country:"Oman",name:"Asia/Muscat",offset:"UTC +04:00"},"Asia/Karachi":{id:"Asia/Karachi",countrycode:"PK",country:"Pakistan",name:"Asia/Karachi",offset:"UTC +05:00"},"Pacific/Palau":{id:"Pacific/Palau",countrycode:"PW",country:"Palau",name:"Pacific/Palau",offset:"UTC +09:00"},"Asia/Gaza":{id:"Asia/Gaza",countrycode:"PS",country:"Palestine, State of",name:"Asia/Gaza",offset:"UTC +02:00"},"Asia/Hebron":{id:"Asia/Hebron",countrycode:"PS",country:"Palestine, State of",name:"Asia/Hebron",offset:"UTC +02:00"},"America/Panama":{id:"America/Panama",countrycode:"PA",country:"Panama",name:"America/Panama",offset:"UTC -05:00"},"Pacific/Bougainville":{id:"Pacific/Bougainville",countrycode:"PG",country:"Papua New Guinea",name:"Pacific/Bougainville",offset:"UTC +11:00"},"Pacific/Port_Moresby":{id:"Pacific/Port_Moresby",countrycode:"PG",country:"Papua New Guinea",name:"Pacific/Port_Moresby",offset:"UTC +10:00"},"America/Asuncion":{id:"America/Asuncion",countrycode:"PY",country:"Paraguay",name:"America/Asuncion",offset:"UTC -03:00"},"America/Lima":{id:"America/Lima",countrycode:"PE",country:"Peru",name:"America/Lima",offset:"UTC -05:00"},"Asia/Manila":{id:"Asia/Manila",countrycode:"PH",country:"Philippines",name:"Asia/Manila",offset:"UTC +08:00"},"Pacific/Pitcairn":{id:"Pacific/Pitcairn",countrycode:"PN",country:"Pitcairn",name:"Pacific/Pitcairn",offset:"UTC -08:00"},"Europe/Warsaw":{id:"Europe/Warsaw",countrycode:"PL",country:"Poland",name:"Europe/Warsaw",offset:"UTC +01:00"},"Atlantic/Azores":{id:"Atlantic/Azores",countrycode:"PT",country:"Portugal",name:"Atlantic/Azores",offset:"UTC -01:00"},"Atlantic/Madeira":{id:"Atlantic/Madeira",countrycode:"PT",country:"Portugal",name:"Atlantic/Madeira",offset:"UTC"},"Europe/Lisbon":{id:"Europe/Lisbon",countrycode:"PT",country:"Portugal",name:"Europe/Lisbon",offset:"UTC"},"America/Puerto_Rico":{id:"America/Puerto_Rico",countrycode:"PR",country:"Puerto Rico",name:"America/Puerto_Rico",offset:"UTC -04:00"},"Asia/Qatar":{id:"Asia/Qatar",countrycode:"QA",country:"Qatar",name:"Asia/Qatar",offset:"UTC +03:00"},"Europe/Bucharest":{id:"Europe/Bucharest",countrycode:"RO",country:"Romania",name:"Europe/Bucharest",offset:"UTC +02:00"},"Asia/Anadyr":{id:"Asia/Anadyr",countrycode:"RU",country:"Russian Federation",name:"Asia/Anadyr",offset:"UTC +12:00"},"Asia/Barnaul":{id:"Asia/Barnaul",countrycode:"RU",country:"Russian Federation",name:"Asia/Barnaul",offset:"UTC +07:00"},"Asia/Chita":{id:"Asia/Chita",countrycode:"RU",country:"Russian Federation",name:"Asia/Chita",offset:"UTC +09:00"},"Asia/Irkutsk":{id:"Asia/Irkutsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Irkutsk",offset:"UTC +08:00"},"Asia/Kamchatka":{id:"Asia/Kamchatka",countrycode:"RU",country:"Russian Federation",name:"Asia/Kamchatka",offset:"UTC +12:00"},"Asia/Khandyga":{id:"Asia/Khandyga",countrycode:"RU",country:"Russian Federation",name:"Asia/Khandyga",offset:"UTC +09:00"},"Asia/Krasnoyarsk":{id:"Asia/Krasnoyarsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Krasnoyarsk",offset:"UTC +07:00"},"Asia/Magadan":{id:"Asia/Magadan",countrycode:"RU",country:"Russian Federation",name:"Asia/Magadan",offset:"UTC +11:00"},"Asia/Novokuznetsk":{id:"Asia/Novokuznetsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Novokuznetsk",offset:"UTC +07:00"},"Asia/Novosibirsk":{id:"Asia/Novosibirsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Novosibirsk",offset:"UTC +07:00"},"Asia/Omsk":{id:"Asia/Omsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Omsk",offset:"UTC +06:00"},"Asia/Sakhalin":{id:"Asia/Sakhalin",countrycode:"RU",country:"Russian Federation",name:"Asia/Sakhalin",offset:"UTC +11:00"},"Asia/Srednekolymsk":{id:"Asia/Srednekolymsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Srednekolymsk",offset:"UTC +11:00"},"Asia/Tomsk":{id:"Asia/Tomsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Tomsk",offset:"UTC +07:00"},"Asia/Ust-Nera":{id:"Asia/Ust-Nera",countrycode:"RU",country:"Russian Federation",name:"Asia/Ust-Nera",offset:"UTC +10:00"},"Asia/Vladivostok":{id:"Asia/Vladivostok",countrycode:"RU",country:"Russian Federation",name:"Asia/Vladivostok",offset:"UTC +10:00"},"Asia/Yakutsk":{id:"Asia/Yakutsk",countrycode:"RU",country:"Russian Federation",name:"Asia/Yakutsk",offset:"UTC +09:00"},"Asia/Yekaterinburg":{id:"Asia/Yekaterinburg",countrycode:"RU",country:"Russian Federation",name:"Asia/Yekaterinburg",offset:"UTC +05:00"},"Europe/Astrakhan":{id:"Europe/Astrakhan",countrycode:"RU",country:"Russian Federation",name:"Europe/Astrakhan",offset:"UTC +04:00"},"Europe/Kaliningrad":{id:"Europe/Kaliningrad",countrycode:"RU",country:"Russian Federation",name:"Europe/Kaliningrad",offset:"UTC +02:00"},"Europe/Kirov":{id:"Europe/Kirov",countrycode:"RU",country:"Russian Federation",name:"Europe/Kirov",offset:"UTC +03:00"},"Europe/Moscow":{id:"Europe/Moscow",countrycode:"RU",country:"Russian Federation",name:"Europe/Moscow",offset:"UTC +03:00"},"Europe/Samara":{id:"Europe/Samara",countrycode:"RU",country:"Russian Federation",name:"Europe/Samara",offset:"UTC +04:00"},"Europe/Saratov":{id:"Europe/Saratov",countrycode:"RU",country:"Russian Federation",name:"Europe/Saratov",offset:"UTC +04:00"},"Europe/Ulyanovsk":{id:"Europe/Ulyanovsk",countrycode:"RU",country:"Russian Federation",name:"Europe/Ulyanovsk",offset:"UTC +04:00"},"Europe/Volgograd":{id:"Europe/Volgograd",countrycode:"RU",country:"Russian Federation",name:"Europe/Volgograd",offset:"UTC +04:00"},"Africa/Kigali":{id:"Africa/Kigali",countrycode:"RW",country:"Rwanda",name:"Africa/Kigali",offset:"UTC +02:00"},"Indian/Reunion":{id:"Indian/Reunion",countrycode:"RE",country:"Réunion",name:"Indian/Reunion",offset:"UTC +04:00"},"America/St_Barthelemy":{id:"America/St_Barthelemy",countrycode:"BL",country:"Saint Barthélemy",name:"America/St_Barthelemy",offset:"UTC -04:00"},"Atlantic/St_Helena":{id:"Atlantic/St_Helena",countrycode:"SH",country:"Saint Helena, Ascension and Tristan da Cunha",name:"Atlantic/St_Helena",offset:"UTC"},"America/St_Kitts":{id:"America/St_Kitts",countrycode:"KN",country:"Saint Kitts and Nevis",name:"America/St_Kitts",offset:"UTC -04:00"},"America/St_Lucia":{id:"America/St_Lucia",countrycode:"LC",country:"Saint Lucia",name:"America/St_Lucia",offset:"UTC -04:00"},"America/Marigot":{id:"America/Marigot",countrycode:"MF",country:"Saint Martin (French part)",name:"America/Marigot",offset:"UTC -04:00"},"America/Miquelon":{id:"America/Miquelon",countrycode:"PM",country:"Saint Pierre and Miquelon",name:"America/Miquelon",offset:"UTC -03:00"},"America/St_Vincent":{id:"America/St_Vincent",countrycode:"VC",country:"Saint Vincent and the Grenadines",name:"America/St_Vincent",offset:"UTC -04:00"},"Pacific/Apia":{id:"Pacific/Apia",countrycode:"WS",country:"Samoa",name:"Pacific/Apia",offset:"UTC +14:00"},"Europe/San_Marino":{id:"Europe/San_Marino",countrycode:"SM",country:"San Marino",name:"Europe/San_Marino",offset:"UTC +01:00"},"Africa/Sao_Tome":{id:"Africa/Sao_Tome",countrycode:"ST",country:"Sao Tome and Principe",name:"Africa/Sao_Tome",offset:"UTC"},"Asia/Riyadh":{id:"Asia/Riyadh",countrycode:"SA",country:"Saudi Arabia",name:"Asia/Riyadh",offset:"UTC +03:00"},"Africa/Dakar":{id:"Africa/Dakar",countrycode:"SN",country:"Senegal",name:"Africa/Dakar",offset:"UTC"},"Europe/Belgrade":{id:"Europe/Belgrade",countrycode:"RS",country:"Serbia",name:"Europe/Belgrade",offset:"UTC +01:00"},"Indian/Mahe":{id:"Indian/Mahe",countrycode:"SC",country:"Seychelles",name:"Indian/Mahe",offset:"UTC +04:00"},"Africa/Freetown":{id:"Africa/Freetown",countrycode:"SL",country:"Sierra Leone",name:"Africa/Freetown",offset:"UTC"},"Asia/Singapore":{id:"Asia/Singapore",countrycode:"SG",country:"Singapore",name:"Asia/Singapore",offset:"UTC +08:00"},"America/Lower_Princes":{id:"America/Lower_Princes",countrycode:"SX",country:"Sint Maarten (Dutch part)",name:"America/Lower_Princes",offset:"UTC -04:00"},"Europe/Bratislava":{id:"Europe/Bratislava",countrycode:"SK",country:"Slovakia",name:"Europe/Bratislava",offset:"UTC +01:00"},"Europe/Ljubljana":{id:"Europe/Ljubljana",countrycode:"SI",country:"Slovenia",name:"Europe/Ljubljana",offset:"UTC +01:00"},"Pacific/Guadalcanal":{id:"Pacific/Guadalcanal",countrycode:"SB",country:"Solomon Islands",name:"Pacific/Guadalcanal",offset:"UTC +11:00"},"Africa/Mogadishu":{id:"Africa/Mogadishu",countrycode:"SO",country:"Somalia",name:"Africa/Mogadishu",offset:"UTC +03:00"},"Africa/Johannesburg":{id:"Africa/Johannesburg",countrycode:"ZA",country:"South Africa",name:"Africa/Johannesburg",offset:"UTC +02:00"},"Atlantic/South_Georgia":{id:"Atlantic/South_Georgia",countrycode:"GS",country:"South Georgia and the South Sandwich Islands",name:"Atlantic/South_Georgia",offset:"UTC -02:00"},"Africa/Juba":{id:"Africa/Juba",countrycode:"SS",country:"South Sudan",name:"Africa/Juba",offset:"UTC +03:00"},"Africa/Ceuta":{id:"Africa/Ceuta",countrycode:"ES",country:"Spain",name:"Africa/Ceuta",offset:"UTC +01:00"},"Atlantic/Canary":{id:"Atlantic/Canary",countrycode:"ES",country:"Spain",name:"Atlantic/Canary",offset:"UTC"},"Europe/Madrid":{id:"Europe/Madrid",countrycode:"ES",country:"Spain",name:"Europe/Madrid",offset:"UTC +01:00"},"Asia/Colombo":{id:"Asia/Colombo",countrycode:"LK",country:"Sri Lanka",name:"Asia/Colombo",offset:"UTC +05:30"},"Africa/Khartoum":{id:"Africa/Khartoum",countrycode:"SD",country:"Sudan",name:"Africa/Khartoum",offset:"UTC +02:00"},"America/Paramaribo":{id:"America/Paramaribo",countrycode:"SR",country:"Suriname",name:"America/Paramaribo",offset:"UTC -03:00"},"Arctic/Longyearbyen":{id:"Arctic/Longyearbyen",countrycode:"SJ",country:"Svalbard and Jan Mayen",name:"Arctic/Longyearbyen",offset:"UTC +01:00"},"Africa/Mbabane":{id:"Africa/Mbabane",countrycode:"SZ",country:"Swaziland",name:"Africa/Mbabane",offset:"UTC +02:00"},"Europe/Stockholm":{id:"Europe/Stockholm",countrycode:"SE",country:"Sweden",name:"Europe/Stockholm",offset:"UTC +01:00"},"Europe/Zurich":{id:"Europe/Zurich",countrycode:"CH",country:"Switzerland",name:"Europe/Zurich",offset:"UTC +01:00"},"Asia/Damascus":{id:"Asia/Damascus",countrycode:"SY",country:"Syrian Arab Republic",name:"Asia/Damascus",offset:"UTC +02:00"},"Asia/Taipei":{id:"Asia/Taipei",countrycode:"TW",country:"Taiwan, Province of China",name:"Asia/Taipei",offset:"UTC +08:00"},"Asia/Dushanbe":{id:"Asia/Dushanbe",countrycode:"TJ",country:"Tajikistan",name:"Asia/Dushanbe",offset:"UTC +05:00"},"Africa/Dar_es_Salaam":{id:"Africa/Dar_es_Salaam",countrycode:"TZ",country:"Tanzania, United Republic of",name:"Africa/Dar_es_Salaam",offset:"UTC +03:00"},"Asia/Bangkok":{id:"Asia/Bangkok",countrycode:"TH",country:"Thailand",name:"Asia/Bangkok",offset:"UTC +07:00"},"Asia/Dili":{id:"Asia/Dili",countrycode:"TL",country:"Timor-Leste",name:"Asia/Dili",offset:"UTC +09:00"},"Africa/Lome":{id:"Africa/Lome",countrycode:"TG",country:"Togo",name:"Africa/Lome",offset:"UTC"},"Pacific/Fakaofo":{id:"Pacific/Fakaofo",countrycode:"TK",country:"Tokelau",name:"Pacific/Fakaofo",offset:"UTC +13:00"},"Pacific/Tongatapu":{id:"Pacific/Tongatapu",countrycode:"TO",country:"Tonga",name:"Pacific/Tongatapu",offset:"UTC +13:00"},"America/Port_of_Spain":{id:"America/Port_of_Spain",countrycode:"TT",country:"Trinidad and Tobago",name:"America/Port_of_Spain",offset:"UTC -04:00"},"Africa/Tunis":{id:"Africa/Tunis",countrycode:"TN",country:"Tunisia",name:"Africa/Tunis",offset:"UTC +01:00"},"Europe/Istanbul":{id:"Europe/Istanbul",countrycode:"TR",country:"Turkey",name:"Europe/Istanbul",offset:"UTC +03:00"},"Asia/Ashgabat":{id:"Asia/Ashgabat",countrycode:"TM",country:"Turkmenistan",name:"Asia/Ashgabat",offset:"UTC +05:00"},"America/Grand_Turk":{id:"America/Grand_Turk",countrycode:"TC",country:"Turks and Caicos Islands",name:"America/Grand_Turk",offset:"UTC -05:00"},"Pacific/Funafuti":{id:"Pacific/Funafuti",countrycode:"TV",country:"Tuvalu",name:"Pacific/Funafuti",offset:"UTC +12:00"},"Africa/Kampala":{id:"Africa/Kampala",countrycode:"UG",country:"Uganda",name:"Africa/Kampala",offset:"UTC +03:00"},"Europe/Kiev":{id:"Europe/Kiev",countrycode:"UA",country:"Ukraine",name:"Europe/Kiev",offset:"UTC +02:00"},"Europe/Simferopol":{id:"Europe/Simferopol",countrycode:"UA",country:"Ukraine",name:"Europe/Simferopol",offset:"UTC +03:00"},"Europe/Uzhgorod":{id:"Europe/Uzhgorod",countrycode:"UA",country:"Ukraine",name:"Europe/Uzhgorod",offset:"UTC +02:00"},"Europe/Zaporozhye":{id:"Europe/Zaporozhye",countrycode:"UA",country:"Ukraine",name:"Europe/Zaporozhye",offset:"UTC +02:00"},"Asia/Dubai":{id:"Asia/Dubai",countrycode:"AE",country:"United Arab Emirates",name:"Asia/Dubai",offset:"UTC +04:00"},"Europe/London":{id:"Europe/London",countrycode:"GB",country:"United Kingdom",name:"Europe/London",offset:"UTC"},"America/Adak":{id:"America/Adak",countrycode:"US",country:"United States",name:"America/Adak",offset:"UTC -10:00"},"America/Anchorage":{id:"America/Anchorage",countrycode:"US",country:"United States",name:"America/Anchorage",offset:"UTC -09:00"},"America/Boise":{id:"America/Boise",countrycode:"US",country:"United States",name:"America/Boise",offset:"UTC -07:00"},"America/Chicago":{id:"America/Chicago",countrycode:"US",country:"United States",name:"America/Chicago",offset:"UTC -06:00"},"America/Denver":{id:"America/Denver",countrycode:"US",country:"United States",name:"America/Denver",offset:"UTC -07:00"},"America/Detroit":{id:"America/Detroit",countrycode:"US",country:"United States",name:"America/Detroit",offset:"UTC -05:00"},"America/Indiana/Indianapolis":{id:"America/Indiana/Indianapolis",countrycode:"US",country:"United States",name:"America/Indiana/Indianapolis",offset:"UTC -05:00"},"America/Indiana/Knox":{id:"America/Indiana/Knox",countrycode:"US",country:"United States",name:"America/Indiana/Knox",offset:"UTC -06:00"},"America/Indiana/Marengo":{id:"America/Indiana/Marengo",countrycode:"US",country:"United States",name:"America/Indiana/Marengo",offset:"UTC -05:00"},"America/Indiana/Petersburg":{id:"America/Indiana/Petersburg",countrycode:"US",country:"United States",name:"America/Indiana/Petersburg",offset:"UTC -05:00"},"America/Indiana/Tell_City":{id:"America/Indiana/Tell_City",countrycode:"US",country:"United States",name:"America/Indiana/Tell_City",offset:"UTC -06:00"},"America/Indiana/Vevay":{id:"America/Indiana/Vevay",countrycode:"US",country:"United States",name:"America/Indiana/Vevay",offset:"UTC -05:00"},"America/Indiana/Vincennes":{id:"America/Indiana/Vincennes",countrycode:"US",country:"United States",name:"America/Indiana/Vincennes",offset:"UTC -05:00"},"America/Indiana/Winamac":{id:"America/Indiana/Winamac",countrycode:"US",country:"United States",name:"America/Indiana/Winamac",offset:"UTC -05:00"},"America/Juneau":{id:"America/Juneau",countrycode:"US",country:"United States",name:"America/Juneau",offset:"UTC -09:00"},"America/Kentucky/Louisville":{id:"America/Kentucky/Louisville",countrycode:"US",country:"United States",name:"America/Kentucky/Louisville",offset:"UTC -05:00"},"America/Kentucky/Monticello":{id:"America/Kentucky/Monticello",countrycode:"US",country:"United States",name:"America/Kentucky/Monticello",offset:"UTC -05:00"},"America/Los_Angeles":{id:"America/Los_Angeles",countrycode:"US",country:"United States",name:"America/Los_Angeles",offset:"UTC -08:00"},"America/Menominee":{id:"America/Menominee",countrycode:"US",country:"United States",name:"America/Menominee",offset:"UTC -06:00"},"America/Metlakatla":{id:"America/Metlakatla",countrycode:"US",country:"United States",name:"America/Metlakatla",offset:"UTC -09:00"},"America/New_York":{id:"America/New_York",countrycode:"US",country:"United States",name:"America/New_York",offset:"UTC -05:00"},"America/Nome":{id:"America/Nome",countrycode:"US",country:"United States",name:"America/Nome",offset:"UTC -09:00"},"America/North_Dakota/Beulah":{id:"America/North_Dakota/Beulah",countrycode:"US",country:"United States",name:"America/North_Dakota/Beulah",offset:"UTC -06:00"},"America/North_Dakota/Center":{id:"America/North_Dakota/Center",countrycode:"US",country:"United States",name:"America/North_Dakota/Center",offset:"UTC -06:00"},"America/North_Dakota/New_Salem":{id:"America/North_Dakota/New_Salem",countrycode:"US",country:"United States",name:"America/North_Dakota/New_Salem",offset:"UTC -06:00"},"America/Phoenix":{id:"America/Phoenix",countrycode:"US",country:"United States",name:"America/Phoenix",offset:"UTC -07:00"},"America/Sitka":{id:"America/Sitka",countrycode:"US",country:"United States",name:"America/Sitka",offset:"UTC -09:00"},"America/Yakutat":{id:"America/Yakutat",countrycode:"US",country:"United States",name:"America/Yakutat",offset:"UTC -09:00"},"Pacific/Honolulu":{id:"Pacific/Honolulu",countrycode:"US",country:"United States",name:"Pacific/Honolulu",offset:"UTC -10:00"},"Pacific/Midway":{id:"Pacific/Midway",countrycode:"UM",country:"United States Minor Outlying Islands",name:"Pacific/Midway",offset:"UTC -11:00"},"Pacific/Wake":{id:"Pacific/Wake",countrycode:"UM",country:"United States Minor Outlying Islands",name:"Pacific/Wake",offset:"UTC +12:00"},"America/Montevideo":{id:"America/Montevideo",countrycode:"UY",country:"Uruguay",name:"America/Montevideo",offset:"UTC -03:00"},"Asia/Samarkand":{id:"Asia/Samarkand",countrycode:"UZ",country:"Uzbekistan",name:"Asia/Samarkand",offset:"UTC +05:00"},"Asia/Tashkent":{id:"Asia/Tashkent",countrycode:"UZ",country:"Uzbekistan",name:"Asia/Tashkent",offset:"UTC +05:00"},"Pacific/Efate":{id:"Pacific/Efate",countrycode:"VU",country:"Vanuatu",name:"Pacific/Efate",offset:"UTC +11:00"},"America/Caracas":{id:"America/Caracas",countrycode:"VE",country:"Venezuela, Bolivarian Republic of",name:"America/Caracas",offset:"UTC -04:00"},"Asia/Ho_Chi_Minh":{id:"Asia/Ho_Chi_Minh",countrycode:"VN",country:"Viet Nam",name:"Asia/Ho_Chi_Minh",offset:"UTC +07:00"},"America/Tortola":{id:"America/Tortola",countrycode:"VG",country:"Virgin Islands, British",name:"America/Tortola",offset:"UTC -04:00"},"America/St_Thomas":{id:"America/St_Thomas",countrycode:"VI",country:"Virgin Islands, U.S.",name:"America/St_Thomas",offset:"UTC -04:00"},"Pacific/Wallis":{id:"Pacific/Wallis",countrycode:"WF",country:"Wallis and Futuna",name:"Pacific/Wallis",offset:"UTC +12:00"},"Africa/El_Aaiun":{id:"Africa/El_Aaiun",countrycode:"EH",country:"Western Sahara",name:"Africa/El_Aaiun",offset:"UTC +01:00"},"Asia/Aden":{id:"Asia/Aden",countrycode:"YE",country:"Yemen",name:"Asia/Aden",offset:"UTC +03:00"},"Africa/Lusaka":{id:"Africa/Lusaka",countrycode:"ZM",country:"Zambia",name:"Africa/Lusaka",offset:"UTC +02:00"},"Africa/Harare":{id:"Africa/Harare",countrycode:"ZW",country:"Zimbabwe",name:"Africa/Harare",offset:"UTC +02:00"},"Europe/Mariehamn":{id:"Europe/Mariehamn",countrycode:"AX",country:"Åland Islands",name:"Europe/Mariehamn",offset:"UTC +02:00"}}}constructor(){return super(),TimeZoneDefinition.instance||(this.config=Object.assign({},this.config,TimeZoneDefinition.CONFIG),this.cache=TimeZoneDefinition.MAP,this.initialized=!0,TimeZoneDefinition.instance=this),TimeZoneDefinition.instance}get options(){let t=[];for(let e of Object.values(this.cache))t.push({value:e[this.identifier],label:`${e.name} (${e.offset})`});return t.sort(((t,e)=>t.label>e.label?1:t.label<e.label?-1:0)),t}}window.TimeZoneDefinition=TimeZoneDefinition;class IconFactory{static get LIST(){return["arrow-down-circle","arrow-up","download","map","arrow-right","upload","arrow-left","arrow-down-circle-1","calendar","trashcan","tag","legend","echx","arrow-down","chevron-double-left","chevron-double-right","chevron-double-up","chevron-double-down","clock","chat","check-circle-disc","checkmark-circle","chevron-down","checkmark","chevron-left","chevron-right","chevron-up","double-triangle-vertical","heart","no","double-triangle-horizontal","arrow-left-circle","echx-circle","echx-1","spinner-circle","circle-disc-chopped","circle","disc-chopped","gear-complex","gear","globe","help-circle","lightbulb","lock-open","magnify","menu","question","star","user-circle","user","exclaim","shape-hex","shape-rounded-triangle","warn-circle","warn-hex","warn-triangle","eye-slash","microphone-slash","minimize","eye","disc-check","minus-circle","minus","popout","plus","plus-circle","pencil","pencil-circle","refresh","speaker-high","speaker-low","printer","speaker-medium","microphone","speaker-mute","lock-closed","image","folder","document","speaker-slash","triangle-down-small","triangle-down","triangle-left-small","triangle-left","triangle-right-small","triangle-up","triangle-up-small","triangle-right","arrow-right-circle","arrow-up-circle","triangle-down-circle","triangle-left-circle","triangle-right-circle","triangle-up-circle","flag-notched","flag-pointed","flag-rectangle","flag-notched-angle","flag-pointed-angle","flag-rectangle-angle","filter","table","duplicate","dots-horizontal","dots-vertical","envelope-flat","envelope-angle","bell","backgroundcolor","fontcolor","bold","italic","underline","strike","indent","outdent","justify","center","left","right","ol","ul","notched-triangle-left","notched-triangle-right","notched-triangle-up","notched-triangle-down","star-open","star-full","undo","short_window","tall_window","maximize","reply-right","reply-left","gripdots-left","gripdots-right","gripdots-center","flower","info"]}static icon(t,e="",i="cfb"){if(t instanceof Object)return t;let s=document.createElement("span");return s.classList.add("icon"),s.classList.add(`${i}-${t}`),e&&""!==e?s.setAttribute("aria-label",e):s.setAttribute("aria-hidden","true"),s}static xicon(t,e){if(t instanceof Object)return t;let i=document.createElement("span");if(i.classList.add("icon"),Array.isArray(t))for(let e of t)i.classList.add(e);else i.classList.add(t);return e?i.setAttribute("aria-label",e):i.setAttribute("aria-hidden","true"),i}}window.IconFactory=IconFactory;class TextFactory{static get DEFAULT_LOCALE(){return"en"}static get LOCALE(){return TextFactory._LOCALE}static set LOCALE(t){TextFactory._LOCALE=t}static get library(){TextFactory._library||(TextFactory._library=TextFactory._libraryBase);let t=TextFactory.determineLocale();return TextFactory._library[t]?TextFactory._library[t]:TextFactory._library[TextFactory.DEFAULT_LOCALE]}static get _libraryBase(){return{en:{login:"Login",password:"Password",close_pane:"Close panel",email:"Email","color-red":"Red","color-orange":"Orange","color-yellow":"Yellow","color-green":"Green","color-blue":"Blue","color-darkblue":"Dark Blue","color-purple":"Purple","color-tan":"Tan","color-white":"White","color-black":"Black","color-pink":"Pink","color-grey":"Grey","color-brown":"Brown","passwordinput-placeholder-enter_password":"Enter your password.",remember_me:"Remember me","loginform-error-passwords_dont_match":"Email and password do not match.","loginform-instructions-enter_username":"Enter your username and password.",create_account:"Create account",actions:"Actions",apply_filters:"Apply Filters",bulk_select:"Bulk select",cancel:"Cancel",caution:"Caution",change_password:"Change Password",close:"Close",columns:"Columns",configure_columns:"Configure Columns",configure_generator:"Configure generator",confirm_password:"Confirm Password",countrymenu_select:"Select country",current_password:"Current Password","datagrid-dialog-item-save":"Save $1","datagrid-dialog-item-view":"View $1","datagrid-dialog-item-create":"Create $1","datagrid-dialog-item-duplicate":"Duplicate $1","datagrid-dialog-item-edit":"Edit $1","datagrid-dialog-item-delete":"Delete $1","datagrid-dialog-item-edit-instructions":"Edit this $1 using the form below.","datagrid-dialog-item-create-instructions":"Fill out the form below to create a new $1.","datagrid-dialog-item-delete-instructions":"Are you sure you want to delete this $1?","datagrid-dialog-item-duplicate-instructions":"The $1 has been duplicated. Saving it will create a new instance with these values.","datagrid-tooltip-export":"Export all data in this grid as a comma separated value file.","datagrid-tooltip-export-current_view":"Export the data in the current view as a comma separated value file.","datagrid-tooltip-configure_columns":"Configure the visibility of individual columns.","datagrid-tooltip-bulk_select":"Show bulk selection controls.","datagrid-tooltip-filters":"Add, remove, or edit filters.","datagrid-activitynotifier-text":"Working...","datagrid-column-config-instructions":"Select which columns to show in the grid. This does not hide the columns during export.","datagrid-filter-instructions":"Columns that are filterable are shown below. Set the value of the column to filter it.","datagrid-message-no_visible_columns":"No columns are visible in this table.","datagrid-message-empty_grid":"There are no rows in this dataset.","datagrid-spinnertext":"Loading","datalist-noentries":"(No Entries)","dateinput-error-invalid":"This is an invalid date.","dateinput-trigger-arialabel":"Open date picker",decrement_number:"Decrement number","emailinput-placeholder-default":"person@myemailaccount.net","emailinput-error-invalid_web_address":"This is an invalid email address.",error:"Error",export:"Export","export-current_view":"Export current view","fileinput-placeholder-file":"Click to select file","fileinput-placeholder-multiple":"Click to select files (multiple accepted)","filter-configurator-add_filter":"Add filter","comparator-contains":"Contains","comparator-notcontains":"Does not contain","comparator-equals":"Equals","comparator-doesnotequal":"Does not equal","comparator-isbefore":"Is before","comparator-isafter":"Is after","comparator-greaterthan":"Is greater than","comparator-lessthan":"Is less than","comparator-startswith":"Starts with","comparator-endswith":"Ends with","comparator-select_field":"Select field","comparator-comparator":"Comparator",filters:"Filters",generate_password:"Generate password",help:"Help",hide_password:"Hide password",increment_number:"Increment number","input-counter-limit":"$1 of $2 characters entered","input-counter-sky":"$1 characters entered","input-counter-remaining":"$1 characters remaining","input-error-required":"This field is required",items_label:"Items:",lowercase:"Lowercase",manage_filters:"Manage Filters",matches_hidden_columns:"Your search matches data in hidden columns.",name:"Name",new_password:"New Password",no_columns:"No columns",no_provided_content:"No provided content",no_results:"No results",not_set:"(Not Set)","timeinput-label-default":"Time","timeinput-ante_meridian":"AM","timeinput-post_meridian":"PM","timeinput-24_hour":"24","numberinput-error-maximum_value":"The maximum value for this field is '$1'.","numberinput-error-minimum_value":"The minimum value for this field is '$1'.","numberinput-error-must_be_whole_numbers":"Values must be whole numbers.","numberinput-error-nan":"This is not a number.","numberinput-error-values_divisible":"Values must be divisible by $1","numberinput-placeholder-basic":"Enter a number","numberinput-placeholder-between_x_y":"Enter a number between $1 and $2","numberinput-placeholder-fragment_increments":" (increments of $1)","numberinput-placeholder-larger_than_x":"Enter a number larger than $1","numberinput-placeholder-smaller_than_y":"Enter a number smaller than $1",numbers:"Numbers",open_menu:"Open menu","passwordchanger-currentpw-help":"This is your current password.","passwordchanger-currentpw-placeholder":"Your current password","passwordchanger-error-cannot_be_used_as_pw":"This cannot be used as a password.","passwordchanger-error-passwords_must_match":"Passwords must match.","passwordchanger-form-instructions":"Change your password here.","passwordchanger-placeholder-minlength":"Must be at least $1 characters","passwordchanger-placeholder-suggested":"Should be at least $1 characters","passwordchanger-results-changed_successfully":"Your password has been changed successfully!","passwordchanger-error-maxlength":"Password must be less than $1 characters.","passwordchanger-error-minlength":"Password must be at least $1 characters.","passwordchanger-error-suggestedlength":"Password is less than the suggested length of $1 characters.","passwordinput-change_visibility":"Toggle value visibility.",primary:"Primary",punctuation:"Punctuation",required_lc:"required",save:"Save",save_changes:"Save changes",cancel_changes:"Cancel changes",make_changes:"Make changes",save_columns:"Save columns",search:"Search",search_noresults:"No entries were found matching your search terms.",search_this_data:"Search this data","searchcontrol-instructions":"Enter search terms","selectmenu-placeholder-default":"Select value",show_password:"Show password","simpleform-spinnertext":"Please wait",skip_to_content:"Skip to content",statemenu_select:"Select state or province",success:"Success",select_image:"Select Image",timezone_select:"Select timezone",toggle_menu:"Toggle menu",uppercase:"Uppercase","urlinput-placeholder-default":"https://somewhere.cornflower.blue/","urlinput-error-invalid_web_address":"This is an invalid web address.",warning:"Warning",country_code:"Country Code",country:"Country",time_zone:"Time zone",offset:"Offset",code:"Code",alternate_names:"Alternate names",interpolation_text:"Copy of $1",plural_test:"It's $1 {{plural:$1|meter|meters}} down."}}}static get(){if(!arguments)return null;if(arguments.length>1){let t=TextFactory.library[arguments[0]];if(t){for(let e of t.matchAll(/\{\{plural:(.*?)\|(.*?)\|(.*?)\}\}/g)){try{let i,s=e[1];s=s.replace("$",""),"number"!=typeof s&&(s=parseInt(s)),i=arguments[s],"number"!=typeof i&&(i=parseInt(i)),t=1===i?t.replace(e[0],e[2]):t.replace(e[0],e[3])}catch(t){console.error(t)}}for(let e=1;e<arguments.length;e++)t=t.replace(`$${e}`,arguments[e]);return t}}return TextFactory.library[arguments[0]]?TextFactory.library[arguments[0]]:arguments[0]}static determineLocale(){return"undefined"!=typeof LOCALE&&null!==LOCALE?LOCALE:void 0!==TextFactory.LOCALE&&null!==TextFactory.LOCALE?TextFactory.LOCALE:document&&document.documentElement&&document.documentElement.lang?document.documentElement.lang:TextFactory.DEFAULT_LOCALE}static load(t,e){if(!t)return void console.error("TextFactory.load() called without any URLs");let i,s=TextFactory.determineLocale();if("object"==typeof t?t[s]&&(i=t[s]):i=t,!i)return console.error("TextFactory.load() called with missing URL"),void(e&&"function"==typeof e&&e());fetch(i,{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((t=>t.json())).then((t=>{let i=TextFactory.library[s];i||(i={}),i=Object.assign({},i,t),TextFactory._library[s]=i,e&&"function"==typeof e&&e()})).catch((t=>{console.error(`Error while fetching data from ${i}`),console.error(t)}))}static setDictionary(t,e){let i=TextFactory.library[e];i||(i={}),i=Object.assign({},i,t),TextFactory._library[e]=i}}window.TextFactory=TextFactory;class SimpleButton{static get DEFAULT_CONFIG(){return{id:null,aslink:!1,href:null,payload:null,dataattributes:null,attributes:null,submits:!1,arialabel:null,cansubmit:!0,text:null,shape:null,size:"medium",form:null,hidden:!1,tooltip:null,iconprefix:"cfb",icon:null,iconclasses:[],iconprefixsecond:"cfb",tipicon:null,tipgravity:"n",classes:[],image:null,iconside:"left",secondicon:null,notab:!1,disabled:!1,badgevalue:null,mute:!1,ghost:!1,link:!1,naked:!1,action:null,onkeyup:null,onkeydown:null,focusin:null,focusout:null,hoverin:null,hoverout:null,doubleclick:null}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The button object will have this as it's id."},aslink:{type:"option",datatype:"boolean",description:"Output an <a> object instead of a <button>."},href:{type:"option",datatype:"url",description:"Use this as the link's href if aslink is true."},dataattributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with data-$key = value on elements."},payload:{type:"option",datatype:"DOM Object",description:"A complete DOM element, to be used as the button's entire content. If present, this bypasses all other visual options."},attributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with $key = value on elements"},arialabel:{type:"option",datatype:"string",description:"The aria-label attribute"},hidden:{type:"option",datatype:"boolean",description:"If true, start hidden or not."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},form:{type:"option",datatype:"simpleform",description:"A SimpleForm object this element this is in"},image:{type:"option",datatype:"url",description:"If provided, use this image for the button."},submits:{type:"option",datatype:"boolean",description:"If true, forces the button type to be type='submit'"},cansubmit:{type:"option",datatype:"boolean",description:"If true, advertises to Form objects that it can be used to submit them, if submits is true."},text:{type:"option",datatype:"string",description:"The text for the button. This is also used as aria-label, if <code>arialabel</code> is unset"},shape:{type:"option",datatype:"string",description:"Make the button a special shape, with these values: null|square|circle|pill.  Default is null, which makes a rectangle."},size:{type:"option",datatype:"string",description:"The size of the button: micro, small, medium (default), large, fill"},tooltip:{type:"option",datatype:"string",description:"An optional tooltip."},tipicon:{type:"option",datatype:"string",description:"An icon for the tooltip."},tipgravity:{type:"option",datatype:"string",description:"Tooltip gravity, default 'n'."},onkeyup:{type:"option",datatype:"function",description:"The action to execute on key up. Passed (event, self) as arguments."},onkeydown:{type:"option",datatype:"function",description:"The action to execute on key down. Passed (event, self) as arguments."},icon:{type:"option",datatype:"string",description:"If present, will be attached to the text inside the button. This can be passed a DOM object."},iconprefix:{type:"option",datatype:"string",description:"Changes the icon class prefix."},iconclasses:{type:"option",datatype:"stringarray",description:"An array of css class names to apply to ALL icons in the header."},iconside:{type:"option",datatype:"string",description:"The side the icon displays on - left or right."},secondicon:{type:"option",datatype:"string",description:"if present, this icon will be placed on the opposite side of the defined 'iconside'.  If this is the only icon defined, it will still be placed.  This is ignored in shaped buttons."},notab:{type:"boolean",datatype:"string",description:"If true, don't be tabindexed."},disabled:{type:"boolean",datatype:"string",description:"If true, make the button disabled."},badgevalue:{type:"option",datatype:"number",description:"If this exists, it adds a badge to the button."},mute:{type:"boolean",datatype:"string",description:"If true, make the button mute."},ghost:{type:"boolean",datatype:"string",description:"If true, make the button ghost."},link:{type:"option",datatype:"boolean",description:"If true, make the button behave like a normal link."},naked:{type:"option",datatype:"boolean",description:"If true, remove all styles from the button."},action:{type:"option",datatype:"function",description:"The click handler. Passed (event, self) as arguments. NOT used if 'submits' is true."},focusin:{type:"option",datatype:"function",description:"The focus in handler. Passed (event, self) as arguments."},focusout:{type:"option",datatype:"function",description:"The focus out handler. Passed (event, self) as arguments."},hoverin:{type:"option",datatype:"function",description:"The on hover handler. Passed (event, self) as arguments."},hoverout:{type:"option",datatype:"function",description:"The off hover handler. Passed (event, self) as arguments."}}}constructor(t){this.config=Object.assign({},SimpleButton.DEFAULT_CONFIG,t),this.id||(this.id=`button-${CFBUtils.getUniqueKey(5)}`)}get cansubmit(){return this.config.cansubmit}disable(){return this.button.setAttribute("aria-disabled","true"),this.disabled=!0,this}enable(){return this.button.removeAttribute("aria-disabled"),this.disabled=!1,this}show(){return this.button.removeAttribute("aria-hidden"),this.hidden=!1,this}hide(){return this.button.setAttribute("aria-hidden",!0),this.hidden=!0,this}openTooltip(){this.tooltipobj&&this.tooltipobj.open()}closeTooltip(){this.tooltipobj&&this.tooltipobj.close()}setIcon(t,e="cfb",i=!1){let s=IconFactory.icon(t,"",e);if(this.iconclasses&&this.iconclasses.length>0)for(let t of this.iconclasses)s&&s.classList.add(t);i?(s.classList.add("secondicon"),this.secondicon?(this.button.replaceChild(s,this.secondiconactual),this.secondiconactual=s):(this.secondiconactual=s,this.button.appendChild(this.secondiconactual)),this.secondicon=t,this.iconprefixsecond=e):(this.icon?(this.button.replaceChild(s,this.iconactual),this.iconactual=s):(this.iconactual=s,this.button.prepend(this.iconactual)),this.icon=t,this.iconprefix=e)}buildButton(){if(this.text&&(this.textobj=document.createElement("span"),this.textobj.classList.add("text"),this.textobj.innerHTML=this.text),this.aslink?(this.button=document.createElement("a"),this.button.classList.add("button"),this.href&&this.button.setAttribute("href",this.href)):this.button=document.createElement("button"),this.payload)this.payload.classList.add("payload"),this.button.appendChild(this.payload);else{if(this.icon&&(this.iconactual=IconFactory.icon(this.icon,"",this.iconprefix)),this.secondicon&&(this.secondiconactual=IconFactory.icon(this.secondicon,"",this.iconprefixsecond),this.secondiconactual.classList.add("secondicon")),this.iconclasses&&this.iconclasses.length>0)for(let t of this.iconclasses)this.iconactual&&this.iconactual.classList.add(t),this.secondiconactual&&this.secondiconactual.classList.add(t);this.iconside&&"right"===this.iconside&&this.button.classList.add("righticon"),this.iconactual&&this.button.appendChild(this.iconactual),this.textobj&&this.button.appendChild(this.textobj),this.secondiconactual&&this.button.appendChild(this.secondiconactual)}this.arialabel?this.button.setAttribute("aria-label",this.arialabel):this.text&&this.button.setAttribute("aria-label",this.text),this.button.setAttribute("id",this.id),this.button.setAttribute("role","button"),this.button.setAttribute("type",this.submits?"submit":"button"),this.button.classList.add(this.size);for(let t of this.classes)this.button.classList.add(t);CFBUtils.applyAttributes(this.attributes,this.button),CFBUtils.applyDataAttributes(this.dataattributes,this.button),this.focusin&&this.button.addEventListener("focusin",(t=>{this.focusin&&"function"==typeof this.focusin&&this.focusin(t,this)})),this.focusout&&this.button.addEventListener("focusout",(t=>{this.focusout&&"function"==typeof this.focusout&&this.focusout(t,this)})),this.hoverin&&this.button.addEventListener("mouseover",(t=>{this.hoverin&&"function"==typeof this.hoverin&&this.hoverin(t,this)})),this.hoverout&&this.button.addEventListener("mouseout",(t=>{this.hoverout&&"function"==typeof this.hoverout&&this.hoverout(t,this)})),this.onkeyup&&this.button.addEventListener("keyup",(t=>{this.onkeyup&&"function"==typeof this.onkeyup&&this.onkeyup(t,this)})),this.onkeydown&&this.button.addEventListener("keydown",(t=>{this.onkeydown&&"function"==typeof this.onkeydown&&this.onkeydown(t,this)})),this.tooltip&&(this.tooltipobj=new ToolTip({id:`${this.id}-tt`,text:this.tooltip,icon:this.tipicon,gravity:this.tipgravity}),this.tooltipobj.attach(this.button)),this.notab?this.button.setAttribute("tabindex","-1"):this.button.setAttribute("tabindex","0"),this.disabled&&this.disable(),this.hidden&&this.hide(),this.mute?this.button.classList.add("mute"):this.ghost?this.button.classList.add("ghost"):this.link?this.button.classList.add("link"):this.naked&&this.button.classList.add("naked"),this.shape&&this.button.classList.add(this.shape),this.image&&(this.button.classList.add("naked"),this.button.classList.add("image"),this.shape||this.button.classList.add("square"),this.button.style.backgroundImage=`url(${this.image})`),!this.submits&&this.action&&"function"==typeof this.action&&this.button.addEventListener("click",(t=>{null==this.button.getAttribute("data-dblclick")?(this.button.setAttribute("data-dblclick","true"),setTimeout((()=>{"true"===this.button.getAttribute("data-dblclick")&&(this.disabled||this.action(t,this)),this.button.removeAttribute("data-dblclick")}),300)):(this.button.removeAttribute("data-dblclick"),this.doubleclick&&"function"==typeof this.doubleclick&&this.doubleclick(t,this))})),this.badgevalue&&(this.badge=this.badgevalue)}set badge(t){null===t||0===t?(this.badgeobj&&this.button.removeChild(this.badgeobj),this.badgeobj=null,this.badgevalue=null):(this.badgevalue=t,this.badgeobj||(this.badgeobj=document.createElement("span"),this.badgeobj.classList.add("badge")),this.badgeobj.innerHTML=this.badgevalue,this.button.appendChild(this.badgeobj))}toString(){return CFBUtils.getConfig(this)}get action(){return this.config.action}set action(t){"function"!=typeof t&&console.error("Action provided to button is not a function!"),this.config.action=t}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get aslink(){return this.config.aslink}set aslink(t){this.config.aslink=t}get attributes(){return this.config.attributes}set attributes(t){this.config.attributes=t}get badgeobj(){return this._badgeobj}set badgeobj(t){this._badgeobj=t}get badgevalue(){return this.config.badgevalue}set badgevalue(t){this.config.badgevalue=t}get button(){return this._button||this.buildButton(),this._button}set button(t){this._button=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this.button}set container(t){this.button=t}get dataattributes(){return this.config.dataattributes}set dataattributes(t){this.config.dataattributes=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get doubleclick(){return this.config.doubleclick}set doubleclick(t){"function"!=typeof t&&console.error("Action provided to button is not a function!"),this.config.doubleclick=t}get focusin(){return this.config.focusin}set focusin(t){"function"!=typeof t&&console.error("Value provided to focusin is not a function!"),this.config.focusin=t}get focusout(){return this.config.focusout}set focusout(t){"function"!=typeof t&&console.error("Value provided to focusout is not a function!"),this.config.focusout=t}get form(){return this.config.form}set form(t){this.config.form=t}get ghost(){return this.config.ghost}set ghost(t){this.config.ghost=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get hoverin(){return this.config.hoverin}set hoverin(t){"function"!=typeof t&&console.error("Value provided to hoverin is not a function!"),this.config.hoverin=t}get hoverout(){return this.config.hoverout}set hoverout(t){"function"!=typeof t&&console.error("Value provided to hoverout is not a function!"),this.config.hoverout=t}get href(){return this.config.href}set href(t){this.config.href=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get iconactual(){return this._iconactual}set iconactual(t){this._iconactual=t}get iconclasses(){return this.config.iconclasses}set iconclasses(t){this.config.iconclasses=t}get iconprefix(){return this.config.iconprefix}set iconprefix(t){this.config.iconprefix=t}get iconprefixsecond(){return this.config.iconprefixsecond}set iconprefixsecond(t){this.config.iconprefixsecond=t}get iconside(){return this.config.iconside}set iconside(t){this.config.iconside=t}get id(){return this.config.id}set id(t){this.config.id=t}get image(){return this.config.image}set image(t){this.config.id=t}get link(){return this.config.link}set link(t){this.config.link=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get naked(){return this.config.naked}set naked(t){this.config.naked=t}get notab(){return this.config.notab}set notab(t){this.config.notab=t}get onkeydown(){return this.config.onkeydown}set onkeydown(t){"function"!=typeof t&&console.error("Action provided for onkeydown is not a function!"),this.config.onkeydown=t}get onkeyup(){return this.config.onkeyup}set onkeyup(t){"function"!=typeof t&&console.error("Action provided for onkeyup is not a function!"),this.config.onkeyup=t}get payload(){return this.config.payload}set payload(t){this.config.payload=t}get secondicon(){return this.config.secondicon}set secondicon(t){this.config.secondicon=t}get secondiconactual(){return this._secondiconactual}set secondiconactual(t){this._secondiconactual=t}get shape(){return this.config.shape}set shape(t){this.config.shape=t}get size(){return this.config.size}set size(t){this.config.size=t}get submits(){return this.config.submits}set submits(t){this.config.submits=t}get text(){return this.config.text}set text(t){this.textobj&&(this.textobj.innerHTML=t),this.config.text=t}get textobj(){return this._textobj}set textobj(t){this._textobj=t}get tipgravity(){return this.config.tipgravity}set tipgravity(t){this.config.tipgravity=t}get tipicon(){return this.config.tipicon}set tipicon(t){this.config.tipicon=t}get tooltip(){return this.config.tooltip}set tooltip(t){this.config.tooltip=t}get tooltipobj(){return this._tooltipobj}set tooltipobj(t){this._tooltipobj=t}}window.SimpleButton=SimpleButton;class ButtonMenu extends SimpleButton{static get DEFAULT_CONFIG(){return{action:(t,e)=>{t.preventDefault(),t.stopPropagation(),document.activeElement===e.button&&!e.isopen?e.open():e.close()},custompositioner:null,focusinside:!0,menuid:null,closeopen:!0,onopen:null,onclose:null,stayopen:!1,gravity:"s",tooltipgravity:"e",data:null,secondicon:"triangle-down",autoclose:!0,menu:null,items:[]}}static closeOpen(t){t?ButtonMenu.activeMenuTypes&&ButtonMenu.activeMenuTypes[t]&&ButtonMenu.activeMenuTypes[t].close():ButtonMenu.activeMenu&&ButtonMenu.activeMenu.close()}constructor(t){(t=Object.assign({},ButtonMenu.DEFAULT_CONFIG,t)).classes?t.classes.push("menu"):t.classes=["menu"],super(t),this.emsize=CFBUtils.getSingleEmInPixels(),this.menu?this.processMenu():this.buildMenu()}get isopen(){return!(!this.button.getAttribute("aria-expanded")||"true"!==this.button.getAttribute("aria-expanded"))}toggle(){this.isopen?this.close():this.open()}open(){if(this.isopen)return;this.closeopen&&ButtonMenu.closeOpen(this.menuid),this.menuid?(void 0===ButtonMenu.activeMenuTypes&&(ButtonMenu.activeMenuTypes={}),ButtonMenu.activeMenuTypes[this.menuid]=this):(ButtonMenu.activeMenu,ButtonMenu.activeMenu=this),this.button.setAttribute("aria-expanded","true"),this.menu.removeAttribute("aria-hidden"),this.menu.style.opacity=0,document.body.appendChild(this.menu);for(let t of this.menu.querySelectorAll("li"))t.setAttribute("tabindex","0");if(this.menu.classList.add(this.gravity),this.onopen&&"function"==typeof this.onopen&&this.onopen(this),this.focusinside){let t=this.menu.querySelectorAll('[tabindex]:not([tabindex="-1"])');window.setTimeout((()=>{t&&t.length>0&&t[0].focus()}),200)}this.autoclose&&window.setTimeout((()=>{this.setCloseListener()}),200);const t=this;window.addEventListener("scroll",(function e(){t.isopen||window.removeEventListener("scroll",e,!0),t.setPosition()}),!0),this.autoclose&&window.setTimeout((()=>{this.setPosition(),this.menu.style.opacity=1,this.menu.style.removeProperty("opacity"),this.menu.classList.add("open")}),50)}setPosition(){this.custompositioner&&"function"==typeof this.custompositioner?this.custompositioner(this):this.setPositionDefault()}setPositionDefault(){let t=document.body.getBoundingClientRect(),e=this.button.getBoundingClientRect(),i=e.left-t.left,s=e.top-t.top;t.right,e.right,e.bottom,t.bottom;switch(this.menu.style.removeProperty("top"),this.menu.style.removeProperty("bottom"),this.menu.style.removeProperty("left"),this.menu.style.removeProperty("right"),this.gravity){case"w":case"west":this.menu.style.top=`${s}px`,this.menu.style.left=i-this.menu.clientWidth-this.emsize/2+"px";break;case"e":case"east":this.menu.style.top=s-this.button.clientHeight/2+"px",this.menu.style.left=`${i+this.button.offsetWidth+this.emsize/2}px`;break;case"n":case"north":this.menu.style.top=s-this.menu.clientHeight-this.emsize/2+"px",this.menu.style.left=`${i-this.menu.offsetWidth+this.button.offsetWidth}px`;break;case"nw":case"northwest":this.menu.style.top=s-this.menu.clientHeight-this.emsize/2+"px",this.menu.style.left=i-this.button.clientWidth/2+"px";break;case"se":case"southeast":this.menu.style.top=`${s+this.button.clientHeight+this.emsize/2}px`,this.menu.style.left=i-this.button.clientWidth/2+"px";break;case"s":case"south":this.menu.style.top=`${s+this.button.clientHeight+this.emsize/2}px`,this.menu.style.left=`${i-this.menu.offsetWidth/2+this.button.offsetWidth}px`;break;case"southwest":default:this.menu.style.top=`${s+this.button.clientHeight+this.emsize/2}px`,this.menu.style.left=`${i-this.menu.offsetWidth+this.button.offsetWidth}px`}}close(){if(this.button.appendChild(this.menu),this.button.removeAttribute("aria-expanded"),this.menu.setAttribute("aria-hidden","true"),this.items&&this.items.length>0){let t=Array.from(this.menu.querySelector("li"));for(let e of t)e.setAttribute("tabindex","-1")}this.onclose&&"function"==typeof this.onclose&&this.onclose(this),this.menuid?(void 0===ButtonMenu.activeMenuTypes&&(ButtonMenu.activeMenuTypes={}),ButtonMenu.activeMenuTypes[this.menuid]=null):ButtonMenu.activeMenu=null}setCloseListener(){document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}),{once:!0}),window.addEventListener("click",(t=>{let e=this.menu.tagName.toLowerCase();this.menu.contains(t.target)&&this.stayopen?window.setTimeout((()=>{this.setCloseListener()}),20):(!this.menu.contains(t.target)||"form"!==e&&"div"!==e)&&(this.menu.contains(t.target)?this.close():this.button.contains(t.target)||this.close())}),{once:!0})}buildMenu(){this.menu=document.createElement("ul"),this.menu.classList.add("button-menu"),this.menu.setAttribute("aria-hidden","true"),this.menu.setAttribute("tabindex","0");for(let t of this.classes)this.menu.classList.add(t);let t=1;for(let e of this.items){let i=t+1,s=t-1;s<1&&(s=1),i>this.items.length&&(i=this.items.length);let n=document.createElement("li");n.setAttribute("tabindex","-1"),n.setAttribute("data-order",t),n.addEventListener("keyup",(t=>{switch(t.key){case"Tab":case"Escape":this.close();break;case"ArrowUp":t.preventDefault(),this.menu.querySelector(`[data-order='${s}']`).focus();break;case"ArrowDown":t.preventDefault(),this.menu.querySelector(`[data-order='${i}']`).focus();break;case"Enter":case" ":this.querySelector("a").click()}}));let a=document.createElement("a");if(e.icon&&a.appendChild(IconFactory.icon(e.icon)),e.classes&&e.classes.length>0)for(let t of e.classes)n.classList.add(t);let o=document.createElement("span");o.innerHTML=e.label,a.appendChild(o),a.addEventListener("click",(t=>{t.preventDefault(),e.action&&"function"==typeof e.action&&e.action(t,this),this.close()})),n.appendChild(a),e.tooltip&&new ToolTip({text:e.tooltip,icon:e.tipicon,gravity:this.tooltipgravity}).attach(n),this.menu.appendChild(n),t++}this.button.appendChild(this.menu)}processMenu(){this.menu.setAttribute("aria-hidden","true"),this.menu.setAttribute("tabindex","0"),this.menu.classList.add("button-menu");for(let t of this.classes)this.menu.classList.add(t);this.button.appendChild(this.menu),this.menu.addEventListener("keyup",(t=>{"Escape"===t.key&&this.close()}))}setMenu(t){this.menu.remove(),this.menu=t,this.processMenu()}get autoclose(){return this.config.autoclose}set autoclose(t){this.config.autoclose=t}get closeopen(){return this.config.closeopen}set closeopen(t){this.config.closeopen=t}get custompositioner(){return this.config.custompositioner}set custompositioner(t){this.config.custompositioner=t}get data(){return this.config.data}set data(t){this.config.data=t}get emsize(){return this._emsize}set emsize(t){this._emsize=t}get focusinside(){return this.config.focusinside}set focusinside(t){this.config.focusinside=t}get gravity(){return this.config.gravity}set gravity(t){this.config.gravity=t}get items(){return this.config.items}set items(t){this.config.items=t}get menu(){return this.config.menu}set menu(t){this.config.menu=t}get menuid(){return this.config.menuid}set menuid(t){this.config.menuid=t}get onclose(){return this.config.onclose}set onclose(t){this.config.onclose=t}get onopen(){return this.config.onopen}set onopen(t){this.config.onopen=t}get stayopen(){return this.config.stayopen}set stayopen(t){this.config.stayopen=t}get tooltipgravity(){return this.config.tooltipgravity}set tooltipgravity(t){this.config.tooltipgravity=t}}window.ButtonMenu=ButtonMenu;class ConstructiveButton extends SimpleButton{constructor(t){t.classes?t.classes.push("constructive"):t.classes=["constructive"],super(t)}}window.ConstructiveButton=ConstructiveButton;class DestructiveButton extends SimpleButton{constructor(t){t.classes?t.classes.push("destructive"):t.classes=["destructive"],super(t)}}window.DestructiveButton=DestructiveButton;class CloseButton extends SimpleButton{static get DEFAULT_CONFIG(){return{icon:"echx",text:TextFactory.get("close"),iconclasses:["closeicon"],classes:["naked","closebutton"]}}constructor(t){super(t=Object.assign({},CloseButton.DEFAULT_CONFIG,t))}}window.CloseButton=CloseButton;class HamburgerButton extends SimpleButton{static get DEFAULT_CONFIG(){return{toggletarget:null,text:TextFactory.get("open_menu"),shape:"square",naked:!0,icon:HamburgerButton.MAGIC_HAMBURGER,toggleaction:()=>{},action:(t,e)=>{e.toggle()}}}static get DEFAULT_CONFIG_DOCUMENTATION(){return{toggletarget:{type:"option",datatype:"object",description:"The menu object to open or close."},text:{type:"option",datatype:"string",description:"The text for the button. This is used as an aria-label only."},toggleaction:{type:"option",datatype:"function",description:"A function to execute when the button is toggled. Passed 'self"}}}static get MAGIC_HAMBURGER(){let t=document.createElement("span");return t.classList.add("magichamburger"),t.innerHTML="<span></span><span></span><span></span>",t}constructor(t){(t=Object.assign({},HamburgerButton.DEFAULT_CONFIG,t)).classes?t.classes.push("hamburger"):t.classes=["hamburger"],super(t)}get isopen(){return this.button.hasAttribute("aria-expanded")}toggle(){this.toggleaction&&"function"==typeof this.toggleaction&&this.toggleaction(this),this.isopen?this.close():(this.open(),this.toggletarget&&this.toggletarget.toggle&&this.toggletarget.toggle())}open(){this.isopen||this.button.setAttribute("aria-expanded","true")}close(){this.button.removeAttribute("aria-expanded")}get toggleaction(){return this.config.toggleaction}set toggleaction(t){this.config.toggleaction=t}get toggletarget(){return this.config.toggletarget}set toggletarget(t){this.config.toggletarget=t}}window.HamburgerButton=HamburgerButton;class HelpButton extends SimpleButton{static get DEFAULT_CONFIG(){return{action:(t,e)=>{e.tooltip.open()},icon:"help-circle",tipicon:"help-circle",tipgravity:"n",arialabel:TextFactory.get("help"),iconclasses:["helpicon"],tooltip:null}}constructor(t){(t=Object.assign({},HelpButton.DEFAULT_CONFIG,t)).classes?t.classes.includes("tagbutton")||(t.classes.push("naked"),t.classes.push("help")):t.classes=["naked","help"],t.id||(t.id=`${CFBUtils.getUniqueKey(5)}-help`),super(t)}}window.HelpButton=HelpButton;class SkipButton extends SimpleButton{static get DEFAULT_CONFIG(){return{text:TextFactory.get("skip_to_content"),classes:["visually-hidden","skipbutton"],id:"content-jump",contentstart:"#content-start",focusin:(t,e)=>{e.button.classList.remove("visually-hidden")},focusout:(t,e)=>{e.button.classList.add("visually-hidden")},action:(t,e)=>{let i=location.href;location.href=e.contentstart,history.replaceState(null,null,i)}}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. This is predefined on a SkipButton."},contentstart:{type:"option",datatype:"string",description:"The id of the element to jump to that marks the start of the content."}}}constructor(t){super(t=Object.assign({},SkipButton.DEFAULT_CONFIG,t))}get contentstart(){return this.config.contentstart}set contentstart(t){this.config.contentstart=t}}window.SkipButton=SkipButton;class TagButton extends HelpButton{static get DEFAULT_CONFIG(){return{iconside:"right",icon:"echx",iconclasses:["tagicon"],shape:"pill",size:"small"}}constructor(t){(t=Object.assign({},TagButton.DEFAULT_CONFIG,t)).classes?t.classes.push("tagbutton"):t.classes=["tagbutton"],super(t)}}window.TagButton=TagButton;class Panel{static get DEFAULT_CONFIG(){return{id:null,savestateprefix:"panel",assection:!1,dataattributes:null,attributes:null,contentid:null,headerid:null,title:null,iconprefix:"cfb",icon:null,content:null,style:"plain",hidden:!1,collapsible:!0,stateful:!0,closeicon:"echx",closeiconclosed:"chevron-down-thin",closeiconprefix:"cfb",closeiconclosedprefix:"cfb",minimized:!1,classes:[],footer:null,onclose:null,onopen:null}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The panel will have this as it's id."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},dataattributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with data-$key = value on elements."},attributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with $key = value on elements"},arialabel:{type:"option",datatype:"string",description:"The aria-label attribute"},hidden:{type:"option",datatype:"boolean",description:"If true, start hidden or not."},assection:{type:"option",datatype:"boolean",description:"If true, use the html element 'section' over 'div'"},minimized:{type:"option",datatype:"boolean",description:"Start collapsed/minimized."},stateful:{type:"option",datatype:"boolean",description:"Remember open or closed state. Saves to local storage. Must also have an 'id' set."},collapsible:{type:"option",datatype:"boolean",description:"Can the panel collapse? If false, minimized is ignored."},icon:{type:"option",datatype:"string",description:"If present, will be attached to the text inside the button. This can be passed a DOM object."},iconprefix:{type:"option",datatype:"string",description:"Changes the icon class prefix."},onclose:{type:"option",datatype:"function",description:"A function to run to when the panel closes. Passed the self."},onopen:{type:"option",datatype:"function",description:"A function to run to when the panel opens. Passed the self as argument."},closeicon:{type:"option",datatype:"string",description:"The icon to use in for the close/open button.."},contentid:{type:"option",datatype:"string",description:"A unique id value. This applies to the panel's content."},headerid:{type:"option",datatype:"string",description:"A unique id value. This applies to the panel's header."},footer:{type:"option",datatype:"DOM object",description:"Will be appended at the end."},title:{type:"option",datatype:"string",description:"The title to use for the panel."},content:{type:"option",datatype:"object",description:"The panel content payload."},style:{type:"option",datatype:"enumeration",description:"Various styles that can be applied to the panel. Values are plain' or 'invisible'."}}}constructor(t){this.config=Object.assign({},Panel.DEFAULT_CONFIG,t),this.id||(this.stateful=!1),this.id||(this.id=`panel-${CFBUtils.getUniqueKey(5)}`);let e=localStorage.getItem(`cfb-panel-minimized-${this.id}`);e&&"true"===e?this.minimized=!0:e&&"false"===e&&(this.minimized=!1),this.id?this.savekey=`${this.statesaveprefix}-state-${this.id}`:this.id=`${this.statesaveprefix}-${CFBUtils.getUniqueKey(5)}`,this.contentid||(this.contentid=`panel-c-${CFBUtils.getUniqueKey(5)}`),this.headerid||(this.headerid=`panel-h-${CFBUtils.getUniqueKey(5)}`),this.loadstate()}get ispersistable(){return!!(this.stateful&&this.savekey&&window.localStorage)}persist(){this.ispersistable&&(this.state=this.grindstate(),localStorage.setItem(this.savekey,JSON.stringify(this.state)))}loadstate(){this.ispersistable?(this.state=JSON.parse(localStorage.getItem(this.savekey)),this.state||(this.state=this.grindstate())):this.state||(this.state=this.grindstate())}applystate(){this.collapsible&&(this.state.minimized?this.close():this.open())}grindstate(){return{minimized:this.minimized}}toggleClose(){this.minimized?this.open():this.close()}open(){this.minimized=!1,this.container.setAttribute("aria-expanded","true"),this.state.minimized=this.minimized,this.persist(),this.collapsible&&this.closeicon&&this.closeiconclosed&&this.title&&this.togglebutton.setIcon(this.closeicon,this.closeiconprefix,!0),this.onopen&&"function"==typeof this.onopen&&this.onopen(this)}close(){this.container.setAttribute("aria-expanded","false"),this.minimized=!0,this.state.minimized=this.minimized,this.persist(),this.collapsible&&this.closeicon&&this.closeiconclosed&&this.title&&this.togglebutton.setIcon(this.closeiconclosed,this.closeiconclosedprefix,!0),this.onclose&&"function"==typeof this.onclose&&this.onclose(this)}show(){this.container.removeAttribute("aria-hidden")}hide(){this.container.setAttribute("aria-hidden","true")}buildHeader(){if(this.header=document.createElement("h3"),this.header.classList.add("panelheader"),this.icon&&this.header.classList.add("hasicon"),this.collapsible){let t=this.closeicon,e=this.closeiconprefix;if(this.minimized&&(t=this.closeiconclosed,e=this.closeiconprefix),this.togglebutton=new SimpleButton({id:this.headerid,secondicon:t,iconprefixsecond:e,icon:this.icon,iconprefix:this.iconprefix,text:this.title,naked:!0,iconclasses:["headerbutton"],secondiconclasses:["panelclose"],classes:["headerbutton"],action:t=>{t.preventDefault(),t.stopPropagation(),this.toggleClose()}}),this.closeicon){let t=this.togglebutton.button.querySelector("span.secondicon");t&&new ToolTip({icon:null,text:TextFactory.get("close_pane")}).attach(t)}this.header.appendChild(this.togglebutton.button)}else this.header.classList.add("nocollapse"),this.header.innerHTML=this.title}buildContentBox(){this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.contentbox.setAttribute("role","region")}buildContainer(){this.assection?this.container=document.createElement("section"):this.container=document.createElement("div"),this.container.classList.add("panel"),this.container.setAttribute("aria-expanded","true"),this.container.appendChild(this.contentbox);for(let t of this.classes)this.container.classList.add(t);this.title&&(this.container.appendChild(this.header),this.contentbox.setAttribute("aria-labelledby",this.headerid)),this.content&&this.contentbox.appendChild(this.content),CFBUtils.applyAttributes(this.attributes,this.container),CFBUtils.applyDataAttributes(this.dataattributes,this.container),this.container.appendChild(this.contentbox),this.footer&&this.container.appendChild(this.footer),this.collapsible&&this.minimized?(this.container.setAttribute("aria-expanded","false"),this.closeicon&&this.closeiconclosed&&this.togglebutton&&this.togglebutton.setIcon(this.closeiconclosed,this.closeiconclosedprefix,!0)):(this.container.setAttribute("aria-expanded","true"),this.closeicon&&this.closeiconclosed&&this.togglebutton&&this.togglebutton.setIcon(this.closeicon,this.closeiconprefix,!0)),this.applystate(),this.hidden&&this.hide()}replace(t){this.contentbox.innerHTML="",this.content=t,this.contentbox.appendChild(this.content)}toString(){return CFBUtils.getConfig(this)}get assection(){return this.config.assection}set assection(t){this.config.assection=t}get attributes(){return this.config.attributes}set attributes(t){this.config.attributes=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get dataattributes(){return this.config.dataattributes}set dataattributes(t){this.config.dataattributes=t}get togglebutton(){return this._togglebutton}set togglebutton(t){this._togglebutton=t}get closeicon(){return this.config.closeicon}set closeicon(t){this.config.closeicon=t}get closeiconclosed(){return this.config.closeiconclosed}set closeiconclosed(t){this.config.closeiconclosed=t}get closeiconprefix(){return this.config.closeiconprefix}set closeiconprefix(t){this.config.closeiconprefix=t}get closeiconclosedprefix(){return this.config.closeiconclosedprefix}set closeiconclosedprefix(t){this.config.closeiconclosedprefix=t}get collapsible(){return this.config.collapsible}set collapsible(t){this.config.collapsible=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get content(){return this.config.content}set content(t){this.config.content=t}get contentid(){return this.config.contentid}set contentid(t){this.config.contentid=t}get contentbox(){return this._contentbox||this.buildContentBox(),this._contentbox}set contentbox(t){this._contentbox=t}get footer(){return this.config.footer}set footer(t){this.config.footer=t}get header(){return this._header||this.buildHeader(),this._header}set header(t){this._header=t}get headerid(){return this.config.headerid}set headerid(t){this.config.headerid=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get iconprefix(){return this.config.iconprefix}set iconprefix(t){this.config.iconprefix=t}get id(){return this.config.id}set id(t){this.config.id=t}get minimized(){return this.config.minimized}set minimized(t){this.config.minimized=t}get onclose(){return this.config.onclose}set onclose(t){"function"!=typeof t&&console.error("Action provided for onclose is not a function!"),this.config.onclose=t}get onopen(){return this.config.onopen}set onopen(t){"function"!=typeof t&&console.error("Action provided for onopen is not a function!"),this.config.onopen=t}get position(){return this.config.position}set position(t){this.config.position=t}get savekey(){return this._savekey}set savekey(t){this._savekey=t}get state(){return this._state}set state(t){this._state=t}get statesaveprefix(){return this.config.statesaveprefix}set statesaveprefix(t){this.config.statesaveprefix=t}get stateful(){return this.config.stateful}set stateful(t){this.config.stateful=t}get style(){return this.config.style}set style(t){this.config.style=t}get title(){return this.config.title}set title(t){this.config.title=t,this.collapsible&&this.togglebutton?this.togglebutton.text=t:this.header&&(this.header.innerHTML=t)}get titlecontainer(){return this._titlecontainer}set titlecontainer(t){this._titlecontainer=t}}window.Panel=Panel;class LoadingShade{static get DEFAULT_CONFIG(){return{id:null,size:"medium",spinnerstyle:"spin",spinnertext:TextFactory.get("simpleform-spinnertext"),classes:[]}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},size:{type:"option",datatype:"string",description:"Size of the spinner. Default medium; values tiny, small, medium, large."},spinnerstyle:{type:"option",datatype:"enumeration",description:"The type of spinner to show (spin|bounce)"},spinnertext:{type:"option",datatype:"string",description:"The text to show on the loading shade."}}}constructor(t){return this.config=Object.assign({},LoadingShade.DEFAULT_CONFIG,t),this.id||(this.id=`shade-${CFBUtils.getUniqueKey(5)}`),this}activate(){this.container.parentNode&&this.container.parentNode.classList.add("shaded"),this.container.removeAttribute("aria-hidden")}deactivate(){this.container.parentNode&&this.container.parentNode.classList.remove("shaded"),this.container.setAttribute("aria-hidden","true")}toggle(){!0===this.container.getAttribute("aria-hidden")?this.activate():this.deactivate()}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("loading-shade",this.size),this.container.setAttribute("aria-hidden",!0);for(let t of this.classes)this.container.classList.add(t);if(this.spinnerstyle){let t=document.createElement("div");t.classList.add("spinner"),t.classList.add(this.spinnerstyle),this.container.appendChild(t)}this.spinnertext&&(this.textobj=document.createElement("div"),this.textobj.classList.add("spinnertext"),this.textobj.innerHTML=this.spinnertext,this.container.appendChild(this.textobj))}toString(){return CFBUtils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get id(){return this.config.id}set id(t){this.config.id=t}get size(){return this.config.size}set size(t){this.config.size=t}get spinnerstyle(){return this.config.spinnerstyle}set spinnerstyle(t){this.config.spinnerstyle=t}get spinnertext(){return this.config.spinnertext}set spinnertext(t){this.textobj&&(this.textobj.innerHTML=t),this.config.spinnertext=t}get textobj(){return this._textobj}set textobj(t){this._textobj=t}}window.LoadingShade=LoadingShade;class SimpleProgressMeter{static get DEFAULT_CONFIG(){return{id:null,classes:[],label:null,help:null,style:"boxed",commaseparate:!0,direction:"horizontal",currentrank:null,nextrank:null,showcaps:!0,decalposition:"interior",maxvalue:100,minvalue:0,value:50,fill:null}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The dialog object will have this as it's id."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},label:{type:"option",datatype:"string",description:"The title for the progress meter."},help:{type:"option",datatype:"string",description:"Help text."},style:{type:"option",datatype:"enmumeration",description:"One of a handful of additional styles: boxed, roundcap or interiorroundcamp"},commaseparate:{type:"option",datatype:"boolean",description:"Set to false to not comma separate numbers."},currentrank:{type:"option",datatype:"string",description:"A string, if present, will be displayed inside (along with minvalue)."},direction:{type:"option",datatype:"enumeration",description:"Which direction does the meter run? Values: 'vertical' or 'horizontal' (default)."},nextrank:{type:"option",datatype:"string",description:"A string, if present, will be displayed inside (along with maxvalue)."},showcaps:{type:"option",datatype:"boolean",description:"if true, show the min and max values.  True by default if currentrank or nextrank is set."},decalposition:{type:"option",datatype:"enumeration",description:"Where should the decals appear. Values: non, exterior, exterior-bottom"},maxvalue:{type:"option",datatype:"number",description:"The maximum score value for the meter."},minvalue:{type:"option",datatype:"number",description:"The minimum score value for the meter."},value:{type:"option",datatype:"number",description:"The current score, absolute."},fill:{type:"option",datatype:"number",description:"Width of the progressbar to fill.  Used if provided, or else calculated from other values."}}}constructor(t){this.config=Object.assign({},SimpleProgressMeter.DEFAULT_CONFIG,t),this.id||(this.id=`progress-${CFBUtils.getUniqueKey(5)}`),this.determineFill()}determineFill(){if(this.fill)return;let t=this.maxvalue-this.minvalue,e=this.value-this.minvalue;this.value<this.minvalue&&(e=this.value),this.fill=e/t*100}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("progressbar-container"),this.container.classList.add(this.direction),this.progress=document.createElement("div"),this.progress.classList.add("progress"),this.bar=document.createElement("div"),this.bar.classList.add("simpleprogress"),this.bar.classList.add(this.style),this.bar.appendChild(this.progress);for(let t of this.classes)this.container.classList.add(t);this.label&&this.container.appendChild(this.labelobj),(this.currentrank||this.nextrank)&&this.decalposition&&"exterior"===this.decalposition&&(this.container.appendChild(this.decallayer),this.bar.classList.add("exteriordecal")),this.container.appendChild(this.bar),(this.currentrank||this.nextrank)&&this.decalposition&&"exterior"!==this.decalposition&&"none"!==this.decalposition&&("exterior-bottom"===this.decalposition?(this.container.appendChild(this.decallayer),this.bar.classList.add("exteriordecal-bottom")):(this.bar.appendChild(this.decallayer),this.bar.classList.add("withdecals"))),setTimeout((()=>{"vertical"===this.direction?this.progress.style.height=`${this.fill}%`:this.progress.style.width=`${this.fill}%`}),500)}buildDecalLayer(){if(!this.currentrank&&!this.nextrank&&!this.showcaps)return null;if("none"===this.decalposition)return null;if(this.decallayer=document.createElement("div"),this.decallayer.classList.add("decals"),this.decallayer.classList.add(this.decalposition),this.currentrank||this.showcaps){let t=document.createElement("div");if(t.classList.add("current"),this.currentrank){let e=document.createElement("div");e.classList.add("name"),e.innerHTML=this.currentrank,t.appendChild(e)}if(this.showcaps){let e=document.createElement("div");e.classList.add("value"),e.innerHTML=this.commaseparate?CFBUtils.readableNumber(this.minvalue):this.minvalue,t.appendChild(e)}this.decallayer.appendChild(t)}if(this.nextrank||this.showcaps){let t=document.createElement("div");if(t.classList.add("next"),this.nextrank){let e=document.createElement("div");e.classList.add("name"),e.innerHTML=this.nextrank,t.appendChild(e)}if(this.showcaps){let e=document.createElement("div");e.classList.add("value"),e.innerHTML=this.commaseparate?CFBUtils.readableNumber(this.maxvalue):this.maxvalue,t.appendChild(e)}this.decallayer.appendChild(t)}}buildLabel(){if(!this.label)return null;this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.innerHTML=this.label,this.help&&(this.helpicon=new HelpButton({help:this.help}),this.labelobj.appendChild(this.helpicon.button),this.labelobj.addEventListener("onmouseover",(()=>{this.helpicon.open()})),this.labelobj.addEventListener("onmouseout",(()=>{this.helpicon.close()})))}toString(){return CFBUtils.getConfig(this)}get bar(){return this._bar}set bar(t){this._bar=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get commaseparate(){return this.config.commaseparate}set commaseparate(t){this.config.commaseparate=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get decallayer(){return this._decallayer||this.buildDecalLayer(),this._decallayer}set decallayer(t){this._decallayer=t}get decalposition(){return this.config.decalposition}set decalposition(t){this.config.decalposition=t}get direction(){return this.config.direction}set direction(t){this.config.direction=t}get fill(){return this.config.fill}set fill(t){this.config.fill=t}get help(){return this.config.help}set help(t){this.config.help=t}get helpicon(){return this._helpicon}set helpicon(t){this._helpicon=t}get id(){return this.config.id}set id(t){this.config.id=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get maxvalue(){return this.config.maxvalue}set maxvalue(t){this.config.maxvalue=t}get minvalue(){return this.config.minvalue}set minvalue(t){this.config.minvalue=t}get nextrank(){return this.config.nextrank}set nextrank(t){this.config.nextrank=t}get currentrank(){return this.config.currentrank}set currentrank(t){this.config.currentrank=t}get progress(){return this._progress}set progress(t){this._progress=t}get value(){return this.config.value}set value(t){this.config.value=t}get showcaps(){return this.config.showcaps}set showcaps(t){this.config.showcaps=t}get style(){return this.config.style}set style(t){this.config.style=t}}window.SimpleProgressMeter=SimpleProgressMeter;class MessageBox{static get DEFAULT_CONFIG(){return{id:null,icon:null,title:null,content:null,classes:[]}}constructor(t){this.config=Object.assign({},MessageBox.DEFAULT_CONFIG,t)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("messagebox");for(let t of this.classes)this.container.classList.add(t);this.title&&(this.header=document.createElement("h3"),this.header.innerHTML=this.title,this.container.appendChild(this.header)),this.content&&(this.icon&&(this.payload.appendChild(IconFactory.icon(this.icon)),this.payload.classList.add("hasicon")),this.content.classList.add("content"),this.payload.appendChild(this.content),this.container.appendChild(this.payload))}buildPayload(){this.payload=document.createElement("div"),this.payload.classList.add("payload")}toString(){return CFBUtils.getConfig(this)}get id(){return this.config.id}set id(t){this.config.id=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get content(){return this.config.content}set content(t){this.config.content=t}get header(){return this._header}set header(t){this._header=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get payload(){return this._payload||this.buildPayload(),this._payload}set payload(t){this._payload=t}get title(){return this.config.title}set title(t){this.config.title=t}}window.MessageBox=MessageBox;class InstructionBox extends MessageBox{static get DEFAULT_CONFIG(){return{icon:"help-circle",instructions:[]}}constructor(t){(t=Object.assign({},InstructionBox.DEFAULT_CONFIG,t)).classes?t.classes.push("instructions"):t.classes=["instructions"],super(t)}get infolist(){return this.instructions}set infolist(t){this.instructions=t}setInstructions(t){this.setInfolist(t)}setInfolist(t){this.container.classList.remove("size-1"),this.container.classList.remove("size-2"),this.container.classList.remove("size-3"),this.list.innerHTML="";for(let e of t){let t=document.createElement("li");t.innerHTML=e,this.list.appendChild(t)}t.length>0&&t.length<4&&this.container.classList.add(`size-${t.length}`)}buildContainer(){if(this.infolist&&this.infolist.length>0){for(let t of this.infolist){let e=document.createElement("li");e.innerHTML=t,this.list.appendChild(e)}this.content=this.list}super.buildContainer(),this.infolist.length>0&&this.infolist.length<4&&this.container.classList.add(`size-${this.infolist.length}`)}buildList(){this.list=document.createElement("ul")}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get list(){return this._list||this.buildList(),this._list}set list(t){this._list=t}}window.InstructionBox=InstructionBox;class ResultsContainer{static get DEFAULT_CONFIG(){return{id:null,classes:[],errors:null,warnings:null,results:null}}constructor(t){this.config=Object.assign({},ResultsContainer.DEFAULT_CONFIG,t)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("resultsbox");for(let t of this.classes)this.container.classList.add(t);this.errors&&this.errors.length>0&&this.container.appendChild(new ErrorBox({errors:this.errors}).container),this.results&&this.results.length>0&&this.container.appendChild(new SuccessBox({results:this.results}).container),this.warnings&&this.warnings.length>0&&this.container.appendChild(new WarningBox({warnings:this.warnings}).container)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get errors(){return this.config.errors}set errors(t){this.config.errors=t}get id(){return this.config.id}set id(t){this.config.id=t}get results(){return this.config.results}set results(t){this.config.results=t}get warnings(){return this.config.warnings}set warnings(t){this.config.warnings=t}get warningstitle(){return this.config.warningstitle}set warningstitle(t){this.config.warningstitle=t}get warningicon(){return this.config.warningicon}set warningicon(t){this.config.warningicon=t}}window.ResultsContainer=ResultsContainer;class ErrorBox extends InstructionBox{static get DEFAULT_CONFIG(){return{title:TextFactory.get("error"),icon:"warn-hex",errors:[]}}constructor(t){(t=Object.assign({},ErrorBox.DEFAULT_CONFIG,t)).classes?(t.classes.push("results"),t.classes.push("errors")):t.classes=["results","errors"],super(t)}get infolist(){return this.errors}set infolist(t){this.errors=t}setErrors(t){this.setInfolist(t)}get errors(){return this.config.errors}set errors(t){this.config.errors=t}}window.ErrorBox=ErrorBox;class SuccessBox extends InstructionBox{static get DEFAULT_CONFIG(){return{title:TextFactory.get("success"),icon:"disc-check",results:[]}}constructor(t){(t=Object.assign({},SuccessBox.DEFAULT_CONFIG,t)).classes?(t.classes.push("results"),t.classes.push("successes")):t.classes=["results","successes"],super(t)}get infolist(){return this.results}set infolist(t){this.results=t}setResults(t){this.setInfolist(t)}get results(){return this.config.results}set results(t){this.config.results=t}}window.SuccessBox=SuccessBox;class WarningBox extends InstructionBox{static get DEFAULT_CONFIG(){return{title:TextFactory.get("warning"),icon:"warn-triangle",warnings:[]}}constructor(t){(t=Object.assign({},WarningBox.DEFAULT_CONFIG,t)).classes?(t.classes.push("results"),t.classes.push("warnings")):t.classes=["results","warnings"],super(t)}get infolist(){return this.warnings}set infolist(t){this.warnings=t}setWarnings(t){this.setInfolist(t)}get warnings(){return this.config.warnings}set warnings(t){this.config.warnings=t}}window.WarningBox=WarningBox;class ColumnConfigurator{static get DEFAULT_CONFIG(){return{id:null,classes:[],fields:[],grid:null,instructions:TextFactory.get("datagrid-column-config-instructions")}}constructor(t){t||(t={}),this.config=Object.assign({},ColumnConfigurator.DEFAULT_CONFIG,t),this.id||(this.id=`cconfig-${CFBUtils.getUniqueKey(5)}`)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("column-configurator");for(let t of this.classes)this.container.classList.add(t);this.instructions&&this.container.appendChild(new InstructionBox({instructions:[this.instructions]}).container),this.elements=document.createElement("ul"),this.elements.classList.add("column-list");for(let t of this.grid.fields){let e=document.createElement("li"),i=new BooleanToggle({label:t.label,checked:!t.hidden,classes:["column"],onchange:()=>{this.grid.toggleColumn(t)}});if(e.appendChild(i.container),t.description){let i=document.createElement("div");i.classList.add("description"),i.innerHTML=t.description,e.appendChild(i)}this.elements.appendChild(e)}this.container.appendChild(this.elements)}toString(){return CFBUtils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get elements(){return this._elements}set elements(t){this._elements=t}get fields(){return this.config.fields}set fields(t){this.config.fields=t}get grid(){return this.config.grid}set grid(t){this.config.grid=t}get id(){return this.config.id}set id(t){this.config.id=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}}window.ColumnConfigurator=ColumnConfigurator;class DataGrid extends Panel{static get DEFAULT_CONFIG(){return{statesaveprefix:"grid",defaultsort:{column:"name",direction:"asc"},fetchbody:null,nodeselectself:!0,title:null,id:null,sortable:!0,columnconfigurable:!1,collapsible:!0,elementname:null,extraelements:null,searchplaceholder:TextFactory.get("search_this_data"),showinfo:!0,showfooter:!0,itemslabel:TextFactory.get("items_label"),screen:document.body,onpostprocess:t=>{},warehouse:null,fields:[],data:null,source:null,sourcemethod:"GET",dataprocessor:null,savestate:!0,demphasizeduplicates:!0,columnconfigurationicon:"table",searchable:!0,exportable:!0,exporticon:"download",exportheaderrow:"readable",exportfilename:t=>t.title?`${t.title}-export.csv`:"export.csv",exportarrayseparator:", ",filterable:!0,applyfiltersicon:"checkmark-circle",actionsbuttonicon:"menu",filterbuttonicon:"filter",mute:!1,defaultselectedid:null,selectable:!0,selectaction:(t,e,i)=>{},deselectaction:(t,e,i)=>{},doubleclick:null,mouseover:null,mouseout:null,spinnerstyle:"spin",spinnertext:TextFactory.get("datagrid-spinnertext"),multiselect:!0,multiselectactions:[],multiselecticon:"checkmark",allowedits:!0,instructionsicon:"help-circle",edititeminstructions:"datagrid-dialog-item-edit-instructions",createiteminstructions:"datagrid-dialog-item-create-instructions",deleteiteminstructions:"datagrid-dialog-item-delete-instructions",duplicateiteminstructions:"datagrid-dialog-item-duplicate-instructions",rowactions:null,rowactionsicon:"menu",updatemethod:"post",deletemethod:"post",duplicatemethod:"post",createmethod:"post",updatehook:(t,e)=>{},deletehook:(t,e)=>{},duplicatehook:(t,e)=>{},createhook:(t,e)=>{},formsuccess:(t,e)=>{},createcallback:null,updatecalback:null,deletecallback:null,activitynotifiericon:"gear-complex",activitynotifiertext:TextFactory.get("datagrid-activitynotifier-text"),texttotal:"total",sorticon:"chevron-down",classes:[]}}constructor(t){super(t=Object.assign({},DataGrid.DEFAULT_CONFIG,t)),this.initialize()}get displaytype(){return"datagrid"}initialize(){if(this.warehouse)this.fields=this.warehouse.fields,this.identifier=this.warehouse.identifier;else if(this.fields.length>0&&!GridField.prototype.isPrototypeOf(this.fields[0])){let t=[];for(let e of this.fields)t.push(new GridField(e));this.fields=t;for(let t of this.fields)t.identifier&&(this.identifier=t.name)}if(this.mute)for(let t of this.fields)t.mute=!0;this.activefilters=[],this.finalize(),setTimeout((()=>{this.fillData()}),100)}finalize(){this.shade.activate()}fillData(t){if(this.warehouse)this.warehouse.load((e=>{this.update(e),this.postLoad(),t&&"function"==typeof t&&t(),this.shade.deactivate()}));else if(this.source)this.fetchData(this.source,(e=>{this.update(e),this.postLoad(),t&&"function"==typeof t&&t(),this.shade.deactivate()}));else if(this.data){for(let t of this.data)this.gridbody.appendChild(this.buildRow(t));setTimeout((()=>{this.postLoad(),t&&"function"==typeof t&&t(),this.shade.deactivate()}),100)}}postLoad(){this.applystate(),this.state&&this.state.sort&&this.sortField(this.state.sort.field,this.state.sort.direction),this.grindDuplicateCells()}get multiselecting(){return this.grid.classList.contains("multiselecting")}getValues(t){let e=[];for(let i of this.data)e.push(i[t]);return e}getUniqueValues(t){let e=new Set;for(let i of this.data)e.add(i[t]);return Array.from(e).sort()}getField(t){let e;for(let i of this.fields)if(i.name===t){e=i;break}return e}export(t){let e;this.exportbutton&&this.exportbutton.disable(),e=this.exportfilename&&"function"==typeof this.exportfilename?this.exportfilename(this):this.exportfilename;let i=this.compileCSV(t),s=document.createElement("a");s.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURI(i)}`),s.setAttribute("id","downloadLink"),s.setAttribute("target","_blank"),s.setAttribute("download",e),s.click(),this.exportbutton&&this.exportbutton.enable()}compileCSV(t){let e=[];if(this.exportheaderrow&&"no"!==this.exportheaderrow){let i=[],s=[];for(let e of this.fields)t&&e.hidden||(i.push(`"${e.label.replace(/"/g,'\\"')}"`),s.push(`"${e.name.replace(/"/g,'\\"')}"`));"readable"===this.exportheaderrow?e.push(`${i.join(",")}`):e.push(`${s.join(",")}`)}for(let i of this.data){let s=!0;if(t&&this.activefilters&&this.activefilters.length>0)for(let t of this.activefilters){let e=this.getField(t.field);s=this.testFilter(e,t,i[t.field])}if(!s)continue;let n=[];for(let e of this.fields){if(t&&e.hidden)continue;let s;if(i[e.name])switch(e.type){case"date":s=i[e.name].toString().replace(/"/g,'\\"');break;case"stringarray":s=i[e.name].join(this.exportarrayseparator).replace(/"/g,'\\"');break;case"number":case"time":s=i[e.name];break;case"string":case"paragraph":default:s=i[e.name].toString().replace(/"/g,'\\"')}else s="";n.push(`"${s}"`)}e.push(n.join(","))}return e.join("\r\n")}search(t){this.messagebox.classList.add("hidden"),this.gridwrapper.classList.remove("hidden");let e=0,i=!1;for(let s of Array.from(this.gridbody.childNodes)){let n=!1;if(s.setAttribute("data-search-hidden",!0),t&&""!==t){let e=Array.from(s.childNodes);"datalist"===this.displaytype&&(e=Array.from(s.querySelectorAll("[data-column]")));for(let s of e){if(n)break;if(!s.classList.contains("mechanical")&&!s.classList.contains("actions")){let e=s.getAttribute("data-column");if(e&&"description"===e)break;-1!==s.innerText.toLowerCase().indexOf(t.toLowerCase())&&(s.classList.contains("hidden")?i=!0:n=!0)}}}else n=!0;n&&(e++,s.removeAttribute("data-search-hidden"))}if(e<=0&&""!==t){this.messagebox.innerHTML="";let t=[TextFactory.get("search_noresults")];i&&t.push(TextFactory.get("matches_hidden_columns"));let e=new WarningBox({title:null,warnings:t,classes:["hidden"]});this.messagebox.appendChild(e.container),this.messagebox.classList.remove("hidden"),this.gridwrapper.classList.add("hidden")}else this.messagebox.innerHTML="",this.messagebox.classList.add("hidden"),this.gridwrapper.classList.remove("hidden")}sortField(t,e="asc"){if(!t)return;let i=this.thead.querySelector(`[data-name='${t}']`),s=this.thead.querySelectorAll("th");for(let t of s)t.removeAttribute("data-sort");i.setAttribute("data-sort",e);let n=Array.from(this.gridbody.childNodes);n.sort(((i,s)=>{let n=i.querySelector(`[data-name='${t}']`),a=s.querySelector(`[data-name='${t}']`),o=n.innerText||n.textContent,r=a.innerText||a.textContent;if("date"===this.getField(t).type){let e=i.querySelector(`[data-name='${t}']`),n=s.querySelector(`[data-name='${t}']`);e&&(o=e.getAttribute("data-millis")),n&&(r=n.getAttribute("data-millis"))}else if("number"===this.getField(t).type)try{o=parseInt(o),r=parseInt(r)}catch(t){console.error("Error parsing number values")}if("asc"===e){if(o<r)return-1;if(o>r)return 1}else{if(o>r)return-1;if(o<r)return 1}return 0})),this.gridbody.innerHTML="";for(let t of n)this.gridbody.appendChild(t);this.currentsort={field:t,direction:e},this.grindDuplicateCells(),this.persist()}togglesort(t){let e=this.gridheader.querySelector(`[data-name='${t}'`),i="asc";e&&e.getAttribute("data-sort")&&"asc"===e.getAttribute("data-sort")&&(i="desc"),this.sortField(t,i)}configurator(t){let e={actions:[],screen:this.screen};switch(t){case"column":e.title=TextFactory.get("configure_columns");let t=new ColumnConfigurator({grid:this});e.content=t.container;break;case"filter":e.title=TextFactory.get("manage_filters");let i=new FilterConfigurator({fields:this.fields,mute:this.mute,filters:this.activefilters});e.content=i.container,e.actions.push(new ConstructiveButton({text:TextFactory.get("apply_filters"),icon:"disc-check",action:()=>{i.grindFilters(),this.activefilters=i.filters,this.applyFilters(),this.persist(),this.dialog.close()}}))}e.actions.push("closebutton"),this.dialog=new DialogWindow(e),this.dialog.open()}datawindow(t,e){let i={actions:[],screen:this.screen};switch(t){case"edit":i.title=TextFactory.get("datagrid-dialog-item-edit",this.elementname),i.form=new SimpleForm(this.buildForm(e,t)),i.actions=["cancelbutton"];break;case"create":i.title=TextFactory.get("datagrid-dialog-item-create",this.elementname),i.form=new SimpleForm(this.buildForm(e,t)),i.actions=["cancelbutton"];break;case"duplicate":i.title=TextFactory.get("datagrid-dialog-item-duplicate",this.elementname),this.identifier&&delete e[this.identifier],i.actions=["cancelbutton"],i.form=new SimpleForm(this.buildForm(e,t));break;case"delete":i.title=TextFactory.get("datagrid-dialog-item-delete",this.elementname),i.actions=["cancelbutton"],i.form=new SimpleForm(this.buildForm(e,t));break;case"view":default:i.title=TextFactory.get("datagrid-dialog-item-view",this.elementname),i.actions=["closebutton"],i.form=new SimpleForm(this.buildForm(e,t))}this.dialog=new DialogWindow(i),this.dialog.open()}buildForm(t,e){let i={passive:!1,elements:[],actions:[],handler:(t,e)=>{e({success:!1,errors:["Handler is not defined."]})}};this.formsuccess&&"function"==typeof this.formsuccess&&(i.onsuccess=(t,e)=>{this.formsuccess(t,e)});for(let s of this.fields){s.hidden=!1,"edit"===e&&s.readonly&&(s.hidden=!0);let n=s.getElement(t[s.name]);i.elements.push(n)}if(this.extraelements)for(let t of this.extraelements)i.elements.push(new HiddenField({name:t.name,value:t.value}));switch(this.allowedits||(e="view"),e){case"edit":if(this.edititeminstructions&&(i.instructions={icon:this.instructionsicon,instructions:[TextFactory.get(this.edititeminstructions,this.elementname)]}),i.method=this.updatemethod,this.updatecallback&&"function"==typeof this.updatecallback){t[this.identifier];i.handlercallback=(t,e,i)=>{this.updatecallback(t,e,i)}}this.updatehook&&"function"==typeof this.updatehook?i.handler=t=>{this.updatehook(t)}:this.updatehook&&(i.handler=this.updatehook),i.actions=[new ConstructiveButton({text:TextFactory.get("datagrid-dialog-item-save",this.elementname),icon:"check-circle",submits:!0,disabled:!0})];break;case"duplicate":this.duplicateiteminstructions&&(i.instructions={icon:this.instructionsicon,instructions:[TextFactory.get(this.duplicateiteminstructions,this.elementname)]}),i.method=this.duplicatemethod,this.createhook&&"function"==typeof this.createhook&&(i.handler=t=>{this.createhook(t)}),this.createcallback&&"function"==typeof this.createcallback?i.handlercallback=(t,e)=>{this.createcallback(t,e)}:this.createhook&&(i.handler=this.createhook),i.actions=[new ConstructiveButton({text:TextFactory.get("datagrid-dialog-item-duplicate",this.elementname),icon:"duplicate",submits:!0,disabled:!0})];break;case"create":this.createiteminstructions&&(i.instructions={icon:this.instructionsicon,instructions:[TextFactory.get(this.createiteminstructions,this.elementname)]}),i.method=this.createmethod,this.createhook&&"function"==typeof this.createhook?i.handler=t=>{this.createhook(t)}:this.createhook&&(i.handler=this.createhook),this.createcallback&&"function"==typeof this.createcallback&&(i.handlercallback=(t,e)=>{this.createcallback(t,e)}),i.actions=[new ConstructiveButton({text:TextFactory.get("datagrid-dialog-item-create",this.elementname),icon:"plus-circle",submits:!0,disabled:!0})];break;case"delete":if(this.deleteiteminstructions&&(i.instructions={icon:this.instructionsicon,instructions:[TextFactory.get(this.deleteiteminstructions,this.elementname)]}),i.method=this.deletemethod,this.deletehook&&"function"==typeof this.deletehook?i.handler=e=>{this.deletehook(t,e)}:this.deletehook&&(i.handler=this.deletehook),this.deletecallback&&"function"==typeof this.deletecallback){t[this.identifier];i.handlercallback=(t,e,i)=>{this.deletecallback(t,e,i)}}if(i.passive=!1,i.elements=[new HiddenField({name:this.identifier,hidden:!0,value:t[this.identifier]})],this.extraelements)for(let t of this.extraelements)i.elements.push(new HiddenField({name:t.name,value:t.value}));i.actions=[new ConstructiveButton({text:[TextFactory.get("datagrid-dialog-item-delete",this.elementname)],icon:"trashcan",submits:!0,disabled:!1})];break;case"view":i.passive=!0}return i}grindDuplicateCells(){if(!this.demphasizeduplicates)return;let t;for(let e of this.gridbody.querySelectorAll("tr")){if(!t){t=e;let i=t.querySelectorAll("td:not(.mechanical)");for(let t of i)t.classList.remove("duplicate");continue}let i=t.querySelectorAll("td:not(.mechanical)"),s=e.querySelectorAll("td:not(.mechanical)");for(let t=0;t<s.length;t++)this.getField(s[t].getAttribute("data-name")).nodupe||(s[t].innerHTML===i[t].innerHTML?s[t].classList.add("duplicate"):s[t].classList.remove("duplicate"));t=e}}clear(){this.data=[],this.gridbody.innerHTML="",this.postProcess()}postProcess(){this.onpostprocess&&"function"==typeof this.onpostprocess&&this.onpostprocess(this),this.updateCount(),this.state&&this.sortField(this.state.sort.field,this.state.sort.direction),this.applyFilters(),this.search(this.searchcontrol.value),this.grindDuplicateCells()}activity(t=!0){for(let e of this.container.querySelectorAll("div.activity"))t?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden","true")}fetchData(t=this.source,e){this.activity(!0),this.activitynotifier&&this.activitynotifier.removeAttribute("aria-hidden");let i={method:this.sourcemethod,headers:{"Content-Type":"application/json; charset=utf-8"}};this.fetchbody&&(i.body=this.fetchbody),fetch(t,i).then((t=>t.json())).then((t=>{t=this.dataprocessor&&"function"==typeof this.dataprocessor?this.dataprocessor(t):t.data,e&&"function"==typeof e?e(t):this.update(t),this.activity(!1)})).catch((e=>{console.error(`Error while fetching data from ${t}`),console.error(e)}))}mergeData(t=this.source){this.fetchData(t,(t=>{this.update(t)}))}getEntry(t){if(!this.identifier)return null;let e;for(let i of this.data)if(i[this.identifier]&&i[this.identifier]===t){e=i;break}return e}update(t){this.data=[],this.gridbody.innerHTML="";for(let e of t)if(this.identifier){let t=e[this.identifier];this.getEntry(t)?this.updateEntry(e):this.addEntry(e)}else this.addEntry(e);this.postProcess()}replace(t){this.data=[],this.update(t)}updateEntry(t){let e=t[this.identifier],i=this.gridbody.querySelector(`[data-rowid=${this.id}-r-${e}]`);for(let i of this.data)if(i[this.identifier]&&i[this.identifier]===e){for(let e in t)i[e]=t[e];break}for(let e in t){if(!this.getField(e))continue;if(e===this.identifier)continue;let s=i.querySelector(`[data-name=${e}`),n=this.buildCell(t,this.getField(e));i.replaceChild(n,s)}i.classList.add("updated"),window.setTimeout((()=>{i.classList.remove("updated")}),1e4)}addEntry(t){this.gridbody.appendChild(this.buildRow(t)),this.data.push(t)}deleteRow(t){let e=0;for(let i of this.data){if(i.rowid&&i.rowid===t)break;e++}this.data.splice(e,1),this.gridbody.removeChild(this.gridbody.querySelector(`[data-rowid='${t}'`)),this.postProcess()}toggleColumn(t){t.hidden?this.showColumn(t):this.hideColumn(t),this.persist()}handleColumnPresences(){let t=!1;for(let e of this.fields)if(!e.hidden){t=!0;break}t?this.messagebox.classList.add("hidden"):(this.messagebox.innerHTML="",this.messagebox.appendChild(new MessageBox({warningstitle:TextFactory.get("no_columns"),warnings:[TextFactory.get("datagrid-message-no_visible_columns")],classes:["hidden"]}).container),this.messagebox.classList.remove("hidden"))}hideColumn(t){t.hidden=!0;for(let e of Array.from(this.grid.querySelectorAll(`[data-name='${t.name}']`)))e.classList.add("hidden");this.handleColumnPresences()}showColumn(t){t.hidden=!1;for(let e of Array.from(this.grid.querySelectorAll(`[data-name='${t.name}']`)))e.classList.remove("hidden");this.handleColumnPresences()}applystate(){if(this.state){if(this.state.fields)for(let t of Object.values(this.state.fields))t.hidden?this.hideColumn(this.getField(t.name)):this.showColumn(this.getField(t.name));if(!this.state.selected&&this.defaultselectedid&&(this.state.selected=this.defaultselectedid),this.state.selected){let t=this.gridbody.querySelector(`[data-id="${this.state.selected}"]`);t&&t.click()}this.state.filters&&(this.activefilters=this.state.filters),this.state.sort&&(this.currentsort=this.state.sort),this.applyFilters(),super.applystate()}}grindstate(){let t={minimized:!1,fields:{},filters:[],selected:this.selectedrow,sort:this.currentsort?this.currentsort:this.defaultsort,search:null};for(let e of this.fields)void 0===e.hidden&&(e.hidden=!1),t.fields[e.name]={name:e.name,hidden:e.hidden};if(this.activefilters)for(let e of this.activefilters)t.filters.push({filterid:e.filterid,field:e.field,comparator:e.comparator,value:e.value});return t}removeFilter(t){let e=[];for(let i of this.activefilters)i.filterid!==t.filterid&&e.push(i);this.activefilters=e,this.persist(),this.applyFilters()}applyFilters(){if(!this.filterable)return;if(!this.filtertags)return;let t=Array.from(this.gridbody.childNodes);if(this.filtertags.innerHTML="",this.activefilters&&Object.values(this.activefilters).length>0){this.filterinfo.setAttribute("aria-expanded",!0);for(let t of this.activefilters)t.tagbutton=new TagButton({text:this.getField(t.field).label,tooltip:`${this.getField(t.field).label} ${GridField.getComparatorLabel(t.comparator)} ${t.value}`,action:()=>{this.removeFilter(t)}}),this.filtertags.appendChild(t.tagbutton.button)}else this.filterinfo.removeAttribute("aria-expanded");for(let e of t)if(e.removeAttribute("data-matched-filters"),e.classList.remove("filtered"),this.activefilters&&this.activefilters.length>0){let t=[];for(let i of this.activefilters){let s=this.getField(i.field),n=!1,a=e.querySelector(`[data-name='${i.field}']`);n=this.testFilter(s,i,a.innerHTML),n?t.push(i.field):e.classList.add("filtered")}t.length>0?e.setAttribute("data-matched-filters",t.join(",")):e.removeAttribute("data-matched-filters")}let e=this.gridbody.querySelector("tr:not(.filtered)");e&&0!==e.length?this.messagebox.classList.add("hidden"):(this.messagebox.innerHTML="",this.messagebox.appendChild(new MessageBox({warningstitle:this.allfilteredtitle,warnings:[this.allfilteredtext],classes:["hidden"]}).container),this.messagebox.classList.remove("hidden"))}testFilter(t,e,i){let s,n=e.value;switch(t.type){case"date":case"time":switch(i=new Date(i),n=new Date(n),e.comparator){case"isbefore":s=i.getTime()<n.getTime();break;case"isafter":s=i.getTime()>n.getTime();break;case"doesnotequal":s=i.getTime()!==n.getTime();break;case"equals":default:s=i.getTime()===n.getTime()}break;case"number":switch(i=parseInt(i),n=parseInt(n),e.comparator){case"isgreaterthan":s=i>n;break;case"islessthan":s=i<n;break;case"doesnotequal":s=i!==n;break;case"equals":default:s=i===n}break;case"boolean":switch(e.comparator){case"equals":s=i===n;break;case"doesnotequal":s=i!==n}break;default:switch(i=i.toLowerCase(),n=n.toLowerCase(),e.comparator){case"equals":s=i===n;break;case"doesnotequal":s=i!==n;break;case"startswith":s=i.startsWith(n);break;case"endswith":s=i.endsWith(n);break;case"notcontains":s=-1===i.toLowerCase().indexOf(n.toLowerCase());break;case"contains":default:s=-1!==i.toLowerCase().indexOf(n.toLowerCase())}}return s}select(t,e,i){if(!this.nodeselectself&&"true"===t.getAttribute("aria-selected"))return this.deselect(t),void(this.deselectaction&&"function"==typeof this.deselectaction&&this.deselectaction(this,t,i));let s=!0,n=!1;(this.multiselecting||this.multiselect&&e&&"click"===e.type&&(e.shiftKey||e.metaKey))&&(s=!1);let a=this.gridbody.querySelectorAll("[aria-selected='true']");if(a&&a.length>0&&(n=!0,this.selectedrow=null),s){n=!1;for(let t of a)this.deselect(t)}if(e&&e.shiftKey&&n){let e=[],i=!1,s=!1,n=this.gridbody.querySelectorAll("tr");for(let a of n)if(a.getAttribute("data-rowid")===t.getAttribute("data-rowid")){if(s=!0,i)break;e=[],i=!0}else if("true"===a.getAttribute("aria-selected")){if(i&&s)break;i?e=[]:i=!0}else i&&e.push(a);for(let t of e)t.setAttribute("aria-selected","true"),t.querySelector("input.selector")&&(t.querySelector("input.selector").checked=!0);t.setAttribute("aria-selected","true"),t.querySelector("input.selector")&&(t.querySelector("input.selector").checked=!0)}else t.setAttribute("aria-selected","true"),t.getAttribute("data-id")&&(this.selectedrow=t.getAttribute("data-id")),t.querySelector("input.selector")&&(t.querySelector("input.selector").checked=!0),this.selectaction&&"function"==typeof this.selectaction&&this.selectaction(this,t,i);this.persist()}deselect(t){t.removeAttribute("aria-selected"),t.querySelector("input.selector")&&(t.querySelector("input.selector").checked=!1)}toggleallselect(t){let e=this.gridbody.querySelectorAll("tr");for(let i of e)t?this.select(i):this.deselect(i)}selectmodetoggle(){this.multiselecting?this.grid.classList.remove("multiselecting"):this.grid.classList.add("multiselecting")}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("datagrid-container"),this.container.classList.add("panel"),this.container.setAttribute("id",this.id),this.container.setAttribute("aria-expanded","true"),this.title&&this.container.appendChild(this.header),this.showinfo&&this.container.appendChild(this.datainfo),this.filterable&&this.container.appendChild(this.filterinfo),this.grid.appendChild(this.thead),this.grid.appendChild(this.gridbody),this.gridwrapper=document.createElement("div"),this.gridwrapper.classList.add("grid-wrapper"),this.gridwrapper.appendChild(this.shade.container),this.gridwrapper.appendChild(this.grid),this.container.appendChild(this.gridwrapper),this.showfooter&&this.container.appendChild(this.footer),this.gridwrapper.onscroll=()=>{this.gridwrapper.scrollLeft>0?this.grid.classList.add("schoriz"):this.grid.classList.remove("schoriz"),this.gridwrapper.scrollTop>0?this.grid.classList.add("scvert"):this.grid.classList.remove("scvert")},this.messagebox=document.createElement("div"),this.messagebox.classList.add("messages"),this.messagebox.classList.add("hidden"),this.gridwrapper.appendChild(this.messagebox),this.minimized&&(this.container.setAttribute("aria-expanded","false"),this.minimized=!0),this.hidden&&this.hide(),this.updateCount()}buildShade(){this.shade=new LoadingShade({spinnertext:this.spinnertext,spinnerstyle:this.spinnerstyle})}buildFilterInfo(){this.filterinfo=document.createElement("div"),this.filterinfo.classList.add("grid-filterinfo");let t=document.createElement("label");t.innerHTML=TextFactory.get("filters"),this.filterinfo.appendChild(t),this.filtertags=document.createElement("div"),this.filtertags.classList.add("grid-filtertags"),this.filterinfo.appendChild(this.filtertags)}updateCount(){let t=!0;if(this.data){for(let t of this.container.querySelectorAll("span.itemcount"))t.innerHTML=this.data.length;this.data.length>0&&(t=!1)}if(t){if(this.messagebox){this.messagebox.innerHTML="";let t=[TextFactory.get("datagrid-message-empty_grid")],e=new WarningBox({title:null,warnings:t,classes:["hidden"]});this.messagebox.appendChild(e.container),this.messagebox.classList.remove("hidden")}this.gridwrapper.classList.add("hidden")}else this.messagebox&&(this.messagebox.innerHTML="",this.messagebox.classList.add("hidden")),this.gridwrapper.classList.remove("hidden")}buildItemCounter(){let t=document.createElement("div");return t.classList.add("countbox"),t.innerHTML=`<label>${this.itemslabel}</label> <span class="itemcount"></span>`,t}buildActivityNotifier(){let t=document.createElement("div");if(t.classList.add("activity"),t.setAttribute("aria-hidden","true"),this.activitynotifiericon&&t.appendChild(IconFactory.icon(this.activitynotifiericon)),this.activitynotifiertext){let e=document.createElement("span");e.innerHTML=this.activitynotifiertext,t.appendChild(e)}return t}buildDataInfo(){this.datainfo=document.createElement("div"),this.datainfo.classList.add("datainfo"),this.datainfo.appendChild(this.buildItemCounter()),this.datainfo.appendChild(this.buildActivityNotifier()),this.searchable&&(this.searchcontrol=new SearchControl({arialabel:this.searchplaceholder,placeholder:this.searchplaceholder,mute:this.mute,searchtext:TextFactory.get("search"),action:t=>{this.search(t)}}),this.datainfo.appendChild(this.searchcontrol.container)),this.filterable&&(this.filterbutton=new SimpleButton({mute:!0,text:TextFactory.get("filters"),icon:this.filterbuttonicon,tooltip:TextFactory.get("datagrid-tooltip-filters"),classes:["filter"],action:()=>{this.configurator("filter")}}),this.datainfo.appendChild(this.filterbutton.button));let t=[];this.selectable&&this.multiselect&&t.push({label:TextFactory.get("bulk_select"),tooltip:TextFactory.get("datagrid-tooltip-bulk_select"),icon:this.multiselecticon,action:()=>{this.selectmodetoggle()}}),this.columnconfigurable&&t.push({label:TextFactory.get("columns"),icon:this.columnconfigurationicon,tooltip:TextFactory.get("datagrid-tooltip-configure_columns"),action:()=>{this.configurator("column")}}),this.exportable&&(t.push({label:TextFactory.get("export"),tooltip:TextFactory.get("datagrid-tooltip-export"),icon:this.exporticon,action:()=>{this.export()}}),this.columnconfigurable&&t.push({label:TextFactory.get("export-current_view"),tooltip:TextFactory.get("datagrid-tooltip-export-current_view"),icon:this.exporticon,action:()=>{this.export(!0)}})),t.length>0&&(this.actionsbutton=new ButtonMenu({mute:!0,shape:"square",secondicon:null,gravity:"sw",tooltipgravity:"w",text:TextFactory.get("actions"),icon:this.actionsbuttonicon,classes:["actions"],items:t}),this.datainfo.appendChild(this.actionsbutton.button))}buildGrid(){this.grid=document.createElement("table"),this.grid.classList.add("grid"),this.selectable&&this.grid.classList.add("selectable")}buildTableHead(){if(this.multiselect){this.masterselector=new BooleanToggle({onchange:t=>{this.toggleallselect(t.checked)}});let t=document.createElement("th");t.classList.add("selector"),t.classList.add("mechanical"),t.appendChild(this.masterselector.naked),this.gridheader.appendChild(t)}if(this.rowactions&&this.rowactions.length>0){let t=document.createElement("th");t.classList.add("actions"),t.classList.add("mechanical"),t.innerHTML="",this.gridheader.appendChild(t)}for(let t of this.fields)this.gridheader.appendChild(this.buildHeaderCell(t));this.thead=document.createElement("thead"),this.thead.appendChild(this.gridheader)}buildHeaderCell(t){let e=document.createElement("div");e.classList.add("th"),e.innerHTML=t.label,this.sorticon&&e.classList.add(`cfb-${this.sorticon}`);let i=document.createElement("th");return i.setAttribute("id",`${this.id}-h-c-${t.name}`),i.setAttribute("data-name",t.name),i.setAttribute("data-datatype",t.type),i.classList.add(t.type),i.appendChild(e),t.resize&&i.classList.add("resize"),t.nodupe&&i.classList.add("nodupe"),t.hidden&&i.classList.add("hidden"),t.description&&new ToolTip({text:t.description}).attach(e),this.sortable&&(i.setAttribute("tabindex","0"),i.addEventListener("click",(e=>{e.preventDefault(),this.togglesort(t.name)})),i.addEventListener("keyup",(e=>{switch(e.preventDefault(),e.key){case"Enter":case" ":this.togglesort(t.name)}}))),this.headercells[t.name]=i,i}buildGridBody(){this.gridbody=document.createElement("tbody")}buildGridHeader(){this.gridheader=document.createElement("tr"),this.gridheader.classList.add("header")}buildRow(t){let e=document.createElement("tr");if(this.identifier&&e.setAttribute("data-id",t[this.identifier]),this.selectable&&(e.setAttribute("tabindex","0"),this.identifier?e.setAttribute("data-rowid",`${this.id}-r-${t[this.identifier]}`):e.setAttribute("data-rowid",`row-${CFBUtils.getUniqueKey(5)}`),t.rowid=e.getAttribute("data-rowid"),e.addEventListener("click",(i=>{i.target.classList.contains("mechanical")||(i.shiftKey&&(i.preventDefault(),i.stopPropagation(),document.getSelection().removeAllRanges()),this.selectable&&this.select(e,i,t))})),e.addEventListener("keydown",(t=>{switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault();let i=e.parentNode.rows[e.rowIndex-2];i&&i.focus();break;case"ArrowRight":case"ArrowDown":t.preventDefault();let s=e.parentNode.rows[e.rowIndex];s&&s.focus();break;case"Enter":case" ":e.click()}}))),this.multiselect){let t=new BooleanToggle({classes:["selector"],onchange:t=>{t.checked?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected")}}),i=document.createElement("td");i.classList.add("selector"),i.classList.add("mechanical"),i.appendChild(t.naked),e.appendChild(i)}if(e.addEventListener("dblclick",((e,i)=>{this.doubleclick&&"function"==typeof this.doubleclick?this.doubleclick(e,i):this.datawindow("view",t)})),this.mouseover&&"function"==typeof this.mouseover&&e.addEventListener("mouseover",(e=>{this.mouseover&&"function"==typeof this.mouseover&&this.mouseover(t,this,e)})),this.mouseout&&"function"==typeof this.mouseout&&e.addEventListener("mouseout",(e=>{this.mouseout&&"function"==typeof this.mouseout&&this.mouseout(t,this,e)})),this.rowactions&&this.rowactions.length>0){let i=document.createElement("td");i.classList.add("actions"),i.classList.add("mechanical");let s=[];for(let e of this.rowactions){let i={label:e.label,toolip:e.tooltip,icon:e.icon,tipicon:e.tipicon};switch(e.type){case"edit":i.action=()=>{this.datawindow("edit",t)};break;case"delete":i.action=()=>{this.datawindow("delete",t)};break;case"duplicate":i.action=()=>{this.datawindow("duplicate",t)};break;case"function":i.action=()=>{e.action(t)}}s.push(i)}i.appendChild(new ButtonMenu({mute:!0,shape:"square",data:t,secondicon:null,gravity:"east",text:TextFactory.get("actions"),icon:this.rowactionsicon,classes:["actions"],items:s}).button),e.appendChild(i)}for(let i of this.fields)e.appendChild(this.buildCell(t,i));return e}buildCell(t,e){let i,s=t[e.name];i=e.renderer(s,t);let n=document.createElement("td");if(n.setAttribute("data-name",e.name),n.setAttribute("data-datatype",e.type),"date"===e.type&&(n.setAttribute("data-millis",new Date(s).getTime()),null===s&&(i="")),"string"==typeof i&&(i=document.createTextNode(i)),null===i&&(i=document.createTextNode("")),n.appendChild(i),e.classes)for(let t of e.classes)n.classList.add(t);return e.hidden&&n.classList.add("hidden"),n}buildFooter(){this.footer=document.createElement("footer"),this.footer.appendChild(this.buildItemCounter()),this.footer.appendChild(this.buildActivityNotifier())}toString(){return CFBUtils.getConfig(this)}get actionsbutton(){return this._actionsbutton}set actionsbutton(t){this._actionsbutton=t}get actionsbuttonicon(){return this.config.actionsbuttonicon}set actionsbuttonicon(t){this.config.actionsbuttonicon=t}get activefilters(){return this._activefilters}set activefilters(t){this._activefilters=t}get activitynotifier(){return this._activitynotifier}set activitynotifier(t){this._activitynotifier=t}get activitynotifiericon(){return this.config.activitynotifiericon}set activitynotifiericon(t){this.config.activitynotifiericon=t}get activitynotifiertext(){return this.config.activitynotifiertext}set activitynotifiertext(t){this.config.activitynotifiertext=t}get allowedits(){return this.config.allowedits}set allowedits(t){this.config.allowedits=t}get fetchbody(){return this.config.fetchbody}set fetchbody(t){this.config.fetchbody=t}get columnconfigurable(){return this.config.columnconfigurable}set columnconfigurable(t){this.config.columnconfigurable=t}get columnconfigbutton(){return this._columnconfigbutton}set columnconfigbutton(t){this._columnconfigbutton=t}get columnconfigurationicon(){return this.config.columnconfigurationicon}set columnconfigurationicon(t){this.config.columnconfigurationicon=t}get createmethod(){return this.config.createmethod}set createmethod(t){this.config.createmethod=t}get createcallback(){return this.config.createcallback}set createcallback(t){"function"!=typeof t&&console.error("Value provided to createcallback is not a function!"),this.config.createcallback=t}get createhook(){return this.config.createhook}set createhook(t){"function"!=typeof t&&console.error("Value provided to createhook is not a function!"),this.config.createhook=t}get createiteminstructions(){return this.config.createiteminstructions}set createiteminstructions(t){this.config.createiteminstructions=t}get currentsort(){return this._currentsort}set currentsort(t){this._currentsort=t}get deleteiteminstructions(){return this.config.deleteiteminstructions}set deleteiteminstructions(t){this.config.deleteiteminstructions=t}get deletemethod(){return this.config.deletemethod}set deletemethod(t){this.config.deletemethod=t}get duplicatemethod(){return this.config.duplicatemethod}set duplicatemethod(t){this.config.duplicatemethod=t}get duplicatehook(){return this.config.duplicatehook}set duplicatehook(t){"function"!=typeof t&&console.error("Value provided to duplicatehook is not a function!"),this.config.duplicatehook=t}get duplicateiteminstructions(){return this.config.duplicateiteminstructions}set duplicateiteminstructions(t){this.config.duplicateiteminstructions=t}get data(){return this.config.data}set data(t){this.config.data=t}get datainfo(){return this._datainfo||this.buildDataInfo(),this._datainfo}set datainfo(t){this._datainfo=t}get dataprocessor(){return this.config.dataprocessor}set dataprocessor(t){this.config.dataprocessor=t}get defaultsort(){return this.config.defaultsort}set defaultsort(t){this.config.defaultsort=t}get defaultselectedid(){return this.config.defaultselectedid}set defaultselectedid(t){this.config.defaultselectedid=t}get deletehook(){return this.config.deletehook}set deletehook(t){"function"!=typeof t&&console.error("Value provided to deletehook is not a function!"),this.config.deletehook=t}get deletecallback(){return this.config.deletecallback}set deletecallback(t){"function"!=typeof t&&console.error("Value provided to deletecallback is not a function!"),this.config.deletecallback=t}get demphasizeduplicates(){return this.config.demphasizeduplicates}set demphasizeduplicates(t){this.config.demphasizeduplicates=t}get deselectaction(){return this.config.deselectaction}set deselectaction(t){"function"!=typeof t&&console.error("Value provided to deselectaction is not a function!"),this.config.deselectaction=t}get dialog(){return this._dialog}set dialog(t){this._dialog=t}get doubleclick(){return this.config.doubleclick}set doubleclick(t){"function"!=typeof t&&console.error("Value provided to doubleclick is not a function!"),this.config.doubleclick=t}get edititeminstructions(){return this.config.edititeminstructions}set edititeminstructions(t){this.config.edititeminstructions=t}get elementname(){return this.config.elementname}set elementname(t){this.config.elementname=t}get extraelements(){return this.config.extraelements}set extraelements(t){this.config.extraelements=t}get exportable(){return this.config.exportable}set exportable(t){this.config.exportable=t}get exportarrayseparator(){return this.config.exportarrayseparator}set exportarrayseparator(t){this.config.exportarrayseparator=t}get exportbutton(){return this._exportbutton}set exportbutton(t){this._exportbutton=t}get exportfilename(){return this.config.exportfilename}set exportfilename(t){this.config.exportfilename=t}get exportheaderrow(){return this.config.exportheaderrow}set exportheaderrow(t){this.config.exportheaderrow=t}get exporticon(){return this.config.exporticon}set exporticon(t){this.config.exporticon=t}get fields(){return this.config.fields}set fields(t){this.config.fields=t}get filterable(){return this.config.filterable}set filterable(t){this.config.filterable=t}get filterbutton(){return this._filterbutton}set filterbutton(t){this._filterbutton=t}get filterbuttonicon(){return this.config.filterbuttonicon}set filterbuttonicon(t){this.config.filterbuttonicon=t}get filterinfo(){return this._filterinfo||this.buildFilterInfo(),this._filterinfo}set filterinfo(t){this._filterinfo=t}get filtertags(){return this._filtertags}set filtertags(t){this._filtertags=t}get footer(){return this._footer||this.buildFooter(),this._footer}set footer(t){this._footer=t}get formsuccess(){return this.config.formsuccess}set formsuccess(t){"function"!=typeof t&&console.error("Value provided to formsuccess is not a function!"),this.config.formsuccess=t}get grid(){return this._grid||this.buildGrid(),this._grid}set grid(t){this._grid=t}get gridbody(){return this._gridbody||this.buildGridBody(),this._gridbody}set gridbody(t){this._gridbody=t}get gridheader(){return this._gridheader||this.buildGridHeader(),this._gridheader}set gridheader(t){this._gridheader=t}get gridwrapper(){return this._gridwrapper}set gridwrapper(t){this._gridwrapper=t}get headercells(){return this._headercells||(this._headercells={}),this._headercells}set headercells(t){this._headercells=t}get id(){return this.config.id}set id(t){this.config.id=t}get identifier(){return this._identifier}set identifier(t){this._identifier=t}get instructionsicon(){return this.config.instructionsicon}set instructionsicon(t){this.config.instructionsicon=t}get itemslabel(){return this.config.itemslabel}set itemslabel(t){this.config.itemslabel=t}get masterselector(){return this._masterselector}set masterselector(t){this._masterselector=t}get multiselect(){return this.config.multiselect}set multiselect(t){this.config.multiselect=t}get multiselectbutton(){return this._multiselectbutton}set multiselectbutton(t){this._multiselectbutton=t}get multiselecticon(){return this.config.multiselecticon}set multiselecticon(t){this.config.multiselecticon=t}get multiselectactions(){return this.config.multiselectactions}set multiselectactions(t){this.config.multiselectactions=t}get messagebox(){return this._messagebox}set messagebox(t){this._messagebox=t}get mouseover(){return this.config.mouseover}set mouseover(t){"function"!=typeof t&&console.error("Value provided to mouseover is not a function!"),this.config.mouseover=t}get mouseout(){return this.config.mouseout}set mouseout(t){"function"!=typeof t&&console.error("Value provided to mouseout is not a function!"),this.config.mouseout=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get nodeselectself(){return this.config.nodeselectself}set nodeselectself(t){this.config.nodeselectself=t}get onpostprocess(){return this.config.onpostprocess}set onpostprocess(t){"function"!=typeof t&&console.error("Value provided to onpostprocess is not a function!"),this.config.onpostprocess=t}get passiveeditinstructions(){return this.config.passiveeditinstructions}set passiveeditinstructions(t){this.config.passiveeditinstructions=t}get rowactions(){return this.config.rowactions}set rowactions(t){this.config.rowactions=t}get rowactionsicon(){return this.config.rowactionsicon}set rowactionsicon(t){this.config.rowactionsicon=t}get screen(){return this.config.screen}set screen(t){this.config.screen=t}get searchable(){return this.config.searchable}set searchable(t){this.config.searchable=t}get searchcontrol(){return this._searchcontrol}set searchcontrol(t){this._searchcontrol=t}get searchplaceholder(){return this.config.searchplaceholder}set searchplaceholder(t){this.config.searchplaceholder=t}get selectable(){return this.config.selectable}set selectable(t){this.config.selectable=t}get selectaction(){return this.config.selectaction}set selectaction(t){"function"!=typeof t&&console.error("Value provided to selectaction is not a function!"),this.config.selectaction=t}get selectedrow(){return this._selectedrow}set selectedrow(t){this._selectedrow=t}get shade(){return this._shade||this.buildShade(),this._shade}set shade(t){this._shade=t}get showfooter(){return this.config.showfooter}set showfooter(t){this.config.showfooter=t}get showinfo(){return this.config.showinfo}set showinfo(t){this.config.showinfo=t}get sortable(){return this.config.sortable}set sortable(t){this.config.sortable=t}get source(){return this.config.source}set source(t){this.config.source=t}get sourcemethod(){return this.config.sourcemethod}set sourcemethod(t){this.config.sourcemethod=t}get sorticon(){return this.config.sorticon}set sorticon(t){this.config.sorticon=t}get spinnerstyle(){return this.config.spinnerstyle}set spinnerstyle(t){this.config.spinnerstyle=t}get spinnertext(){return this.config.spinnertext}set spinnertext(t){this.config.spinnertext=t}get thead(){return this._thead||this.buildTableHead(),this._thead}set thead(t){this._thead=t}get updatecallback(){return this.config.updatecallback}set updatecallback(t){"function"!=typeof t&&console.error("Value provided to updatecallback is not a function!"),this.config.updatecallback=t}get updatehook(){return this.config.updatehook}set updatehook(t){"function"!=typeof t&&console.error("Value provided to updatehook is not a function!"),this.config.updatehook=t}get updatemethod(){return this.config.updatemethod}set updatemethod(t){this.config.updatemethod=t}get warehouse(){return this.config.warehouse}set warehouse(t){this.config.warehouse=t}}window.DataGrid=DataGrid;class DataList extends DataGrid{static get DEFAULT_CONFIG(){return{statesaveprefix:"datalist",noentriestext:TextFactory.get("datalist-noentries"),specialsort:null,columnconfigurable:!1,collapsible:!1,astable:!1,exportable:!1,startsort:"title",startsortdirection:"asc",filterable:!1,multiselect:!1,loadcallback:null,onpostload:null,drawitem:(t,e)=>{},click:(t,e,i)=>{},mouseover:(t,e,i)=>{},mouseout:(t,e,i)=>{},doubleclick:null}}constructor(t){t||(t={}),(t=Object.assign({},DataList.DEFAULT_CONFIG,t)).id||(t.id=`datalist-${CFBUtils.getUniqueKey(5)}`),super(t)}get displaytype(){return"datalist"}get gridwrapper(){return this.datalist}get gridbody(){return this.datalist}get multiselecting(){return this.multiselect}finalize(){this.shade.activate()}fillData(t){this.activity(!0),this.warehouse?this.warehouse.load((e=>{this.update(e),this.postLoad(),this.activity(!1),t&&"function"==typeof t&&t()})):this.source?this.fetchData(this.source,(e=>{this.update(e),this.postLoad(),this.shade.deactivate(),this.activity(!1),t&&"function"==typeof t&&t()})):this.data&&(this.populate(),this.activity(!1),t&&"function"==typeof t&&t())}setHeaderState(t="name",e="asc"){let i=this.listheader.querySelector(`[data-column='${t}']`);if(this.astable)for(let t of this.listheader.querySelectorAll("th"))t.removeAttribute("data-sorted");else for(let t of this.listheader.querySelectorAll("div.label"))t.removeAttribute("data-sorted");this.listheader.setAttribute("data-sort-field",t),this.listheader.setAttribute("data-sort-direction",e),i&&i.setAttribute("data-sorted",e)}grindstate(){let t={minimized:!1,fields:{},filters:[],selected:this.selectedrow,search:null};return this.state&&this.state.sort?t.sort=this.state.sort:t.sort=this.defaultsort,t}update(t){if(this.data=[],t)for(let e of t)this.data.push(e);this.populate(this.state.sort.column,this.state.sort.direction),this.loadcallback&&"function"==typeof this.loadcallback&&this.loadcallback(),this.postLoad()}postLoad(){this.applystate(),this.onpostload&&"function"==typeof this.onpostload&&this.onpostload(this)}populate(t=(this.startsort?this.startsort:"title"),e=(this.startsortdirection?this.startsortdirection:"asc")){let i=1,s=this.sortOn(this.data,t,e);if(this.datalist.innerHTML="",0===s.length){let t=document.createElement("li");return t.classList.add("noentriestext"),t.innerHTML=`<div class="noentries">${this.noentriestext}</div>`,void this.datalist.appendChild(t)}this.setHeaderState(t,e);for(let t of s){let e=i+1,n=i-1;n<1&&(n=1),e>s.length&&(e=s.length);let a=this.drawitem(t);null!==a&&(t.id&&(a.setAttribute("data-item-id",t.id),a.setAttribute("data-id",t.id)),this.elementProcess(a,t),this.datalist.appendChild(a),i++)}this.postProcess()}elementProcess(t,e){this.click&&"function"==typeof this.click?(t.classList.add("clickable"),t.setAttribute("tabindex","0"),t.addEventListener("click",(i=>{this.selectable&&this.select(t,i,e),this.click&&"function"==typeof this.click&&this.click(e,this,i)}))):this.selectable&&this.selectaction&&"function"==typeof this.selectaction&&(t.classList.add("clickable"),t.setAttribute("tabindex","0"),t.addEventListener("click",(i=>{this.select(t,i,e),"true"===t.getAttribute("aria-selected")?this.selectaction&&"function"==typeof this.selectaction&&this.selectaction(this,t,e):this.deselectaction&&"function"==typeof this.deselectaction&&this.deselectaction(this,t,e)}))),this.mouseover&&"function"==typeof this.mouseover&&t.addEventListener("mouseover",(t=>{this.mouseover&&"function"==typeof this.mouseover&&this.mouseover(e,this,t)})),this.mouseout&&"function"==typeof this.mouseout&&t.addEventListener("mouseout",(t=>{this.mouseout&&"function"==typeof this.mouseout&&this.mouseout(e,this,t)})),t.addEventListener("keyup",(e=>{switch(e.key){case"Escape":this.close();break;case"ArrowUp":e.preventDefault();let i=this.datalist.querySelector(`[data-order='${previous}']`);i&&i.focus();break;case"ArrowDown":e.preventDefault();let s=this.datalist.querySelector(`[data-order='${next}']`);s&&s.focus();break;case"Enter":case" ":t.click()}}))}sortOn(t,e="name",i="asc"){if(this.specialsort&&"function"==typeof this.specialsort)return this.specialsort(t,e,i,this);let s=[],n=[];for(let e of t)e.nosort?s.push(e):n.push(e);return s.sort(((t,s)=>{let n=t[e],a=s[e];if("string"==typeof n&&(n=n.toLowerCase()),"string"==typeof a&&(a=a.toLowerCase()),"asc"===i){if(n>a)return 1;if(n<a)return-1}else{if(a>n)return 1;if(a<n)return-1}return 0})),n.sort(((t,s)=>{let n=t[e],a=s[e];if("string"==typeof n&&(n=n.toLowerCase()),"string"==typeof a&&(a=a.toLowerCase()),"asc"===i){if(n>a)return 1;if(n<a)return-1}else{if(a>n)return 1;if(a<n)return-1}return 0})),this.currentsort||(this.currentsort={}),this.currentsort.field=e,this.currentsort.direction=i,[].concat(s).concat(n)}openItem(t){}postProcess(){this.onpostprocess&&"function"==typeof this.onpostprocess&&this.onpostprocess(this),this.updateCount(),this.showinfo&&this.searchable&&this.search(this.searchcontrol.value)}applyFilters(){}buildContainer(){if(this.container=document.createElement("div"),this.container.classList.add("datalist-container"),this.title&&this.container.appendChild(this.header),this.filterable&&this.container.appendChild(this.filterinfo),this.showinfo&&this.container.appendChild(this.datainfo),this.astable){let t=document.createElement("div"),e=document.createElement("table");t.classList.add("tablewrapper"),e.appendChild(this.listheader),e.appendChild(this.datalist),t.appendChild(e),this.container.appendChild(t)}else this.container.appendChild(this.listheader),this.container.appendChild(this.datalist);this.messagebox=document.createElement("div"),this.messagebox.classList.add("messages"),this.messagebox.classList.add("hidden"),this.container.appendChild(this.messagebox);for(let t of this.classes)this.container.classList.add(t);this.showfooter&&this.container.appendChild(this.footer),this.container.onscroll=()=>{this.container.scrollTop>0?this.container.classList.add("scrolled"):this.container.classList.remove("scrolled")}}buildListHeader(){let t=document.createElement(this.astable?"tr":"div");this.astable?(this.listheader=document.createElement("thead"),this.listheader.appendChild(t)):this.listheader=t,t.classList.add("listheader"),t.setAttribute("data-sort-field","title"),t.setAttribute("data-sort-direction","asc");for(let e of this.columns){let i=document.createElement(this.astable?"th":"div");if(e.field&&i.classList.add(e.field),e.display&&i.classList.add(e.display),e.data)for(let t of e.data)i.setAttribute(t.k,t.v);"spacer"!==e.field?(e.identifier&&i.setAttribute("data-identifier","true"),i.setAttribute("data-column",e.field),i.classList.add("label"),i.innerHTML=`<label>${e.label}</label>`,i.addEventListener("click",(()=>{let t="asc";this.listheader.getAttribute("data-sort-field")&&this.listheader.getAttribute("data-sort-field")===e.field&&this.listheader.getAttribute("data-sort-direction")&&"asc"===this.listheader.getAttribute("data-sort-direction")&&(t="desc"),this.state.sort.column=e.field,this.state.sort.direction=t,this.persist(),this.populate(e.field,t)})),t.appendChild(i)):(i.classList.add("spacer","mechanical"),i.classList.add(`size-${e.type}`),this.astable&&(i.innerHTML="&nbsp;"),t.appendChild(i))}}buildDataList(){this.astable?this.datalist=document.createElement("tbody"):this.datalist=document.createElement("ul"),this.datalist.classList.add("datalist")}get astable(){return this.config.astable}set astable(t){this.config.astable=t}get click(){return this.config.click}set click(t){"function"!=typeof t&&console.error("Value provided to click is not a function!"),this.config.click=t}get doubleclick(){return this.config.doubleclick}set doubleclick(t){"function"!=typeof t&&console.error("Value provided to doubleclick is not a function!"),this.config.doubleclick=t}get columns(){return this.config.columns}set columns(t){this.config.columns=t}get drawitem(){return this.config.drawitem}set drawitem(t){this.config.drawitem=t}get mouseover(){return this.config.mouseover}set mouseover(t){"function"!=typeof t&&console.error("Value provided to mouseover is not a function!"),this.config.mouseover=t}get mouseout(){return this.config.mouseout}set mouseout(t){"function"!=typeof t&&console.error("Value provided to mouseout is not a function!"),this.config.mouseout=t}get noentriestext(){return this.config.noentriestext}set noentriestext(t){this.config.noentriestext=t}get library(){return this.config.library}set library(t){this.config.library=t}get datalist(){return this._datalist||this.buildDataList(),this._datalist}set datalist(t){this._datalist=t}get listheader(){return this._listheader||this.buildListHeader(),this._listheader}set listheader(t){this._listheader=t}get loadcallback(){return this.config.loadcallback}set loadcallback(t){this.config.loadcallback=t}get onpostload(){return this.config.onpostload}set onpostload(t){this.config.onpostload=t}get specialsort(){return this.config.specialsort}set specialsort(t){this.config.specialsort=t}get startsort(){return this.config.startsort}set startsort(t){this.config.startsort=t}get startsortdirection(){return this.config.startsortdirection}set startsortdirection(t){this.config.startsortdirection=t}}window.DataList=DataList;class FilterConfigurator{static get DEFAULT_CONFIG(){return{id:null,classes:[],filters:[],fields:[],mute:!1,instructions:TextFactory.get("datagrid-filter-instructions")}}constructor(t){t||(t={}),this.config=Object.assign({},FilterConfigurator.DEFAULT_CONFIG,t),this.id||(this.id=`fconfig-${CFBUtils.getUniqueKey(5)}`),this.workingfilters={}}getField(t){let e;for(let i of this.fields)if(i.name===t){e=i;break}return e}grindFilters(){let t=this.elements.querySelectorAll("li.filterline"),e=[];for(let i of t){let t=this.checkValidity(i);t&&e.push(t)}this.filters=e}checkValidity(t){t.setAttribute("data-valid","false");let e,i=t.getAttribute("data-filterid"),s=t.querySelector(`input[name="primeselector-${i}"]:checked`),n=t.querySelector(`input[name="comparator-${i}"]:checked`),a=t.querySelector(`input[name="valuefield-${i}"]`);if(s&&n&&a){let o=!1,r=s.value,c=n.value,l=a.value;r&&c&&l&&(o=!0),o&&(t.setAttribute("data-valid","true"),e={filterid:i,field:r,comparator:c,value:l},this.workingfilters[i]=e)}return e}buildContainer(){if(this.container=document.createElement("div"),this.container.classList.add("filter-configurator"),this.instructions&&this.container.appendChild(new InstructionBox({instructions:[this.instructions]}).container),this.actions=document.createElement("div"),this.actions.classList.add("filter-actions"),this.actions.appendChild(new SimpleButton({icon:"cfb-plus",text:TextFactory.get("filter-configurator-add_filter"),action:()=>{this.elements.querySelectorAll('[data-field="unset"]').length<1&&this.addFilter()}}).button),this.container.appendChild(this.actions),this.elements=document.createElement("ul"),this.elements.classList.add("filter-list"),this.filters)for(let t of this.filters)this.addFilter(t);this.container.appendChild(this.elements)}addFilter(t){let e=document.createElement("li"),i=`f-tmp-${CFBUtils.getUniqueKey(5)}`;if(e.classList.add("filterline"),e.setAttribute("data-filterid",i),e.setAttribute("data-valid","false"),t){let s=this.getField(t.field);e.setAttribute("data-field",t.field),e.appendChild(this.makePrimeSelector(i,t.field).container),e.appendChild(this.makeComparatorSelector(i,s,t.comparator).container),e.appendChild(this.makeValueSelector(i,s,t.value).container),this.workingfilters[i]=t,e.setAttribute("data-valid","true")}else e.appendChild(this.makePrimeSelector(i).container),e.setAttribute("data-field","unset");let s=document.createElement("div");s.classList.add("validmarker"),s.appendChild(IconFactory.icon("checkmark-circle")),e.appendChild(s),e.appendChild(new SimpleButton({icon:"minus",shape:"square",classes:["filterkiller"],action:()=>{e.getAttribute("data-field")&&"unset"!==e.getAttribute("data-field")&&delete this.workingfilters[e.getAttribute("data-filterid")],e.parentNode.removeChild(e)}}).button),this.elements.appendChild(e)}makePrimeSelector(t,e){let i=[];for(let t of this.fields)t.filterable&&i.push({value:t.name,label:t.label});let s=new SelectMenu({minimal:!0,options:i,name:`primeselector-${t}`,value:e,mute:this.mute,placeholder:TextFactory.get("comparator-select_field"),classes:["primeselector"],onchange:e=>{let i=e.container.parentElement,n=i.querySelector("div.validmarker"),a=i.querySelector("div.select-container.comparator"),o=i.querySelector("div.input-container.valueinput"),r=this.getField(s.value);i.setAttribute("data-valid","false"),a&&i.removeChild(a),o&&i.removeChild(o),r&&(i.setAttribute("data-field",r.name),i.insertBefore(this.makeComparatorSelector(t,r).container,n),i.insertBefore(this.makeValueSelector(t,r).container,n),this.checkValidity(i))}});return s}makeComparatorSelector(t,e,i){let s="contains",n=e.getComparators();switch(e.type){case"date":case"time":case"number":case"enumeration":s="equals"}i&&(s=i);let a=new SelectMenu({options:n,placeholder:TextFactory.get("comparator-comparator"),value:s,name:`comparator-${t}`,minimal:!0,mute:this.mute,classes:["comparator"],onchange:t=>{let e=t.container.parentElement;this.checkValidity(e)}});return a.container.setAttribute("data-field",e.name),a}makeValueSelector(t,e,i){let s={value:i,name:`valuefield-${t}`,minimal:!0,mute:this.mute,classes:["valueinput"],onchange:t=>{let e=t.container.parentElement;this.checkValidity(e)}},n=e.getElement(i,s);return n.container.setAttribute("data-field",e.name),n}toString(){return CFBUtils.getConfig(this)}get actions(){return this._actions}set actions(t){this._actions=t}get applyfiltersbutton(){return this._applyfiltersbutton}set applyfiltersbutton(t){this._applyfiltersbutton=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get elements(){return this._elements}set elements(t){this._elements=t}get fields(){return this.config.fields}set fields(t){this.config.fields=t}get filters(){return this.config.filters}set filters(t){this.config.filters=t}get id(){return this.config.id}set id(t){this.config.id=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get workingfilters(){return this._workingfilters}set workingfilters(t){this._workingfilters=t}}window.FilterConfigurator=FilterConfigurator;class GridField{static get DEFAULT_CONFIG(){return{name:null,label:null,readonly:!1,hidden:!1,hidewhenpassive:!1,identifier:!1,type:"string",options:[],separator:", ",placeholder:null,preamble:null,maxlength:null,lightbox:!0,minnumber:null,maxnumber:null,nodupe:!1,resize:!1,mute:!1,required:!1,counter:null,description:null,classes:[],filterable:!1,renderer:null}}static get COMPARATORS(){return{startswith:TextFactory.get("comparator-startswith"),endswith:TextFactory.get("comparator-endswith"),contains:TextFactory.get("comparator-contains"),notcontains:TextFactory.get("comparator-notcontains"),equals:TextFactory.get("comparator-equals"),doesnotequal:TextFactory.get("comparator-doesnotequal"),isbefore:TextFactory.get("comparator-isbefore"),isafter:TextFactory.get("comparator-isafter"),isgreaterthan:TextFactory.get("comparator-greaterthan"),islessthan:TextFactory.get("comparator-lessthan")}}static getComparatorLabel(t){return GridField.COMPARATORS[t]}constructor(t){this.config=Object.assign({},GridField.DEFAULT_CONFIG,t),this.setRenderer()}setRenderer(){switch(this.type){case"number":this.renderer||(this.renderer=t=>document.createTextNode(t));break;case"date":case"time":this.renderer||(this.renderer=t=>t?document.createTextNode(t.toString()):document.createTextNode(""));break;case"boolean":this.renderer||(this.renderer=t=>"number"==typeof t?t>0?document.createTextNode("True"):document.createTextNode("False"):t?document.createTextNode("True"):document.createTextNode("False"));break;case"url":this.renderer||(this.renderer=t=>{let e=document.createElement("a");return e.setAttribute("href",t),e.innerHTML=t,e});break;case"imageurl":this.renderer||(this.lightbox?this.renderer=t=>{let e=document.createElement("img");e.setAttribute("src",t);let i=document.createElement("a");return i.appendChild(e),i.addEventListener("click",(()=>{let e=document.createElement("img");e.setAttribute("src",t),new DialogWindow({lightbox:!0,title:this.label,content:e}).open()})),i}:this.renderer=t=>{let e=document.createElement("img");e.setAttribute("src",t);let i=document.createElement("a");return i.setAttribute("href",t),i.appendChild(e),i});break;case"email":this.renderer||(this.renderer=t=>{let e=document.createElement("a");return e.setAttribute("href",`mailto:${t}`),e.innerHTML=t,e});break;case"enumeration":this.renderer||(this.renderer=t=>document.createTextNode(this.getValue(t)));break;case"paragraph":this.renderer||(this.renderer=t=>(t||(t=""),document.createTextNode(t)));break;case"stringarray":this.renderer||(this.renderer=t=>Array.isArray(t)?document.createTextNode(t.join(this.separator)):document.createTextNode(t));break;case"string":default:this.renderer||(this.renderer=t=>t&&null!=t?document.createTextNode(t):document.createTextNode(""))}}getValue(t){let e;if(this.options&&this.options.length>0)for(let i of this.options)if(i.value===t){e=i.label;break}return e}getElement(t,e){let i;if(e||(e={name:this.name,label:this.label,disabled:this.readonly,help:this.description,placeholder:this.placeholder,mute:this.mute,counter:this.counter,options:this.options,maxlength:this.maxlength,hidewhenpassive:this.hidewhenpassive,required:this.required,preamble:this.preamble,maxnumber:this.maxnumber,minnumber:this.minnumber,classes:this.classes,value:t,renderer:this.renderer}),this.hidden)return new HiddenField(e);switch(this.type){case"number":i=new NumberInput(e);break;case"date":case"time":i=new DateInput(e);break;case"enumeration":e.options=this.options,i=new SelectMenu(e);break;case"boolean":i=new BooleanToggle(e);break;case"timezone":delete e.options,i=new TimezoneMenu(e);break;case"url":case"imageurl":i=new URIInput(e);break;case"image":i=new ImageSelector(e);break;case"email":i=new EmailInput(e);break;case"paragraph":i=new TextArea(e);break;case"stringarray":i=new TextInput(e);break;case"string":default:i=new TextInput(e)}return i}getComparators(){let t;switch(this.type){case"number":t=[{value:"equals",checked:!0,label:GridField.getComparatorLabel("equals")},{value:"doesnotequal",label:GridField.getComparatorLabel("doesnotequal")},{value:"isgreaterthan",label:GridField.getComparatorLabel("isgreaterthan")},{value:"islessthan",label:GridField.getComparatorLabel("islessthan")}];break;case"date":case"time":t=[{value:"equals",checked:!0,label:GridField.getComparatorLabel("equals")},{value:"doesnotequal",label:GridField.getComparatorLabel("doesnotequal")},{value:"isbefore",label:GridField.getComparatorLabel("isbefore")},{value:"isafter",label:GridField.getComparatorLabel("isafter")}];break;case"boolean":case"enumeration":t=[{value:"equals",checked:!0,label:GridField.getComparatorLabel("equals")},{value:"doesnotequal",label:GridField.getComparatorLabel("doesnotequal")}];break;case"url":case"imageurl":case"email":case"paragraph":case"stringarray":case"string":default:t=[{value:"contains",label:GridField.getComparatorLabel("contains")},{value:"notcontains",label:GridField.getComparatorLabel("notcontains")},{value:"equals",label:GridField.getComparatorLabel("equals")},{value:"doesnotequal",label:GridField.getComparatorLabel("doesnotequal")},{value:"startswith",label:GridField.getComparatorLabel("startswith")},{value:"endswith",label:GridField.getComparatorLabel("endswith")}]}return t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get counter(){return this.config.counter}set counter(t){this.config.counter=t}get description(){return this.config.description}set description(t){this.config.description=t}get filterable(){return this.config.filterable}set filterable(t){this.config.filterable=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get hidewhenpassive(){return this.config.hidewhenpassive}set hidewhenpassive(t){this.config.hidewhenpassive=t}get identifier(){return this.config.identifier}set identifier(t){this.config.identifier=t}get label(){return this.config.label}set label(t){this.config.label=t}get lightbox(){return this.config.lightbox}set lightbox(t){this.config.lightbox=t}get options(){return this.config.options}set options(t){this.config.options=t}get maxlength(){return this.config.maxlength}set maxlength(t){this.config.maxlength=t}get maxnumber(){return this.config.maxnumber}set maxnumber(t){this.config.maxnumber=t}get minnumber(){return this.config.minnumber}set minnumber(t){this.config.minnumber=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get name(){return this.config.name}set name(t){this.config.name=t}get nodupe(){return this.config.nodupe}set nodupe(t){this.config.nodupe=t}get placeholder(){return this.config.placeholder}set placeholder(t){this.config.placeholder=t}get preamble(){return this.config.preamble}set preamble(t){this.config.preamble=t}get readonly(){return this.config.readonly}set readonly(t){this.config.readonly=t}get renderer(){return this.config.renderer}set renderer(t){"function"!=typeof t&&console.error("Value provided to renderer is not a function!"),this.config&&(this.config.renderer=t)}get required(){return this.config.required}set required(t){this.config.required=t}get resize(){return this.config.resize}set resize(t){this.config.resize=t}get separator(){return this.config.separator}set separator(t){this.config.separator=t}get type(){return this.config.type}set type(t){this.config.type=t}}window.GridField=GridField;class DatePicker{static get DEFAULT_CONFIG(){return{startdate:null,value:null,timezone:"GMT",timepicker:!1,basetime:"12:00:00",locale:"en-US",weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],onselect:null,classes:[]}}static get DOCUMETATION(){return{classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},startdate:{type:"option",datatype:"date",description:"The date to start the calendar on. Can also be a readable string."},value:{type:"option",datatype:"date",description:"The date to preselect. Can also be a readable string."},onselect:{type:"option",datatype:"function",description:"A function to be called on selection. Passed the date selected, as a string."}}}constructor(t){t||(t={}),this.config=Object.assign({},DatePicker.DEFAULT_CONFIG,t)}getMonthName(t){return this.months[t]}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("datepicker");for(let t of this.classes)this.container.classList.add(t);this.container.addEventListener("click",(t=>{t.stopPropagation()})),this.container.appendChild(this.monthbox),this.timepicker&&(this.timeinput=new TimeInput({mute:!0}),this.container.appendChild(this.timeinput.container))}buildMonthBox(){this.monthbox=document.createElement("div"),this.monthbox.classList.add("monthbox"),this.renderMonth(this.startdate)}renderMonth(t){let e=new Date,i=new Date(`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${this.basetime}`);t&&DateInput.isValid(t)?"string"==typeof t&&(t=new Date(`${t} ${this.basetime}`),this.value=t,this.startdate=t):t=i;let s=new Date(t.getFullYear(),t.getMonth()).getDay(),n=32-new Date(t.getFullYear(),t.getMonth(),32).getDate(),a=new Date(t.getFullYear(),t.getMonth()-1),o=new Date(a.getFullYear(),a.getMonth(),0).getDate(),r=new Date(t.getFullYear(),t.getMonth()+1),c=document.createElement("div");c.classList.add("month");let l=document.createElement("div");l.classList.add("datepicker-header");let d=new SimpleButton({shape:"square",mute:!0,size:"small",icon:"triangle-left",action:t=>{t.preventDefault(),this.renderMonth(a)}}),u=new SimpleButton({shape:"square",mute:!0,size:"small",icon:"triangle-right",action:t=>{t.preventDefault(),this.renderMonth(r)}}),h=document.createElement("div");h.classList.add("name"),h.innerHTML=`${this.getMonthName(t.getMonth())}, ${t.getFullYear()}`,l.appendChild(h),l.appendChild(d.button),l.appendChild(u.button),c.appendChild(l);let p=document.createElement("table");p.classList.add("month");let f=document.createElement("thead"),m=document.createElement("tr");for(let t of this.weekdays){let e=document.createElement("th");e.innerHTML=t.charAt(0),new ToolTip({tipicon:"",classes:["unfixed"],text:t}).attach(e),m.appendChild(e)}f.appendChild(m),p.appendChild(f);let g=document.createElement("tbody"),b=1,y=1,A=o-s,v=0;for(let e=0;e<=5;e++){let e=document.createElement("tr");for(let o=0;o<=6;o++){let o,c=document.createElement("td"),l=document.createElement("a");l.setAttribute("data-cellno",v),v>=s&&b<=n?(l.innerHTML=b,l.classList.add("cmonth"),l.setAttribute("data-day",`${t.getFullYear()}-${t.getMonth()+1}-${b}`),o=new Date(`${t.getFullYear()}-${t.getMonth()+1}-${b} ${this.basetime}`),b++):v<s?(l.innerHTML=A,o=new Date(`${a.getFullYear()}-${a.getMonth()+1}-${A} ${this.basetime}`),l.setAttribute("data-day",`${a.getFullYear()}-${a.getMonth()+1}-${A}`),A++):(o=new Date(`${r.getFullYear()}-${r.getMonth()+1}-${y} ${this.basetime}`),l.innerHTML=y,l.setAttribute("data-day",`${r.getFullYear()}-${r.getMonth()+1}-${y}`),y++),l.addEventListener("click",(t=>{t.stopPropagation(),this.select(l)})),l.addEventListener("keydown",(t=>{let e=parseInt(l.getAttribute("data-cellno"))-1,i=parseInt(l.getAttribute("data-cellno"))+1;switch(t.key){case"ArrowLeft":case"ArrowUp":let s=g.querySelector(`[data-cellno='${e}'`);s&&s.focus(),t.stopPropagation();break;case"ArrowRight":case"ArrowDown":let n=g.querySelector(`[data-cellno='${i}'`);n&&n.focus(),t.stopPropagation();break;case"Enter":case" ":this.select(l),t.stopPropagation()}return!1})),l.setAttribute("aria-label",l.getAttribute("data-day")),l.setAttribute("tabindex",0),o.getTime()===i.getTime()?l.classList.add("today"):o.getTime()<i.getTime()?l.classList.add("past"):o.getTime()>i.getTime()&&l.classList.add("future"),this.value&&this.startdate.getFullYear()===o.getFullYear()&&this.startdate.getMonth()===o.getMonth()&&this.startdate.getDate()===o.getDate()&&l.setAttribute("aria-selected",!0),c.appendChild(l),e.appendChild(c),v++}g.appendChild(e)}p.appendChild(g),c.appendChild(p),this.monthbox.innerHTML="",this.monthbox.appendChild(c)}select(t){this.startdate=new Date(t.getAttribute("data-day")),this.onselect&&"function"==typeof this.onselect&&this.onselect(t.getAttribute("data-day"))}get basetime(){return this.config.basetime}set basetime(t){this.config.basetime=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get id(){return this.config.id}set id(t){this.config.id=t}get locale(){return this.config.locale}set locale(t){this.config.locale=t}get monthbox(){return this._monthbox||this.buildMonthBox(),this._monthbox}set monthbox(t){this._monthbox=t}get months(){return this.config.months}set months(t){this.config.months=t}get onselect(){return this.config.onselect}set onselect(t){this.config.onselect=t}get startdate(){return this.config.startdate}set startdate(t){this.config.startdate=t}get timeinput(){return this._timeinput}set timeinput(t){this._timeinput=t}get timepicker(){return this.config.timepicker}set timepicker(t){this.config.timepicker=t}get timezone(){return this.config.timezone}set timezone(t){this.config.timezone=t}get weekdays(){return this.config.weekdays}set weekdays(t){this.config.weekdays=t}get value(){return this.config.value}set value(t){this.config.value=t}}window.DatePicker=DatePicker;class DialogWindow{static get DEFAULT_CONFIG(){return{id:null,form:null,actions:null,content:null,nocontentwrap:!1,onclose:null,onopen:null,screen:document.body,classes:[],header:null,lightbox:!1,title:null,trailer:null,clickoutsidetoclose:!0,escapecloses:!0,nofocus:!1,canceltext:TextFactory.get("cancel"),closetext:TextFactory.get("close"),showclose:!0}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The dialog object will have this as it's id."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},form:{type:"option",datatype:"simpleform",description:"If present, displays and renders the form as its content. If not, uses the value of <code>content</code>."},actions:{type:"option",datatype:"array",description:"An array of actions. Can be SimpleButtons or keyword strings. Only used if form is null (actions exist on SimpleForm objects as well).  Possible keywords:  closebutton, cancelbutton"},screen:{type:"option",datatype:"domobject",description:"The DOM element to load the dialog into.  Defaults to the body."},content:{type:"option",datatype:"domobject",description:"This is the content of the dialog.  Ignored if provided a <code>form</code>."},nocontentwrap:{type:"option",datatype:"boolean",description:"If true, do not wrap supplied content objects inside a 'content' div."},header:{type:"option",datatype:"domobject",description:"DOM object, will be used if passed before title."},title:{type:"option",datatype:"string",description:"Adds a title to the dialog if present. header must be null."},trailer:{type:"option",datatype:"domobject",description:"Adds a trailing chunk of DOM.  Can be provided a full dom object or a string.  If it's a string, it creates a div at the bottom with the value of the text."},canceltext:{type:"option",datatype:"string",description:"Text used for cancel buttons provided as keywords."},closetext:{type:"option",datatype:"string",description:"Text used for close buttons provided as keywords."},onclose:{type:"option",datatype:"function",description:"What to do when closing. Passed (self) as an argument."},lightbox:{type:"option",datatype:"boolean",description:"For image types, if true, open the image in a lightbox."},clickoutsidetoclose:{type:"option",datatype:"boolean",description:"Allow the window to be closed by clicking outside."},escapecloses:{type:"option",datatype:"boolean",description:"Allow the window to be closed by the escape key."},nofocus:{type:"option",datatype:"boolean",description:"If true, do not auto focus anything."},showclose:{type:"option",datatype:"boolean",description:"Show or hide the CloseButton in the corner."}}}constructor(t){this.config=Object.assign({},DialogWindow.DEFAULT_CONFIG,t),this.id||(this.id=`dialog-${CFBUtils.getUniqueKey(5)}`)}open(){this.initialized||this.build(),CFBUtils.closeOpen(),this.prevfocus=document.querySelector(":focus"),this.mask=document.createElement("div"),this.mask.classList.add("window-mask"),this.screen!==document.body&&(this.mask.classList.add("screened"),this.container.classList.add("screened"));for(let t of this.classes)this.mask.classList.add(t);if(this.mask.addEventListener("click",(t=>{t.preventDefault(),this.clickoutsidetoclose&&this.close()})),this.container.appendChild(this.window),this.trailer&&"string"==typeof this.trailer){let t=document.createElement("div");t.classList.add("trailer"),t.innerHTML=this.trailer,this.container.appendChild(t)}else this.trailer&&this.container.appendChild(this.trailer);this.screen.appendChild(this.mask),this.screen.appendChild(this.container),this.screen.classList.add("modalopen"),this.escapelistener=t=>{"Escape"===t.key&&this.close()},setTimeout((()=>{if(!this.nofocus){let t=this.contentbox.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t[0]&&t[0].focus()}this.escapecloses&&document.addEventListener("keyup",this.escapelistener),this.onopen&&"function"==typeof this.onopen&&this.onopen(this)}),100)}close(){this.container.parentNode&&(this.container.parentNode.removeChild(this.container),this.mask.parentNode.removeChild(this.mask),this.mask.classList.remove("screened"),this.container.classList.remove("screened"),this.prevfocus&&this.prevfocus.focus(),this.screen.classList.remove("modalopen"),this.screen.removeEventListener("keyup",this.escapelistener),this.onclose&&"function"==typeof this.onclose&&this.onclose(this))}escape(t,e){"Escape"===t.key&&e.close()}setContent(t){this.nocontentwrap?(this.contentbox.remove(),this.contentbox=t,this.contentbox.classList.add("content"),this.title||this.header?this.header.after(this.contentbox):this.window.prepend(this.contentbox)):(this.contentbox.innerHTML="",this.content=t,this.contentbox.appendChild(this.content))}build(){this.container=document.createElement("div"),this.container.classList.add("window-container"),this.window=document.createElement("div"),this.window.classList.add("dialog"),this.window.setAttribute("id",this.id);for(let t of this.classes)this.container.classList.add(t),this.window.classList.add(t);if(this.lightbox&&(this.container.classList.add("lightbox"),this.window.classList.add("lightbox")),this.title||this.header){if(!this.header){this.header=document.createElement("h2");let t=document.createElement("span");t.classList.add("t"),t.innerHTML=this.title,this.header.appendChild(t)}this.window.appendChild(this.header)}if(this.showclose&&(this.closebutton=new CloseButton({action:t=>{t.preventDefault(),this.close()}}),this.title||this.header?this.header.appendChild(this.closebutton.button):(this.window.classList.add("noheader"),this.window.appendChild(this.closebutton.button))),this.form){if(this.form.dialog=this,this.actions&&this.actions.length>0)for(let t of this.actions)if("string"==typeof t)switch(t){case"closebutton":this.form.actions.push(new SimpleButton({text:this.closetext,mute:!0,classes:["closebutton"],action:()=>{this.close()}}));break;case"cancelbutton":this.form.actions.push(new DestructiveButton({text:this.canceltext,mute:!0,classes:["cancelbutton"],action:()=>{this.close()}}))}else this.form.actions.push(t);this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.contentbox.appendChild(this.form.form),this.window.classList.add("isform"),this.window.appendChild(this.contentbox)}else if(this.content&&(this.nocontentwrap?(this.contentbox=this.content,this.contentbox.classList.add("content"),this.window.appendChild(this.contentbox)):(this.contentbox=document.createElement("div"),this.contentbox.classList.add("content"),this.contentbox.appendChild(this.content),this.window.appendChild(this.contentbox)),this.actions&&this.actions.length>0)){this.actionbox=document.createElement("div"),this.actionbox.classList.add("actions");for(let t of this.actions)if("string"==typeof t)switch(t){case"closebutton":this.actionbox.appendChild(new SimpleButton({text:this.closetext,mute:!0,action:()=>{this.close()}}).container);break;case"cancelbutton":this.actionbox.appendChild(new DestructiveButton({text:this.canceltext,mute:!0,action:()=>{this.close()}}).container)}else this.actionbox.appendChild(t.container);this.window.appendChild(this.actionbox)}this.initialized=!0}toString(){return CFBUtils.getConfig(this)}get actionbox(){return this._actionbox}set actionbox(t){this._actionbox=t}get actions(){return this.config.actions}set actions(t){this.config.actions=t}get canceltext(){return this.config.canceltext}set canceltext(t){this.config.canceltext=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get clickoutsidetoclose(){return this.config.clickoutsidetoclose}set clickoutsidetoclose(t){this.config.clickoutsidetoclose=t}get closebutton(){return this._closebutton}set closebutton(t){this._closebutton=t}get closetext(){return this.config.closetext}set closetext(t){this.config.closetext=t}get container(){return this._container}set container(t){this._container=t}get content(){return this.config.content}set content(t){this.config.content=t}get contentbox(){return this._contentbox}set contentbox(t){this._contentbox=t}get escapecloses(){return this.config.escapecloses}set escapecloses(t){this.config.escapecloses=t}get escapelistener(){return this._escapelistener}set escapelistener(t){this._escapelistener=t}get form(){return this.config.form}set form(t){this.config.form=t}get header(){return this.config.header}set header(t){this.config.header=t}get id(){return this.config.id}set id(t){this.config.id=t}get initialized(){return this._initialized}set initialized(t){this._initialized=t}get lightbox(){return this.config.lightbox}set lightbox(t){this.config.lightbox=t}get mask(){return this._mask}set mask(t){this._mask=t}get nocontentwrap(){return this.config.nocontentwrap}set nocontentwrap(t){this.config.nocontentwrap=t}get nofocus(){return this.config.nofocus}set nofocus(t){this.config.nofocus=t}get onclose(){return this.config.onclose}set onclose(t){this.config.onclose=t}get onopen(){return this.config.onopen}set onopen(t){this.config.onopen=t}get prevfocus(){return this._prevfocus}set prevfocus(t){this._prevfocus=t}get screen(){return this.config.screen}set screen(t){this.config.screen=t}get showclose(){return this.config.showclose}set showclose(t){this.config.showclose=t}get title(){return this.config.title}set title(t){this.config.title=t}get trailer(){return this.config.trailer}set trailer(t){this.config.trailer=t}get window(){return this._window}set window(t){this._window=t}}window.DialogWindow=DialogWindow;class FloatingPanel extends Panel{static get DEFAULT_CONFIG(){return{style:"plain",position:"top-left"}}static get DOCUMENTATION(){return{position:{type:"option",datatype:"enumeration",description:"Position for the panel. Valid values: (top-center|bottom-center|top-right|bottom-right|bottom-left|top-left)"}}}constructor(t){(t=Object.assign({},FloatingPanel.DEFAULT_CONFIG,t)).classes?t.classes.push("floating"):t.classes=["floating"],t.classes.push(t.position),t.classes.push(t.style),super(t)}get position(){return this.config.position}set position(t){this.config.position=t}get style(){return this.config.style}set style(t){this.config.style=t}}window.FloatingPanel=FloatingPanel;class Toast extends FloatingPanel{static get DEFAULT_CONFIG(){return{text:null,closeicon:"echx",duration:4e3,icon:null,position:"bottom-right"}}static get DOCUMENTATION(){return{icon:{type:"option",datatype:"string",description:"The icon to use in the toast."},closeicon:{type:"option",datatype:"string",description:"The icon to use in the toast's CloseButton."},iconclasses:{type:"option",datatype:"stringarray",description:"An array of css classes to apply to the icon."},text:{type:"option",datatype:"string",description:"The toast payload"},duration:{type:"option",datatype:"number",description:"Length of time in milliseconds to display. If 0 or negative, stays open."}}}static get GROWLBOX_ID(){return"gbox-"}static growl(t,e){return new Toast({text:t,title:e})}static error(t){return new Toast({text:t,title:TextFactory.get("error"),icon:"warn-hex",classes:["error"]})}static warn(t){return new Toast({text:t,title:TextFactory.get("warning"),icon:"warn-triangle",classes:["warn"]})}static caution(t){return new Toast({text:t,title:TextFactory.get("caution"),icon:"warn-circle",classes:["caution"]})}static success(t){return new Toast({text:t,title:TextFactory.get("success"),icon:"check-circle",classes:["success"]})}static buildGrowlbox(t){let e=document.createElement("div");return e.classList.add("growlbox"),e.setAttribute("id",`${Toast.GROWLBOX_ID}${t}`),e.classList.add(t),document.querySelector("body").appendChild(e),e}constructor(t){super(t=Object.assign({},Toast.DEFAULT_CONFIG,t)),this.growlbox=document.getElementById(`${Toast.GROWLBOX_ID}${this.position}`),this.growlbox||(this.growlbox=Toast.buildGrowlbox(this.position)),this.show()}close(){this.timer&&clearTimeout(this.timer),this.container.setAttribute("aria-hidden","true"),setTimeout((()=>{this.onclose&&"function"==typeof this.onclose&&this.onclose(me),this.container.parentNode.removeChild(this.container)}),100)}quickClose(){this.timer&&clearTimeout(this.timer),this.container.parentNode.removeChild(this.container),this.onclose&&"function"==typeof this.onclose&&this.onclose(this)}show(){this.container.removeAttribute("aria-hidden"),this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration)),this.onopen&&"function"==typeof this.onopen&&this.onopen(this)}buildContainer(){this.container=document.createElement("div"),this.container.setAttribute("aria-hidden","true"),this.container.classList.add("toast");for(let t of this.classes)this.container.classList.add(t);if(this.closebutton=new CloseButton({action:t=>{t.preventDefault(),this.quickClose()}}),this.title){let t=document.createElement("h3"),e=document.createElement("span");e.classList.add("text"),e.innerHTML=this.title,t.appendChild(e),t.appendChild(this.closebutton.button),this.container.appendChild(t)}else this.container.appendChild(this.closebutton.button);if(this.text){let t=document.createElement("div");if(t.classList.add("payload"),this.icon){let e=IconFactory.icon(this.icon);e.classList.add("i"),t.appendChild(e)}let e=document.createElement("div");e.classList.add("text"),e.innerHTML=this.text,t.appendChild(e),this.container.appendChild(t)}this.growlbox.appendChild(this.container)}toString(){return CFBUtils.getConfig(this)}get closebutton(){return this._closebutton}set closebutton(t){this._closebutton=t}get duration(){return this.config.duration}set duration(t){this.config.duration=t}get growlbox(){return this._growlbox}set growlbox(t){this._growlbox=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get text(){return this.config.text}set text(t){this.config.text=t}get timer(){return this._timer}set timer(t){this._timer=t}}window.Toast=Toast;class RadialProgressMeter extends SimpleProgressMeter{static get DEFAULT_CONFIG(){return{numberposition:"center",badge:null,stinger:null,size:"medium",style:"solid",segments:null,strokewidth:null}}static get DOCUMENTATION(){return{numberposition:{type:"option",datatype:"enumeration",description:"Where to display the badge and stinger. Values: center, bottomleft, bottomright, topleft, topright"},badge:{type:"option",datatype:"number",description:"The central number to show. If left empty, it will display the percentage."},stinger:{type:"option",datatype:"string",description:"Text to display below the main badge."},size:{type:"option",datatype:"enumeration",description:"Can be one of several values or metrics. Accepts: 'small', 'medium', 'large', 'huge' as strings; Numbers in pixels and ems, as strings ('300px' or '5em'). If given a number, assumes pixels"},style:{type:"option",datatype:"enumeration",description:"'solid' or 'ticks'. If set to 'ticks', disables any 'segments' value."},segments:{type:"option",datatype:"number",description:"Displays tick marks in the circle. Takes a number; this is the number of divisions. If you want segments of 10%, set it.to 10.  If you want segments of 25%, set it to 4."},strokewidth:{type:"option",datatype:"number",description:"If provided, the stroke will be this wide. If not provided, the width will be 5% of the circle's whole size"}}}constructor(t){super(t=Object.assign({},RadialProgressMeter.DEFAULT_CONFIG,t)),this.calculateSize(),this.strokewidth||(this.strokewidth=.07*this.actualsize),"ticks"===this.style&&(this.segments=null),this.radius=this.actualsize/2-2*this.strokewidth,this.circumference=2*this.radius*Math.PI}calculateSize(){if("number"==typeof this.size)this.actualsize=this.size;else if(this.size.toLowerCase().endsWith("px"))this.actualsize=parseInt(this.size),isNaN(this.actualsize)&&(console.error(`RadialProgressMeter: provided invalid size: ${this.size}`),this.actualsize=200);else if(this.size.toLowerCase().endsWith("em"))this.actualsize=CFBUtils.getSingleEmInPixels()*parseInt(this.size),isNaN(this.actualsize)&&(console.error(`RadialProgressMeter: provided invalid size: ${this.size}`),this.actualsize=200);else switch(this.size){case"small":this.actualsize=100;break;case"large":this.actualsize=400;break;case"huge":this.actualsize=800;break;case"medium":default:this.actualsize=200}this.actualsize>=800?this.sizeclass="huge":this.actualsize>=400?this.sizeclass="large":this.actualsize>=200?this.sizeclass="medium":this.actualsize>=100?this.sizeclass="small":this.sizeclass="tiny"}setProgress(t){const e=this.circumference-t/100*this.circumference;let i=this.container.querySelector(".radialcircle");if(i.style.strokeDasharray=`${this.circumference} ${this.circumference}`,i.style.strokeDashoffset=e,this.segments){let t=2*this.segments,e=(2*this.radius*Math.PI-t)/this.segments,i=this.container.querySelector(".tickmarks");i.style.strokeDasharray=`2px ${e}px`,i.style.strokeDashoffset=0}}circleTemplate(t){let e=document.createElement("circle");return e.classList.add(t),e.setAttribute("stroke-width",this.strokewidth),e.setAttribute("r",this.radius),e.setAttribute("cx",this.actualsize/2),e.setAttribute("cy",this.actualsize/2),e}buildContainer(){this.container=document.createElement("div"),this.container.classList.add(this.sizeclass),this.container.classList.add("progressbar-container"),this.label&&this.container.appendChild(this.labelobj);let t=document.createElement("div");t.classList.add("circlewrap"),t.style.width=`${this.actualsize}`,t.style.height=`${this.actualsize}`;let e=document.createElement("svg");e.setAttribute("height",this.actualsize),e.setAttribute("width",this.actualsize),e.classList.add("progressgutter"),e.classList.add(this.style),e.appendChild(this.circleTemplate("gutter")),e.appendChild(this.circleTemplate("radialcircle")),(this.segments||"ticks"===this.style)&&e.appendChild(this.circleTemplate("tickmarks")),t.appendChild(e),t.appendChild(this.decallayer),this.container.appendChild(t),this.container.innerHTML=this.container.innerHTML,this.setProgress(0);window.setTimeout((()=>{this.setProgress(this.value)}),500)}buildDecalLayer(){this.badge||(this.badge=`${this.value}<sup>%</sup>`),this.badgeobj=document.createElement("div"),this.badgeobj.classList.add("badge"),this.badgeobj.innerHTML=this.badge,this.stinger&&(this.stingerobj=document.createElement("div"),this.stingerobj.classList.add("stinger"),this.stingerobj.innerHTML=this.stinger),this.decallayer=document.createElement("div"),this.decallayer.classList.add("decals"),this.decallayer.classList.add(this.numberposition),this.decallayer.appendChild(this.badgeobj),this.stinger&&this.decallayer.appendChild(this.stingerobj)}get actualsize(){return this._actualsize}set actualsize(t){this._actualsize=t}get badge(){return this.config.badge}set badge(t){this.config.badge=t}get badgeobj(){return this._badgeobj}set badgeobj(t){this._badgeobj=t}get circumference(){return this._circumference}set circumference(t){this._circumference=t}get numberposition(){return this.config.numberposition}set numberposition(t){this.config.numberposition=t}get radius(){return this._radius}set radius(t){this._radius=t}get size(){return this.config.size}set size(t){this.config.size=t}get sizeclass(){return this._sizeclass}set sizeclass(t){this._sizeclass=t}get stinger(){return this.config.stinger}set stinger(t){this.config.stinger=t}get stingerobj(){return this._stingerobj}set stingerobj(t){this._stingerobj=t}get strokewidth(){return this.config.strokewidth}set strokewidth(t){this.config.strokewidth=t}get style(){return this.config.style}set style(t){this.config.style=t}get segments(){return this.config.segments}set segments(t){this.config.segments=t}get wrap(){return this._wrap}set wrap(t){this._wrap=t}}window.RadialProgressMeter=RadialProgressMeter;class SearchControl{static get DEFAULT_CONFIG(){return{id:null,autoexecute:!0,arialabel:TextFactory.get("searchcontrol-instructions"),stayopen:!1,maxlength:null,searchtext:TextFactory.get("search"),searchicon:"magnify",buttonstyle:"normal",mute:!1,focusin:null,focusout:null,action:(t,e)=>{console.log(`Executing search action: ${t}`)},value:"",classes:[]}}constructor(t){return this.config=Object.assign({},SearchControl.DEFAULT_CONFIG,t),this}get isopen(){return this.container.classList.contains("open")}get value(){return this.searchinput.value}set value(t){this.searchinput.value=t}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("searchcontrol");for(let t of this.classes)this.container.classList.add(t);this.buildSearchInput(),this.container.appendChild(this.searchinput),this.searchbutton=new SimpleButton({text:this.searchtext,icon:this.searchicon,mute:!0,focusin:this.focusin,focusout:this.focusout,action:t=>{t.preventDefault(),this.isopen&&this.action&&"function"==typeof this.action&&this.action(this.value,this)}}),this.container.addEventListener("click",(()=>{this.isopen||this.searchinput.focus()})),this.stayopen&&this.container.classList.add("open"),this.container.appendChild(this.searchbutton.button)}buildSearchInput(){this.searchinput=document.createElement("input"),this.searchinput.setAttribute("type","text"),this.searchinput.setAttribute("role","search"),this.searchinput.setAttribute("tabindex","0"),this.mute&&this.searchinput.classList.add("mute"),this.placeholder&&this.searchinput.setAttribute("placeholder",this.placeholder),this.arialabel&&this.searchinput.setAttribute("aria-label",this.arialabel),this.maxlength&&this.searchinput.setAttribute("maxlength",this.maxlength);for(let t of this.classes)this.searchinput.classList.add(t);this.searchinput.addEventListener("keyup",(t=>{switch(t.key){case"Tab":this.autoexecute&&this.action&&"function"==typeof this.action&&this.action(this.value,this);break;case"Enter":this.action&&"function"==typeof this.action&&this.action(this.value,this);break;default:this.autoexecute&&this.action&&"function"==typeof this.action&&this.action(this.value,this)}})),this.searchinput.addEventListener("focusout",(t=>{this.value&&this.value.length>0||this.stayopen?(this.container.classList.add("open"),this.autoexecute&&this.action&&"function"==typeof this.action&&this.action(this.value,this)):this.container.classList.remove("open"),this.focusout&&"function"==typeof this.focusout&&this.focusout(t,this)})),this.searchinput.addEventListener("focusin",(t=>{this.focusin&&"function"==typeof this.focusin&&this.focusin(t,this)})),this.searchinput.value=this.config.value}toString(){return CFBUtils.getConfig(this)}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get autoexecute(){return this.config.autoexecute}set autoexecute(t){this.config.autoexecute=t}get action(){return this.config.action}set action(t){this.config.action=t}get buttonstyle(){return this.config.buttonstyle}set buttonstyle(t){this.config.buttonstyle=t}get id(){return this.config.id}set id(t){this.config.id=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get focusin(){return this.config.focusin}set focusin(t){"function"!=typeof t&&console.error("Action provided for focusin is not a function!"),this.config.focusin=t}get focusout(){return this.config.focusout}set focusout(t){"function"!=typeof t&&console.error("Action provided for focusout is not a function!"),this.config.focusout=t}get maxlength(){return this.config.maxlength}set maxlength(t){this.config.maxlength=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get placeholder(){return this.config.placeholder}set placeholder(t){this.config.placeholder=t}get searchinput(){return this._searchinput}set searchinput(t){this._searchinput=t}get searchbutton(){return this._searchbutton}set searchbutton(t){this._searchbutton=t}get searchtext(){return this.config.searchtext}set searchtext(t){this.config.searchtext=t}get searchicon(){return this.config.searchicon}set searchicon(t){this.config.searchicon=t}get stayopen(){return this.config.stayopen}set stayopen(t){this.config.stayopen=t}}window.SearchControl=SearchControl;class SimpleForm{static get DEFAULT_CONFIG(){return{id:null,name:null,handler:null,url:null,target:null,action:null,contenttype:"application/json",dialog:null,enctype:null,autocomplete:"off",method:"get",header:null,passive:!1,headers:null,instructions:null,passiveinstructions:null,loadersize:"medium",spinnerstyle:"spin",spinnertext:TextFactory.get("simpleform-spinnertext"),results:null,classes:[],submittors:[],elements:[],actions:[],passiveactions:[],handlercallback:null,onsuccess:null,onfailure:null,onvalid:null,oninvalid:null,novalidate:!1,validator:null}}constructor(t){this.config=Object.assign({},SimpleForm.DEFAULT_CONFIG,t),this.id||(this.id=`form-${CFBUtils.getUniqueKey(5)}`)}get dictionary(){let t={};for(let e of this.activeelements)t[e.name]=e.value;return t}get json(){return this.dictionary}toTop(){this.contentbox.scrollTo(0,0)}reset(){for(let t of this.activeelements)t.reset()}pacify(){this.form.classList.add("passive"),this.passive=!0;for(let t of this.activeelements)t.pacify();this.passiveinstructions&&this.instructionbox&&this.instructionbox.setInstructions(this.passiveinstructions.instructions),this.toTop()}activate(){this.form.classList.remove("passive"),this.passive=!1;for(let t of this.activeelements)t.activate();this.instructions&&this.instructionbox&&this.instructionbox.setInstructions(this.instructions.instructions),this.toTop()}toggleActivation(){this.form.hasClass("passive")?this.activate():this.pacify()}submit(){this.passive||this.validate()&&(this.handler?(this.shade.activate(),"function"==typeof this.handler?this.handler(this,(t=>{this.handlercallback&&"function"==typeof this.handlercallback?(this.handlercallback(this,t),this.shade.deactivate()):this.handleResults(t)})):this.doAjax((t=>{this.handlercallback&&"function"==typeof this.handlercallback?(this.handlercallback(this,t),this.shade.deactivate()):this.handleResults(t)}))):this.url?this.form.submit():this.action?this.action():console.log(`No handler defined for form ${this.id} :: ${this.name}`))}doAjax(t){let e;if("application/x-www-form-urlencoded"===this.contenttype){let t=[];for(let e of this.activeelements)t.push(`${e.name}=${e.value}`);e=t.join("&")}else{let t={};for(let e of this.activeelements)t[e.name]=e.value;e=JSON.stringify(t)}let i=this.headers;i||(i={}),i["Content-Type"]||(i["Content-Type"]=this.contenttype),fetch(this.handler,{headers:i,method:this.method,enctype:this.enctype,body:e}).then((t=>t.json())).then((e=>{t&&"function"==typeof t&&t(e)})).catch((t=>{console.error("Error while executing ajax call."),console.error(t)}))}handleResults(t,e){this.resultscontainer&&this.resultscontainer.remove(),this.resultscontainer=new ResultsContainer({results:t.successes,errors:t.errors,warnings:t.warnings}).container,this.headerbox.appendChild(this.resultscontainer),this.shade.deactivate(),e||(t.success&&this.onsuccess&&"function"==typeof this.onsuccess?this.onsuccess(this,t):this.onfailure&&"function"==typeof this.onfailure&&this.onfailure(this,t))}validate(t=!1){if(this.novalidate)return this.runValid(),!0;let e=!0,i=!1;for(let t of this.activeelements)if(t.touched){i=!0,t.validate()||(e=!1)}else!t.required||null!==t.value&&""!==t.value||(e=!1);return e&&this.validator&&"function"==typeof this.validator&&(e=this.validator(this)),e&&!t?this.runValid():this.runInvalid(),e}runValid(){for(let t of this.submittors)t.enable();this.onvalid&&"function"==typeof this.onvalid&&this.onvalid(this)}runInvalid(){let t=!1;for(let e of this.activeelements)e.hidden||(t=!0);if(t)for(let t of this.submittors)t.disable();this.oninvalid&&"function"==typeof this.oninvalid&&this.oninvalid(this)}buildForm(){this.form=document.createElement("form"),this.form.setAttribute("id",this.id),this.form.setAttribute("novalidate",!0),this.name&&this.form.setAttribute("name",this.name),this.form.setAttribute("method",this.method),this.enctype&&this.form.setAttribute("enctype",this.enctype),this.form.setAttribute("role","form"),this.form.setAttribute("autocomplete",this.autocomplete),this.form.classList.add("cornflowerblue");for(let t of this.classes)this.form.classList.add(t);this.form.addEventListener("submit",(t=>{t.preventDefault(),this.submit()})),this.handler&&"function"!=typeof this.handler&&this.target&&this.form.setAttribute("target",this.target),this.contentbox.appendChild(this.headerbox),this.contentbox.appendChild(this.elementbox),this.form.appendChild(this.shade.container),this.form.appendChild(this.contentbox),this.actions&&this.actions.length>0?this.form.appendChild(this.actionbox):this.form.classList.add("noactions"),this.passiveactions&&this.passiveactions.length>0&&this.form.appendChild(this.passiveactionbox),this.validate(!0),this.passive&&this.pacify()}buildHeaderBox(){this.headerbox=document.createElement("div"),this.headerbox.classList.add("header"),(this.header||this.instructions&&this.instructions.instructions&&this.instructions.instructions.length>0)&&(this.header&&this.headerbox.appendChild(this.header),this.instructions&&this.headerbox.appendChild(this.instructionbox.container)),this.results&&this.handleResults(this.results,!0)}buildInstructionBox(){if(!this.instructions||0===this.instructions.length)return;let t=this.instructions;this.passive&&this.passiveinstructions&&this.passiveinstructions.length>0&&(t=this.passiveinstructions),this.instructionbox=new InstructionBox(t)}buildShade(){this.shade=new LoadingShade({size:this.loadersize,spinnertext:this.spinnertext,spinnerstyle:this.spinnerstyle})}buildElementBox(){this.elementbox=document.createElement("div"),this.elementbox.classList.add("elements");for(let t of this.elements)if("string"==typeof t){let e=document.createElement("p");e.innerHTML=t,this.elementbox.appendChild(e)}else if("object"==typeof t&&t.nodeType&&t.nodeType===Node.ELEMENT_NODE)this.elementbox.appendChild(t);else if("object"==typeof t&&null!==t&&t.section){let e=document.createElement("fieldset");if(e.classList.add("fset"),t.label&&(e.innerHTML=`<legend>${t.label}</legend>`),t.instructions&&e.appendChild(new InstructionBox({icon:t.instructions.icon,instructions:t.instructions.instructions}).container),t.elements)for(let i of t.elements)this.processActiveElement(i,0,e);this.elementbox.appendChild(e)}else this.processActiveElement(t,0)}processActiveElement(t,e=0,i=this.elementbox){t.form=this,"file"===t.type&&(this.form.setAttribute("enctype","multipart/form-data"),this.enctype="multipart/form-data"),!t.id&&t.name?t.id=`${this.id}-${t.name}`:t.id||(t.id=`${this.id}-e-${CFBUtils.getUniqueKey(5)}`),t.container.classList.add("popin"),t.container.style.setProperty("--anim-order",e),e++,this.addElement(t),i.appendChild(t.container)}buildContentBox(){this.contentbox=document.createElement("div"),this.contentbox.classList.add("contentbox")}buildActionBox(){if(this.actions&&this.actions.length>0){this.actionbox=document.createElement("div"),this.actionbox.classList.add("actions");for(let t of this.actions)t.cansubmit&&t.submits&&this.submittors.push(t),t.form=this,this.actionbox.appendChild(t.container)}}buildPassiveActionBox(){if(this.passiveactions&&this.passiveactions.length>0){this.passiveactionbox=document.createElement("div"),this.passiveactionbox.classList.add("passiveactions");for(let t of this.passiveactions)t.cansubmit&&t.submits&&this.submittors.push(t),t.form=this,this.passiveactionbox.appendChild(t.container)}}getElement(t){return this.elementmap[t]}addElement(t){this.elementmap[t.id]=t,this.activeelements.push(t)}toString(){return CFBUtils.getConfig(this)}get action(){return this.config.action}set action(t){this.config.action=t}get actionbox(){return this._actionbox||this.buildActionBox(),this._actionbox}set actionbox(t){this._actionbox=t}get actions(){return this.config.actions}set actions(t){this.config.actions=t}get activeelements(){return this._activeelements||(this._activeelements=[]),this._activeelements}set activeelements(t){this._activeelements=t}get autocomplete(){return this.config.autocomplete}set autocomplete(t){this.config.autocomplete=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this.form}set container(t){this.form=t}get contentbox(){return this._contentbox||this.buildContentBox(),this._contentbox}set contentbox(t){this._contentbox=t}get contenttype(){return this.config.contenttype}set contenttype(t){this.config.contenttype=t}get dialog(){return this.config.dialog}set dialog(t){this.config.dialog=t}get elementbox(){return this._elementbox||this.buildElementBox(),this._elementbox}set elementbox(t){this._elementbox=t}get elementmap(){return this._elementmap||(this._elementmap={}),this._elementmap}set elementmap(t){this._elementmap=t}get elements(){return this.config.elements}set elements(t){this.config.elements=t}get enctype(){return this.config.enctype}set enctype(t){this.config.enctype=t}get form(){return this._form||this.buildForm(),this._form}set form(t){this._form=t}get handler(){return this.config.handler}set handler(t){"function"!=typeof t&&console.error("Action provided for handler is not a function!"),this.config.handler=t}get handlercallback(){return this.config.handlercallback}set handlercallback(t){"function"!=typeof t&&console.error("Action provided for handlercallback is not a function!"),this.config.handlercallback=t}get header(){return this.config.header}set header(t){this.config.header=t}get headerbox(){return this._headerbox||this.buildHeaderBox(),this._headerbox}set headerbox(t){this._headerbox=t}get id(){return this.config.id}set id(t){this.config.id=t}get passive(){return this.config.passive}set passive(t){this.config.passive=t}get passiveactionbox(){return this._passiveactionbox||this.buildPassiveActionBox(),this._passiveactionbox}set passiveactionbox(t){this._passiveactionbox=t}get passiveactions(){return this.config.passiveactions}set passiveactions(t){this.config.passiveactions=t}get passiveinstructions(){return this.config.passiveinstructions}set passiveinstructions(t){this.config.passiveinstructions=t}get headers(){return this.config.headers}set headers(t){this.config.headers=t}get instructionbox(){return this._instructionbox||this.buildInstructionBox(),this._instructionbox}set instructionbox(t){this._instructionbox=t}get instructions(){return this.config.instructions}set instructions(t){this.config.instructions=t}get resultscontainer(){return this._resultscontainer}set resultscontainer(t){this._resultscontainer=t}get method(){return this.config.method}set method(t){this.config.method=t}get name(){return this.config.name}set name(t){this.config.name=t}get loadersize(){return this.config.loadersize}set loadersize(t){this.config.loadersize=t}get novalidate(){return this.config.novalidate}set novalidate(t){this.config.novalidate=t}get onfailure(){return this.config.onfailure}set onfailure(t){"function"!=typeof t&&console.error("Action provided for onfailure is not a function!"),this.config.onfailure=t}get onsuccess(){return this.config.onsuccess}set onsuccess(t){"function"!=typeof t&&console.error("Action provided for onsuccess is not a function!"),this.config.onsuccess=t}get oninvalid(){return this.config.oninvalid}set oninvalid(t){"function"!=typeof t&&console.error("Action provided for oninvalid is not a function!"),this.config.oninvalid=t}get onvalid(){return this.config.onvalid}set onvalid(t){"function"!=typeof t&&console.error("Action provided for onvalid is not a function!"),this.config.onvalid=t}get results(){return this.config.results}set results(t){this.config.results=t}get shade(){return this._shade||this.buildShade(),this._shade}set shade(t){this._shade=t}get spinnerstyle(){return this.config.spinnerstyle}set spinnerstyle(t){this.config.spinnerstyle=t}get spinnertext(){return this.config.spinnertext}set spinnertext(t){this.config.spinnertext=t}get submittors(){return this.config.submittors}set submittors(t){this.config.submittors=t}get target(){return this.config.target}set target(t){this.config.target=t}get url(){return this.config.url}set url(t){this.config.url=t}get validator(){return this.config.validator}set validator(t){"function"!=typeof t&&console.error("Action provided for validator is not a function!"),this.config.validator=t}}window.SimpleForm=SimpleForm;class TabBar{static get DEFAULT_CONFIG(){return{id:null,navigation:!1,responsive:!0,menuicon:"menu",menulabel:TextFactory.get("toggle_menu"),arialabel:TextFactory.get("primary"),submenuicon:"triangle-down",vertical:!1,animation:"popin",tabs:[],action:null,classes:[]}}constructor(t){this.config=Object.assign({},TabBar.DEFAULT_CONFIG,t),this.id||(this.id=`tabbar-${CFBUtils.getUniqueKey(5)}`)}select(t){"string"==typeof t&&(t=document.querySelectorAll(`[data-tabid='${t}']`)[0]),t?(this.selected&&(this.selected.removeAttribute("aria-selected"),this.selected.setAttribute("tabindex","-1")),this.selected=t,this.selected.setAttribute("aria-selected","true"),this.selected.setAttribute("tabindex","0"),this.responsive&&this.menutitle&&(this.menutitle.innerHTML=this.selected.getAttribute("data-tabtext"))):console.warn(`Tab does not exist: ${t}`)}deselectAll(){this.selected&&(this.selected.removeAttribute("aria-selected"),this.selected.setAttribute("tabindex","-1"),this.selected=null)}buildContainer(){this.navigation?(this.container=document.createElement("nav"),this.list.removeAttribute("role"),this.container.setAttribute("aria-label",this.arialabel)):this.container=document.createElement("div"),this.container.classList.add("tablist-container");for(let t of this.classes)this.container.classList.add(t);this.responsive&&(this.responsivebox=document.createElement("div"),this.responsivebox.classList.add("responsivebox"),this.menubutton=new HamburgerButton({text:this.menulabel,toggletarget:this}),this.responsivebox.appendChild(this.menubutton.button),this.menutitle=document.createElement("div"),this.menutitle.classList.add("menutitle"),this.responsivebox.appendChild(this.menutitle),this.container.classList.add("responsive"),this.container.appendChild(this.responsivebox)),this.container.appendChild(this.list)}buildList(){this.list=document.createElement("ul"),this.list.setAttribute("role","tablist"),this.list.classList.add("tabbar");for(let t of this.classes)this.list.classList.add(t);this.vertical&&this.list.classList.add("vertical");let t=1;for(let e of this.tabs)t=this.buildTab(e,t)}buildTab(t,e,i){let s="root",n=e+1,a=e-1;if(a<1&&(a=0),!t.label&&!t.icon)return console.warn("TabBar: Element defined but has neither icon or text.  Skipping"),null;let o=document.createElement("li");if(o.setAttribute("role","none"),o.setAttribute("id",`parent-${t.id}`),o.setAttribute("data-tabno",`${e}`),t.classes)for(let e of t.classes)o.classList.add(e);t.tooltip&&new ToolTip({text:t.tooltip,icon:t.tipicon,gravity:t.tooltipgravity?t.tooltipgravity:"s"}).attach(o);let r=document.createElement("a");if(r.setAttribute("data-tabtext",t.label),r.setAttribute("data-tabno",e),r.setAttribute("id",t.id),r.setAttribute("data-tabid",t.id),r.setAttribute("tabindex","-1"),t.dataattributes&&CFBUtils.applyDataAttributes(t.dataattributes,r),this.navigation||r.setAttribute("role","menuitem"),t.icon&&r.appendChild(IconFactory.icon(t.icon)),t.label){let e=document.createElement("span");e.classList.add("t"),e.innerHTML=t.label,r.appendChild(e)}if(o.appendChild(r),i){s=i.getAttribute("data-tabid");let t=i.querySelector("ul");t||(t=document.createElement("ul"),t.setAttribute("role","menu"),t.classList.add("submenu"),i.appendChild(t)),t.appendChild(o)}else this.animation&&(o.style.setProperty("--anim-order",e),o.classList.add(this.animation)),this.list.appendChild(o);if(r.setAttribute("data-parent",s),o.setAttribute("data-parent",s),e++,t.subtabs&&t.subtabs.length>0){if(r.classList.add("mastertab"),r.setAttribute("aria-haspopup",!0),r.setAttribute("aria-expanded",!1),this.submenuicon){let t=IconFactory.icon(this.submenuicon);t.classList.add("secondicon"),r.appendChild(t)}let e=1;for(let i of t.subtabs)e=this.buildTab(i,e,o);r.addEventListener("keydown",(t=>{let e=o.getAttribute("data-parent"),i=o.parentNode.querySelector(`li[data-parent='${e}'][data-tabno='${a}'] a[data-tabno='${a}']`),s=o.parentNode.querySelector(`li[data-parent='${e}'][data-tabno='${n}'] a[data-tabno='${n}']`);switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),t.stopPropagation(),i&&i.focus();break;case"ArrowRight":t.preventDefault(),t.stopPropagation(),s&&s.focus();break;case"ArrowDown":case"Enter":case"Space":t.preventDefault(),t.stopPropagation();let e=o.querySelector("ul");if(e){e.querySelectorAll("li a")[0].focus()}}}))}else t.url?r.setAttribute("href",t.url):(r.addEventListener("keydown",(t=>{let e,s=o.getAttribute("data-parent"),c=o.parentNode.querySelector(`li[data-parent='${s}'][data-tabno='${a}'] a[data-tabno='${a}']`),l=o.parentNode.querySelector(`li[data-parent='${s}'][data-tabno='${n}'] a[data-tabno='${n}']`);switch(i&&(e=i.querySelector("a")),t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),t.stopPropagation(),0===a&&e?e.focus():c&&c.focus();break;case"ArrowRight":case"ArrowDown":t.preventDefault(),t.stopPropagation(),l&&l.focus();break;case"Escape":t.preventDefault(),t.stopPropagation(),e&&e.focus();break;case"Enter":case"Space":t.preventDefault(),t.stopPropagation(),r.click()}})),r.addEventListener("click",(e=>{e.preventDefault(),this.select(t.id),t.action&&"function"==typeof t.action?t.action(t.id,this):this.action&&this.action(t.id,this),r.blur()})));return t.selected&&window.setTimeout((()=>{this.select(t.id)}),100),e}get isopen(){return this.container.hasAttribute("aria-expanded")}toggle(){this.isopen?this.close():this.open()}open(){this.isopen||(this.container.setAttribute("aria-expanded","true"),this.menubutton&&this.menubutton.open(),setTimeout((()=>{this.setCloseListener()}),200))}close(){this.container.removeAttribute("aria-expanded"),this.menubutton&&this.menubutton.close()}setCloseListener(){document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}),{once:!0}),window.addEventListener("click",(t=>{t.target===this.list?this.setCloseListener():this.close()}),{once:!0})}toString(){return CFBUtils.getConfig(this)}get action(){return this.config.action}set action(t){this.config.action=t}get animation(){return this.config.animation}set animation(t){this.config.animation=t}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get id(){return this.config.id}set id(t){this.config.id=t}get list(){return this._list||this.buildList(),this._list}set list(t){this._list=t}get menuicon(){return this.config.menuicon}set menuicon(t){this.config.menuicon=t}get menulabel(){return this.config.menulabel}set menulabel(t){this.config.menulabel=t}get menubutton(){return this._menubutton}set menubutton(t){this._menubutton=t}get menutitle(){return this._menutitle}set menutitle(t){this._menutitle=t}get navigation(){return this.config.navigation}set navigation(t){this.config.navigation=t}get responsive(){return this.config.responsive}set responsive(t){this.config.responsive=t}get responsivebox(){return this._responsivebox}set responsivebox(t){this._responsivebox=t}get selected(){return this._selected}set selected(t){this._selected=t}get submenuicon(){return this.config.submenuicon}set submenuicon(t){this.config.submenuicon=t}get tabs(){return this.config.tabs}set tabs(t){this.config.tabs=t}get vertical(){return this.config.vertical}set vertical(t){this.config.vertical=t}}window.TabBar=TabBar;class ToolTip{static get DEFAULT_CONFIG(){return{id:null,icon:"help-circle",gravity:"n",iconclasses:[],text:null,parent:null,waittime:1e3,classes:[]}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The tooltip wrapper object will have this as it's id."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},icon:{type:"option",datatype:"string",description:"The icon to use in the tooltip."},iconclasses:{type:"option",datatype:"stringarray",description:"An array of css classes to apply to the icon."},gravity:{type:"option",datatype:"string",description:"The direction to open the tooltip into."},text:{type:"option",datatype:"string",description:"The text to use in the tooltip."},parent:{type:"option",datatype:"object",description:"The parent object this fires off."},waittime:{type:"option",datatype:"number",description:"How long to wait (in milliseconds) before activating."}}}static closeOpen(){clearTimeout(ToolTip.timer),ToolTip.activeTooltip&&(clearTimeout(ToolTip.activeTooltip.timer),ToolTip.activeTooltip.close())}constructor(t){return this.config=Object.assign({},ToolTip.DEFAULT_CONFIG,t),this.id||(this.id=`tt-${CFBUtils.getUniqueKey(5)}`),this}attach(t){t&&(t&&t.container&&(t=t.container),this.parent=t,this.parent.appendChild(this.container),this.parent.setAttribute("data-tooltip","closed"),this.parent.addEventListener("mouseover",(()=>{this.open()})),this.parent.addEventListener("mouseout",(()=>{clearTimeout(ToolTip.timer),this.close()})),this.parent.addEventListener("focusin",(()=>{this.open()})),this.parent.addEventListener("focusout",(()=>{clearTimeout(ToolTip.timer),this.close()})))}open(){ToolTip.closeOpen(),ToolTip.timer=setTimeout((()=>{this.openGuts()}),this.waittime)}openGuts(){if(this.parent.hasAttribute("aria-expanded")&&"true"===this.parent.getAttribute("aria-expanded"))return;ToolTip.closeOpen(),document.body.appendChild(this.container),this.container.removeAttribute("aria-hidden"),ToolTip.activeTooltip,ToolTip.activeTooltip=this,this.setPosition();const t=this;window.addEventListener("scroll",(function e(){t.isopen||window.removeEventListener("scroll",e,!0),t.setPosition()}),!0)}setPosition(){if(!ToolTip.activeTooltip)return;let t=ToolTip.activeTooltip,e=document.body.getBoundingClientRect(),i=t.parent.getBoundingClientRect(),s=i.left-e.left,n=i.top-e.top;switch(this.gravity){case"s":case"south":t.container.style.top=`${n+t.container.clientHeight+CFBUtils.getSingleEmInPixels()/2}px`,t.container.style.left=s-t.container.offsetWidth/2+this.parent.offsetWidth/2+"px";break;case"sw":case"southwest":t.container.style.top=`${n+t.container.clientHeight+CFBUtils.getSingleEmInPixels()/2}px`,t.container.style.left=s-CFBUtils.getSingleEmInPixels()+"px";break;case"w":case"west":t.container.style.top=`${n}px`,t.container.style.left=s-t.container.clientWidth-CFBUtils.getSingleEmInPixels()/2+"px";break;case"e":case"east":t.container.style.top=`${n}px`,t.container.style.left=`${s+t.parent.offsetWidth+CFBUtils.getSingleEmInPixels()/2}px`;break;case"n":case"north":t.container.style.top=n-t.container.clientHeight-CFBUtils.getSingleEmInPixels()/2+"px",t.container.style.left=s-t.container.offsetWidth/2+this.parent.offsetWidth/2+"px";break;case"ne":default:t.container.style.top=n-t.container.clientHeight-CFBUtils.getSingleEmInPixels()/2+"px",t.container.style.left=`${s}px`}}close(){this.parent.appendChild(this.container),this.container.setAttribute("aria-hidden","true"),ToolTip.activeTooltip=null}buildContainer(){switch(this.container=document.createElement("div"),this.container.classList.add("tooltip"),this.container.setAttribute("aria-hidden","true"),this.id&&this.container.setAttribute("id",this.id),this.gravity){case"s":case"south":this.container.classList.add("south");break;case"w":case"west":this.container.classList.add("west");break;case"e":case"east":this.container.classList.add("east");break;case"n":case"north":this.container.classList.add("north");break;case"nw":default:this.container.classList.add("nw")}if(this.classes&&this.classes.length>0)for(let t of this.classes)this.container.classList.add(t);if(this.icon&&""!==this.icon){let t=IconFactory.icon(this.icon);if(t.classList.add("tipicon"),this.iconclasses&&this.iconclasses.length>0)for(let e of this.iconclasses)t.classList.add(e);this.container.appendChild(t)}this.tiptext=document.createElement("div"),this.tiptext.classList.add("tiptext"),this.tiptext.setAttribute("id",`${this.id}-text`),this.text&&(this.tiptext.innerHTML=this.text),this.container.appendChild(this.tiptext)}toString(){return CFBUtils.getConfig(this)}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get gravity(){return this.config.gravity}set gravity(t){this.config.gravity=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get iconclasses(){return this.config.iconclasses}set iconclasses(t){this.config.iconclasses=t}get id(){return this.config.id}set id(t){this.config.id=t}get parent(){return this.config.parent}set parent(t){this.config.parent=t}get text(){return this.config.text}set text(t){this.config.text=t}get timer(){return this._timer}set timer(t){this._timer=t}get tiptext(){return this._tiptext}set tiptext(t){this._tiptext=t}get tooltip(){return this._tooltip}set tooltip(t){this._tooltip=t}get waittime(){return this.config.waittime}set waittime(t){this.config.waittime=t}}window.ToolTip=ToolTip;class InputElement{static get DEFAULT_CONFIG(){return{id:null,attributes:null,dataattributes:null,name:null,form:null,counter:null,forceconstraints:null,type:"text",label:null,placeholder:null,hidewhenpassive:!1,hidewhenactive:!1,hidepassiveifempty:!0,preamble:null,title:null,pattern:null,icon:null,mute:null,vigilant:null,minimal:!1,passive:!1,unsettext:TextFactory.get("not_set"),help:null,size:null,helpwaittime:5e3,required:!1,requiredtext:TextFactory.get("required_lc"),requirederror:TextFactory.get("input-error-required"),hidden:!1,autocomplete:"off",arialabel:null,maxlength:null,value:null,disabled:!1,classes:[],onchange:null,onreturn:null,ontab:null,onkeyup:null,onkeydown:null,focusin:null,focusout:null,validator:null,renderer:t=>document.createTextNode(t)}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The button object will have this as it's id."},dataattributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with data-$key = value on elements."},attributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with $key = value on elements."},form:{type:"option",datatype:"simpleform",description:"A SimpleForm object this element this is in."},arialabel:{type:"option",datatype:"string",description:"The aria-label attribute."},name:{type:"option",datatype:"string",description:"The name attribute for the input element."},label:{type:"option",datatype:"string",description:"Input label. If null, no label will be shown."},title:{type:"option",datatype:"string",description:"The title attribute for the element. Not recommended to be used."},pattern:{type:"option",datatype:"string",description:"Input pattern attribute."},icon:{type:"option",datatype:"string",description:"Use to define a specific icon, used in some specific controls."},minimal:{type:"option",datatype:"boolean",description:"If true, build with the intent that it is part of a larger component. This removes things like the secondary controls and validation boxes."},counter:{type:"option",datatype:"enumeration",description:"A value for a character counter. Null means 'no counter'. Possible values: null, 'remaining', 'limit', and 'sky'."},forceconstraints:{type:"option",datatype:"boolean",description:"If true, force constraints defined in sub classes (many inputs don't have any)."},placeholder:{type:"option",datatype:"string",description:"Input placeholder. Individual fields can calculate this if it's null. To insure a blank placeholder, set the value to ''."},passive:{type:"option",datatype:"boolean",description:"Start life in passive mode."},preamble:{type:"option",datatype:"string",description:"This text will display before the element as additional explanation."},unsettext:{type:"option",datatype:"string",description:"Text to display in passive mode if the value is empty."},help:{type:"option",datatype:"string",description:"Help text that appears in tooltips."},helpwaittime:{type:"option",datatype:"number",description:"How long to wait before automatically showing help tooltip."},required:{type:"option",datatype:"boolean",description:"Is this a required field or not."},hidewhenactive:{type:"option",datatype:"boolean",description:"If true, don't display the element when in active mode."},hidewhenpassive:{type:"option",datatype:"boolean",description:"If true, don't display the element when in passive mode."},hidewhenpassivewhenempty:{type:"option",datatype:"boolean",description:"If true, don't display the element when in passive mode, but only do this if there is no value."},requiredtext:{type:"option",datatype:"string",description:"Text to display on required items."},requirederror:{type:"option",datatype:"string",description:"The error message to display if required item isn't filled."},hidden:{type:"option",datatype:"boolean",description:"Whether or not to bea hidden element."},autocomplete:{type:"option",datatype:"boolean",description:"Enable browser autocomplete. Default is off."},maxlength:{type:"option",datatype:"number",description:"If set, applies a maxlength to the element."},value:{type:"option",datatype:"string",description:"Value to use for the element."},disabled:{type:"option",datatype:"boolean",description:"If true, disable the field."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},onchange:{type:"option",datatype:"function",description:"The change handler. Passed (self)."},onreturn:{type:"option",datatype:"function",description:"The action to execute on hitting the return key. Passed (event, self) as arguments."},ontab:{type:"option",datatype:"function",description:"The action to execute on hitting the tab key. Passed (event, self) as arguments."},onkeyup:{type:"option",datatype:"function",description:"The action to execute on key up. Passed (event, self) as arguments."},onkeydown:{type:"option",datatype:"function",description:"The action to execute on key down. Passed (event, self) as arguments."},focusin:{type:"option",datatype:"function",description:"The action to execute on focus in. Passed (event, self) as arguments."},focusout:{type:"option",datatype:"function",description:"The action to execute on focus out. Passed (event, self) as arguments."},validator:{type:"option",datatype:"function",description:"A function to run to test validity. Passed the self as arguments."},renderer:{type:"option",datatype:"function",description:"A function that can be used to format the in the field in passive mode."}}}constructor(t){t||(t={}),this.config=Object.assign({},InputElement.DEFAULT_CONFIG,t),t.hidepassiveifempty&&(t.classes||(t.classes=[]),t.classes.push("hidepassiveifempty")),this.arialabel||(this.label?this.arialabel=this.label:this.title&&(this.arialabel=this.title)),this.id||(this.id=`e-${CFBUtils.getUniqueKey(5)}`),this.name||(this.name=this.id),this.origval=this.config.value,this.touched=!1}get inputmode(){return"text"}get topcontrol(){return this.charactercounter}get inputcontrol(){return null}get naked(){return this.input}get hascontainer(){return!!this._container}get haspassivebox(){return!!this._passivebox}get initialvalue(){return this.config.value}setCursorPosition(t){CFBUtils.setCursorPosition(this.input,t)}reset(){this.value=this.origval,this.haspassivebox&&(this.passivebox.innerHTML="",this.passivebox.appendChild(this.passivetext))}isDirty(){return this.origval!==this.value}validate(t){return this.errors=[],this.warnings=[],t||!this.required||this.value&&0!==this.value.length||this.errors.push(this.requirederror),this.localValidator&&"function"==typeof this.localValidator&&this.localValidator(t),this.validator&&"function"==typeof this.validator&&this.validator(this),this.errors.length>0||this.warnings.length>0?(this.hascontainer&&(this.showMessages(),this.container.classList.remove("valid")),this.input.removeAttribute("aria-invalid"),this.errors.length>0&&this.input.setAttribute("aria-invalid","true")):(this.input.removeAttribute("aria-invalid"),this.hascontainer&&(this.clearMessages(),!this.value||this.value&&0===this.value.length?(this.container.classList.remove("valid"),this.container.classList.remove("filled")):this.isDirty()&&!t?(this.container.classList.add("valid"),this.container.classList.add("filled")):this.value?(this.container.classList.remove("valid"),this.container.classList.add("filled")):this.container.classList.remove("valid"))),this.errors.length<1}localValidator(t){}showMessages(){this.messagebox.innerHTML="",0===this.errors.length&&0===this.warnings.length&&(this.container.classList.remove("error"),this.container.classList.remove("warning"),this.messagebox.setAttribute("aria-hidden","true"));for(let t of this.errors)this.addError(t);for(let t of this.warnings)this.addWarning(t);this.errors.length>0?this.container.classList.add("error"):this.warnings.length>0&&this.container.classList.add("warning"),this.messagebox.removeAttribute("aria-hidden")}clearMessages(){this.errors=[],this.warnings=[],this.messagebox.innerHTML="",this.messagebox.setAttribute("aria-hidden","true"),this.container.classList.remove("error"),this.container.classList.remove("warning")}addError(t){let e=document.createElement("li");e.classList.add("error"),e.innerHTML=t,this.messagebox.appendChild(e)}addWarning(t){let e=document.createElement("li");e.classList.add("warning"),e.innerHTML=t,this.messagebox.appendChild(e)}updateCounter(){if(!this.counter)return;let t;t="limit"===this.counter?TextFactory.get("input-counter-limit",this.value.length,this.maxlength):"sky"===this.counter?TextFactory.get("input-counter-sky",this.value.length):TextFactory.get("input-counter-remaining",this.maxlength-this.value.length),this.charactercounter.innerHTML=t,this.maxlength&&this.value.length>=this.maxlength?this.charactercounter.classList.add("outofbounds"):"sky"!==this.counter&&this.value.length>=.9*this.maxlength?(this.charactercounter.classList.remove("outofbounds"),this.charactercounter.classList.add("danger")):(this.charactercounter.classList.remove("danger"),this.charactercounter.classList.remove("outofbounds"))}calculatePlaceholder(){return""}disable(){this.input.setAttribute("disabled","true"),this.disabled=!0,this.hascontainer&&this.container.classList.add("disabled")}enable(){this.input.removeAttribute("disabled"),this.disabled=!1,this.hascontainer&&this.container.classList.remove("disabled")}pacify(){this.hascontainer&&(this.container.removeAttribute("aria-hidden"),this.haspassivebox&&(this.passivebox.innerHTML="",this.passivebox.appendChild(this.passivetext)),this.hidewhenpassive&&this.container.setAttribute("aria-hidden",!0),!this.hidepassiveifempty||this.value&&""!==this.value||this.container.setAttribute("aria-hidden",!0),this.container.classList.add("passive"),this.passive=!0)}activate(){this.hascontainer&&(this.container.removeAttribute("aria-hidden"),this.container.classList.remove("passive"),this.passive=!1,this.hidewhenactive&&this.container.setAttribute("aria-hidden",!0))}toggleActivation(){this.hascontainer&&(this.container.classList.contains("passive")?this.activate():this.pacify())}get passivetext(){let t;return this.value?t=this.value:this.config.value&&(t=this.config.value),t?this.renderer?this.renderer(t):document.createTextNode(t):document.createTextNode(this.unsettext)}buildContainer(){if(this.container=document.createElement("div"),this.container.classList.add("input-container"),this.name&&this.container.classList.add(`name-${this.name}`),this.classes)for(let t of this.classes)this.container.classList.add(t);if(this.preamble){let t=document.createElement("p");t.classList.add("preamble"),t.innerHTML=this.preamble,this.container.appendChild(t)}this.topline=document.createElement("div"),this.topline.classList.add("topline"),this.label&&this.topline.appendChild(this.labelobj),this.topcontrol&&this.topline.appendChild(this.topcontrol),this.container.appendChild(this.topline);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.input),this.inputcontrol&&t.appendChild(this.inputcontrol),this.container.appendChild(t),this.minimal||(this.container.appendChild(this.passivebox),this.container.appendChild(this.messagebox)),this.minimal&&this.container.classList.add("minimal"),this.postContainerScrub()}postContainerScrub(){this.required&&(this.container.classList.add("required"),this.input.setAttribute("required","required")),this.mute&&this.container.classList.add("mute"),this.vigilant&&this.container.classList.add("vigilant"),this.disabled&&this.container.classList.add("disabled"),this.hidden&&(this.container.style.display="none",this.container.setAttribute("aria-hidden","true")),this.config.value&&this.config.value.length>0&&this.container.classList.add("filled"),this.passive?this.pacify():this.activate(),this.help&&(this.input.setAttribute("aria-describedby",`${this.id}-help-tt`),this.input.setAttribute("aria-labelledby",`${this.id}-label`)),this.validate(!0)}buildPassiveBox(){this.passivebox=document.createElement("div"),this.passivebox.classList.add("passivebox"),this.passivebox.appendChild(this.passivetext)}buildInput(){if("textarea"===this.type?this.input=document.createElement("textarea"):this.input=document.createElement("input"),this.input.setAttribute("type",this.type),this.input.setAttribute("id",this.id),this.input.setAttribute("name",this.name),this.input.setAttribute("inputmode",this.inputmode),this.input.setAttribute("aria-describedby",`msg-${this.id}`),this.input.setAttribute("role","textbox"),this.input.setAttribute("tabindex","0"),this.size&&this.input.setAttribute("size",this.size),this.mute&&!this.vigilant?this.input.setAttribute("placeholder",""):this.input.setAttribute("placeholder",this.placeholder),this.title&&this.input.setAttribute("title",this.title),this.arialabel&&this.input.setAttribute("aria-label",this.arialabel),this.autocomplete&&this.input.setAttribute("autocomplete",this.autocomplete),this.pattern&&this.input.setAttribute("pattern",this.pattern),this.maxlength&&this.input.setAttribute("maxlength",this.maxlength),this.classes)for(let t of this.classes)this.input.classList.add(t);this.onchange&&this.input.addEventListener("change",(()=>{this.onchange&&"function"==typeof this.onchange&&this.onchange(this)})),this.input.addEventListener("paste",(()=>{this.input.removeAttribute("aria-invalid"),this.hascontainer&&this.updateCounter(),this.touched=!0,this.form&&this.required&&(0===this.input.value.length||this.input.value.length>=1)&&this.form&&this.form.validate()})),this.input.addEventListener("keydown",(t=>{this.input.removeAttribute("aria-invalid"),this.hascontainer&&this.updateCounter(),this.touched=!0,this.onkeydown&&"function"==typeof this.onkeydown&&this.onkeydown(t,this)})),this.input.addEventListener("keyup",(t=>{this.config.value=this.value,this.hascontainer&&(this.helptimer&&(clearTimeout(this.helptimer),this.helpbutton&&this.helpbutton.closeTooltip()),this.value&&this.value.length>0?this.container.classList.add("filled"):this.container.classList.remove("filled"),this.form&&(0===this.input.value.length||this.input.value.length>=1)&&this.form&&this.form.validate()),"Enter"===t.key&&this.onreturn&&"function"==typeof this.onreturn?(t.preventDefault(),t.stopPropagation(),this.onreturn(t,this)):"Tab"===t.key&&this.ontab&&"function"==typeof this.ontab?this.ontab(t,this):this.onkeyup&&"function"==typeof this.onkeyup&&this.onkeyup(t,this)})),this.input.addEventListener("focusin",(t=>{this.mute&&!this.vigilant&&this.placeholder&&this.placeholder!==this.label&&this.input.setAttribute("placeholder",this.placeholder),this.hascontainer&&(this.container.classList.add("active"),this.help&&this.helpbutton&&(this.helptimer=setTimeout((()=>{this.helpbutton.openTooltip()}),this.helpwaittime))),this.focusin&&"function"==typeof this.focusin&&this.focusin(t,this)})),this.input.addEventListener("focusout",(t=>{this.hascontainer&&(this.passivebox&&(this.passivebox.innerHTML="",this.passivebox.appendChild(this.passivetext)),this.helptimer&&(clearTimeout(this.helptimer),this.helpbutton&&this.helpbutton.closeTooltip()),this.mute&&!this.vigilant&&this.label&&this.input.setAttribute("placeholder",""),this.container.classList.remove("active"),this.validate(),this.form&&this.form.validate()),this.focusout&&"function"==typeof this.focusout&&this.focusout(t,this)})),this.input.value=this.initialvalue,this.required&&(this.input.setAttribute("required","true"),this.hascontainer&&this.label&&this.labelobj.setAttribute("data-required-text",`${this.requiredtext}`)),CFBUtils.applyDataAttributes(this.attributes,this.input),CFBUtils.applyDataAttributes(this.dataattributes,this.input),this.mute&&this.input.classList.add("mute"),this.vigilant&&this.input.classList.add("vigilant"),this.hidden&&this.input.setAttribute("hidden","hidden"),this.disabled&&this.disable(),this.icon&&this.input.classList.add(`cfb-${this.icon}`)}buildLabel(){if(!this.label)return null;if(this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.setAttribute("id",`${this.id}-label`),this.labelobj.innerHTML=this.label,this.form&&this.labelobj.setAttribute("form",this.form.id),this.help)if(this.mute){let t=document.createElement("span");t.classList.add("mutehelp"),t.innerHTML=this.help,this.labelobj.appendChild(t)}else this.helpbutton=new HelpButton({id:`${this.id}-help`,tooltip:this.help}),this.labelobj.appendChild(this.helpbutton.button)}buildMessagebox(){this.messagebox=document.createElement("ul"),this.messagebox.setAttribute("id",`msg-${this.id}`),this.messagebox.classList.add("messagebox")}buildCharacterCounter(){this.counter&&(this.charactercounter=document.createElement("div"),this.charactercounter.classList.add("charcounter"),this.charactercounter.classList.add("topcontrol"),this.charactercounter.classList.add(this.counter),(!this.maxlength||this.maxlength<=0)&&(this.counter="sky"),this.updateCounter())}toString(){return CFBUtils.getConfig(this)}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get attributes(){return this.config.attributes}set attributes(t){this.config.attributes=t}get autocomplete(){return this.config.autocomplete}set autocomplete(t){this.config.autocomplete=t}get charactercounter(){return this._charactercounter||this.buildCharacterCounter(),this._charactercounter}set charactercounter(t){this._charactercounter=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get counter(){return this.config.counter}set counter(t){this.config.counter=t}get dataattributes(){return this.config.dataattributes}set dataattributes(t){this.config.dataattributes=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get helptimer(){return this._helptimer}set helptimer(t){this._helptimer=t}get messagebox(){return this._messagebox||this.buildMessagebox(),this._messagebox}set messagebox(t){this._messagebox=t}get errors(){return this._errors}set errors(t){this._errors=t}get focusin(){return this.config.focusin}set focusin(t){"function"!=typeof t&&console.error("Action provided for focusin is not a function!"),this.config.focusin=t}get focusout(){return this.config.focusout}set focusout(t){"function"!=typeof t&&console.error("Action provided for focusout is not a function!"),this.config.focusout=t}get form(){return this.config.form}set form(t){this.config.form=t}get forceconstraints(){return this.config.forceconstraints}set forceconstraints(t){this.config.forceconstraints=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get help(){return this.config.help}set help(t){this.config.help=t}get helpbutton(){return this._helpbutton}set helpbutton(t){this._helpbutton=t}get helpwaittime(){return this.config.helpwaittime}set helpwaittime(t){this.config.helpwaittime=t}get hidewhenactive(){return this.config.hidewhenactive}set hidewhenactive(t){this.config.hidewhenactive=t}get hidewhenpassive(){return this.config.hidewhenpassive}set hidewhenpassive(t){this.config.hidewhenpassive=t}get hidepassiveifempty(){return this.config.hidepassiveifempty}set hidepassiveifempty(t){this.config.hidepassiveifempty=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get id(){return this.config.id}set id(t){this.config.id=t}get input(){return this._input||this.buildInput(),this._input}set input(t){this._input=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get maxlength(){return this.config.maxlength}set maxlength(t){this.config.maxlength=t}get minimal(){return this.config.minimal}set minimal(t){this.config.minimal=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get name(){return this.config.name}set name(t){this.config.name=t}get onchange(){return this.config.onchange}set onchange(t){"function"!=typeof t&&console.error("Action provided for onchange is not a function!"),this.config.onchange=t}get onkeydown(){return this.config.onkeydown}set onkeydown(t){"function"!=typeof t&&console.error("Action provided for onkeydown is not a function!"),this.config.onkeydown=t}get onkeyup(){return this.config.onkeyup}set onkeyup(t){"function"!=typeof t&&console.error("Action provided for onkeyup is not a function!"),this.config.onkeyup=t}get onreturn(){return this.config.onreturn}set onreturn(t){"function"!=typeof t&&console.error("Action provided for onreturn is not a function!"),this.config.onreturn=t}get ontab(){return this.config.ontab}set ontab(t){"function"!=typeof t&&console.error("Action provided for ontab is not a function!"),this.config.ontab=t}get origval(){return this.config.origval}set origval(t){this.config.origval=t}get passive(){return this.config.passive}set passive(t){this.config.passive=t}get passivebox(){return this._passivebox||this.buildPassiveBox(),this._passivebox}set passivebox(t){this._passivebox=t}get pattern(){return this.config.pattern}set pattern(t){this.config.pattern=t}get placeholder(){return this.config.placeholder?this.config.placeholder:this.calculatePlaceholder()}set placeholder(t){this.config.placeholder=t}get preamble(){return this.config.preamble}set preamble(t){this.config.preamble=t}get renderer(){return this.config.renderer}set renderer(t){"function"!=typeof t&&console.error("Value provided to renderer is not a function!"),this.config&&(this.config.renderer=t)}get required(){return this.config.required}set required(t){this.config.required=t}get requirederror(){return this.config.requirederror}set requirederror(t){this.config.requirederror=t}get requiredtext(){return this.config.requiredtext}set requiredtext(t){this.config.requiredtext=t}get size(){return this.config.size}set size(t){this.config.size=t}get title(){return this.config.title}set title(t){this.config.title=t}get topline(){return this._topline}set topline(t){this._topline=t}get touched(){return this._touched}set touched(t){this._touched=t}get type(){return this.config.type}set type(t){this.config.type=t}get unsettext(){return this.config.unsettext}set unsettext(t){this.config.unsettext=t}get unselectedtext(){return this.config.unselectedtext}set unselectedtext(t){this.config.unselectedtext=t}get validator(){return this.config.validator}set validator(t){this.config.validator=t}get value(){return this.input.value}set value(t){this.config.value=t,this.input.value=t,this.hascontainer&&(this.passivebox.value=t,this.validate())}get vigilant(){return this.config.vigilant}set vigilant(t){this.config.vigilant=t}get warnings(){return this._warnings}set warnings(t){this._warnings=t}}window.InputElement=InputElement;class TextInput extends InputElement{constructor(t){t||(t={}),t.type||(t.type="text"),super(t)}}window.TextInput=TextInput;class SelectMenu extends InputElement{static get DEFAULT_CONFIG(){return{combobox:!1,preventscroll:null,placeholder:TextFactory.get("selectmenu-placeholder-default"),unselectedtext:null,icon:"chevron-down",prefix:null,value:null,options:[],onenter:null,onchange:null,drawitem:null}}static get DOCUMENTATION(){return{combobox:{type:"option",datatype:"boolean",description:"If true, treat the SelectMenu as combobox"},unselectedtext:{type:"option",datatype:"string",description:"If present, allow for a deselect and use this text for the 'unselect' value."},placeholder:{type:"option",datatype:"string",description:"Input placeholder. Individual fields can calculate this if it's null. To insure a blank placeholder, set the value to ''."},icon:{type:"option",datatype:"string",description:"Use to define a specific icon, used in some specific controls."},prefix:{type:"option",datatype:"string",description:"A prefix to display in the trigger box."},value:{type:"option",datatype:"string",description:"Value to use for the element. This is the option value not the option label"},options:{type:"option",datatype:"array",description:"Array of option dictionaries. { label: 'Label to show', value: 'value_to_save', checked: false }"},onchange:{type:"option",datatype:"function",description:"The change handler. Passed (self)."}}}static closeOpen(){SelectMenu.activeMenu&&SelectMenu.activeMenu.close()}constructor(t){(t=Object.assign({},SelectMenu.DEFAULT_CONFIG,t)).name||(t.name=`sel-name-${CFBUtils.getUniqueKey(5)}`),super(t),t.value&&(this.origval=t.value)}get isopen(){return"true"===this.wrapper.getAttribute("aria-expanded")}get selected(){let t=this.optionlist.querySelector(`input[name=${this.name}]:checked`);return t||null}get value(){return this.selected?this.selected.value:null}set value(t){this.config.value=t,this.triggerbox.value=this.getOptionLabel(t),this.setPassiveboxValue(t)}getOptionLabel(t){let e="";for(let i of this.options)i.value.toString()===t.toString()&&(e=i.label);return e}reset(){this.value=this.origval,(!this.value||this.value&&""!==this.value.trim())&&this.hascontainer?this.container.classList.add("filled"):this.hascontainer&&this.container.classList.remove("filled")}setPassiveboxValue(t){this.passivebox.innerHTML=this.getOptionLabel(t)}get passivetext(){let t=this.unsettext;return this.selectedoption&&(t=this.selectedoption.label),this.value&&(t=this.value),this.config.value&&(t=this.config.value),document.createTextNode(this.getOptionLabel(t))}drawPayload(t){if(this.drawitem&&"function"==typeof this.drawitem)return this.drawitem(t,this);let e=document.createElement("span");return e.classList.add("text"),e.innerHTML=t.label,e}scrollto(t){t&&(this.scrolleditem&&t.getAttribute("id")===this.scrolleditem.getAttribute("id")||(this.optionlist.scrollTop=t.offsetHeight,this.scrolleditem=t))}jumptoSelected(t){let e=this.optionlist.querySelector('li[aria-selected="true"]');e||(e=this.optionlist.querySelector("li:first-child")),e&&(this.scrollto(e),t&&e.focus())}open(){SelectMenu.closeOpen(),document.body.appendChild(this.listbox),this.listbox.removeAttribute("aria-hidden"),this.wrapper.setAttribute("aria-expanded",!0),this.container.setAttribute("aria-expanded",!0);for(let t of Array.from(this.optionlist.querySelectorAll("li")))t.setAttribute("tabindex","0");SelectMenu.activeMenu,SelectMenu.activeMenu=this;let t=window.scrollX,e=window.scrollY;if(window.onscroll=()=>{window.scrollTo(t,e)},this.preventscroll)for(let t of this.preventscroll){let e=t.scrollX,i=t.scrollY;t.classList.add("scrollfrozen"),t.onscroll=()=>{t.scrollTo(e,i)}}this.setPosition(),setTimeout((()=>{this.setCloseListener()}),100)}setPosition(){if(!SelectMenu.activeMenu)return;let t=SelectMenu.activeMenu,e=document.body.getBoundingClientRect(),i=t.triggerbox.getBoundingClientRect(),s=i.left-e.left,n=i.top-e.top,a=t.triggerbox.clientHeight+t.optionlist.clientHeight;t.listbox.style.left=`${s}px`,t.listbox.style.width=`${t.container.clientWidth}px`,i.top+a>window.innerHeight?(t.listbox.classList.add("vert"),t.listbox.style.top=n-t.optionlist.clientHeight+"px",t.listbox.style.bottom=`${n}px`):(t.listbox.classList.remove("vert"),t.listbox.style.top=`${n+t.triggerbox.clientHeight}px`)}close(){if(window.onscroll=()=>{},this.preventscroll)for(let t of this.preventscroll)t.classList.remove("scrollfrozen"),t.onscroll=()=>{};this.listbox.style.top=null,this.listbox.style.bottom=null,this.listbox.style.left=null,this.listbox.style.width=null,this.listbox.setAttribute("aria-hidden","true"),this.listbox.setAttribute("tabindex","-1"),this.wrapper.setAttribute("aria-expanded",!1),this.container.setAttribute("aria-expanded",!1);for(let t of Array.from(this.optionlist.querySelectorAll("li")))t.setAttribute("tabindex","-1");this.container.appendChild(this.listbox),SelectMenu.activeMenu=null}disable(){this.triggerbox.setAttribute("disabled","disabled"),this.wrapper.removeAttribute("aria-expanded"),this.disabled=!0,this.triggerbox&&this.triggerbox.classList.add("disabled"),this.container&&this.container.classList.add("disabled")}enable(){this.triggerbox.removeAttribute("disabled"),this.disabled=!1,this.triggerbox&&this.triggerbox.classList.remove("disabled"),this.container&&this.container.classList.remove("disabled")}pacify(){this.container.classList.add("passive"),this.optionlist.setAttribute("aria-hidden",!0),this.passive=!0}activate(){this.container.classList.remove("passive"),this.optionlist.removeAttribute("aria-hidden"),this.passive=!1}select(t){let e=this.listbox.querySelectorAll("li");for(let i of e){let e=i.querySelector(`input[name=${this.name}`);i.getAttribute("data-value")===t?(i.setAttribute("aria-selected",!0),e.checked=!0):(i.removeAttribute("aria-selected"),e.checked=!1)}}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container","select-container"),this.name&&this.container.classList.add(`name-${this.name}`);for(let t of this.classes)this.container.classList.add(t);this.labelobj&&this.container.appendChild(this.labelobj),this.topline=document.createElement("div"),this.topline.classList.add("topline"),this.label&&this.topline.appendChild(this.labelobj),this.container.appendChild(this.topline),this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrap"),this.wrapper.setAttribute("role","combobox"),this.wrapper.setAttribute("aria-haspopup","listbox"),this.wrapper.setAttribute("aria-expanded",!1),this.wrapper.setAttribute("aria-owns",`${this.id}-options`),this.icon&&this.wrapper.classList.add(`cfb-${this.icon}`),this.wrapper.appendChild(this.triggerbox),this.container.appendChild(this.wrapper),this.listbox=document.createElement("div"),this.listbox.setAttribute("id",`${this.id}-options`),this.listbox.setAttribute("aria-hidden","true"),this.listbox.setAttribute("role","listbox"),this.listbox.classList.add("selectmenu-menu");for(let t of this.classes)this.listbox.classList.add(t);this.listbox.appendChild(this.optionlist),CFBUtils.applyDataAttributes(this.attributes,this.listbox),this.container.appendChild(this.listbox),this.minimal||(this.container.appendChild(this.passivebox),this.container.appendChild(this.messagebox)),this.minimal&&this.container.classList.add("minimal"),this.value&&this.select(this.value),this.postContainerScrub()}buildTriggerBox(){this.triggerbox=document.createElement("input"),this.triggerbox.classList.add("trigger"),this.triggerbox.setAttribute("type","text"),this.triggerbox.setAttribute("tabindex","0"),this.triggerbox.setAttribute("aria-autocomplete","none"),this.triggerbox.setAttribute("aria-activedescendant",""),this.triggerbox.setAttribute("placeholder",this.placeholder),this.triggerbox.addEventListener("focusin",(t=>{this.disabled?t.stopPropagation():this.combobox?this.triggerbox.select():this.open()})),this.triggerbox.addEventListener("keydown",(t=>{switch(t.key){case"Tab":this.close();break;default:this.combobox&&this.triggerbox.value.length>=3&&this.open()}})),this.triggerbox.addEventListener("keyup",(t=>{if(t.shiftKey&&"Tab"===t.key)this.close();else switch(t.key){case"Enter":this.combobox&&(t.preventDefault(),t.stopPropagation(),this.onenter&&"function"==typeof this.onenter&&this.onenter(this));break;case"Shift":case"Control":case"Alt":case"CapsLock":case"NumLock":case"ScrollLock":case"End":case"Home":case"Meta":case"PageUp":case"Tab":break;case"Escape":case"ArrowUp":this.close();break;case"ArrowDown":t.preventDefault(),this.open(),this.jumptoSelected(!0);break;case"Backspace":case"Delete":this.updateSearch();break;case" ":default:this.updateSearch()}})),this.mute&&this.triggerbox.classList.add("mute")}buildOptions(){this.optionlist=document.createElement("ul"),this.optionlist.classList.add("selectmenu"),this.optionlist.setAttribute("id",this.id),this.optionlist.setAttribute("tabindex","-1");let t=0;if(this.unselectedtext){let t={label:this.unselectedtext,value:"",unselectoption:!0};this.value||(t.checked=!0,this.selectedoption=t),this.options?this.options.unshift(t):console.log("NO OPTIONS")}for(let e of this.options)this.origval&&this.origval.toString()===e.value.toString()?(e.checked=!0,this.selectedoption=e):delete e.checked,this.optionlist.appendChild(this.buildOption(e,t++))}buildOption(t,e){const i=`${this.id}-${CFBUtils.getUniqueKey(5)}`;let s=e+1,n=e-1;this.unselectedtext?n<0&&(n=0):n<1&&(n=1),s>this.options.length&&(s=this.options.length);let a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("name",this.name),a.value=t.value,t.checked&&(a.checked=!0);let o=document.createElement("li");return o.setAttribute("tabindex","-1"),o.setAttribute("id",`li-${i}`),o.setAttribute("data-menuorder",e),o.setAttribute("role","option"),o.setAttribute("data-value",t.value),o.appendChild(a),o.addEventListener("keydown",(t=>{if(t.shiftKey&&"Escape"===t.key)this.close();else switch(t.key){case"Shift":case"Control":case"Alt":case"CapsLock":case"NumLock":case"ScrollLock":case"End":case"Home":case"Meta":case"PageUp":break;case"Tab":case"Escape":case"ArrowUp":t.preventDefault(),this.optionlist.querySelector(`[data-menuorder='${n}']`).focus();break;case"ArrowDown":t.preventDefault(),this.optionlist.querySelector(`[data-menuorder='${s}']`).focus();break;case"Enter":o.click();break;case"Backspace":case"Delete":this.triggerbox.value=this.triggerbox.value.substring(0,this.triggerbox.value.length-1),this.updateSearch();break;case" ":default:t.preventDefault(),this.triggerbox.value=this.triggerbox.value+t.key,this.updateSearch()}})),o.addEventListener("click",(e=>{let i=this.optionlist.querySelectorAll("li");for(let t of i){t.removeAttribute("aria-selected");let e=t.querySelector(`input[name=${this.name}]`);e&&e.removeAttribute("checked")}o.setAttribute("aria-selected","true"),o.querySelector(`input[name=${this.name}]`).checked=!0,t.unselectoption?(this.triggerbox.value="",this.mute&&this.unsettext&&(this.triggerbox.value=this.unsettext)):this.prefix?this.triggerbox.value=`${this.prefix} ${t.label}`:this.triggerbox.value=t.label,this.selectedoption=t,t.unselectoption?this.setPassiveboxValue(this.unsettext):this.setPassiveboxValue(t.label),this.close(),this.validate(),this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(this,e)})),o.appendChild(this.drawPayload(t)),t.checked&&(this.origval=t.value,t.unselectoption?this.triggerbox.value="":this.prefix?this.triggerbox.value=`${this.prefix} ${t.label}`:this.triggerbox.value=t.label,o.setAttribute("aria-selected","true")),o}findByString(t){if(t&&"string"==typeof t)for(let e of this.optionlist.querySelectorAll("li")){if(-1!==e.querySelector("span.text").innerHTML.toUpperCase().indexOf(t.toUpperCase())){this.scrollto(e),e.focus();break}}}reduceOptions(t){if(t&&"string"==typeof t)for(let e of this.optionlist.querySelectorAll("li")){-1!==e.querySelector("span.text").innerHTML.toUpperCase().indexOf(t.toUpperCase())?e.setAttribute("data-match","true"):e.setAttribute("data-match","false")}}updateSearch(){this.combobox?this.reduceOptions(this.triggerbox.value):this.findByString(this.triggerbox.value)}setCloseListener(){document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}),{once:!0}),window.addEventListener("click",(t=>{this.wrapper.contains(t.target)||this.listbox.contains(t.target)?this.setCloseListener():this.close()}),{once:!0})}get combobox(){return this.config.combobox}set combobox(t){this.config.combobox=t}get drawitem(){return this.config.drawitem}set drawitem(t){this.config.drawitem=t}get listbox(){return this._listbox}set listbox(t){this._listbox=t}get onenter(){return this.config.onenter}set onenter(t){"function"!=typeof t&&console.error("Action provided for onenter is not a function!"),this.config.onenter=t}get optionlist(){return this._optionlist||this.buildOptions(),this._optionlist}set optionlist(t){this._optionlist=t}get options(){return this.config.options}set options(t){this.config.options=t}get prefix(){return this.config.prefix}set prefix(t){this.config.prefix=t}get preventscroll(){return this.config.preventscroll}set preventscroll(t){this.config.preventscroll=t}get selectedoption(){return this._selectedoption}set selectedoption(t){this._selectedoption=t}get scrolleditem(){return this._scrolleditem}set scrolleditem(t){this._scrolleditem=t}get triggerbox(){return this._triggerbox||this.buildTriggerBox(),this._triggerbox}set triggerbox(t){this._triggerbox=t}get wrapper(){return this._wrapper}set wrapper(t){this._wrapper=t}}window.SelectMenu=SelectMenu;class BooleanToggle{static get DEFAULT_CONFIG(){return{id:null,attributes:null,name:null,form:null,label:null,help:null,mute:!1,hidewhenpassive:!1,passive:!1,checked:!1,classes:[],disabled:!1,labelside:"right",style:null,onchange:null,validator:null,value:null,renderer:t=>`${t}`}}static get DOCUMENTATION(){return{id:{type:"option",datatype:"string",description:"A unique id value. The button object will have this as it's id."},dataattributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with data-$key = value on elements."},attributes:{type:"option",datatype:"dictionary",description:"A dictionary, key: value, which will end up with $key = value on elements."},form:{type:"option",datatype:"simpleform",description:"A SimpleForm object this element this is in."},help:{type:"option",datatype:"string",description:"Help text that appears in tooltips."},arialabel:{type:"option",datatype:"string",description:"The aria-label attribute."},name:{type:"option",datatype:"string",description:"The name attribute for the input element."},hidewhenpassive:{type:"option",datatype:"boolean",description:"If true, don't display the element when in passive mode."},label:{type:"option",datatype:"string",description:"Input label. If null, no label will be shown."},title:{type:"option",datatype:"string",description:"The title attribute for the element. Not recommended to be used."},classes:{type:"option",datatype:"stringarray",description:"An array of css class names to apply."},disabled:{type:"option",datatype:"boolean",description:"If true, disable the field."},passive:{type:"option",datatype:"boolean",description:"Start life in passive mode."},onchange:{type:"option",datatype:"function",description:"The change handler. Passed (self)."},validator:{type:"option",datatype:"function",description:"A function to run to test validity. Passed the self as arguments."},renderer:{type:"option",datatype:"function",description:"A function that can be used to format the in the field in passive mode."},value:{type:"option",datatype:"string",description:"Value to use for the element."},checked:{type:"option",datatype:"boolean",description:"Should the toggle be checked or not"},labelside:{type:"option",datatype:"string",description:"Which side to put the label on."},style:{type:"option",datatype:"enumeration",description:"The style of the toggle. Options are: square, circle, toggle, and switch. Null means a standard checkbox style"}}}constructor(t){t||(t={}),this.config=Object.assign({},BooleanToggle.DEFAULT_CONFIG,t),!this.arialabel&&this.label&&(this.arialabel=this.label),this.id||(this.id=`check-${CFBUtils.getUniqueKey(5)}`),this.name||(this.name=this.id),this.origval=this.checked}get naked(){return this.toggle}get hascontainer(){return!!this._container}get touched(){return this.checked!==this.origval}validate(){let t=!0;return this.validator&&"function"==typeof this.validator&&(t=this.validator(this)),t}pacify(){this.hascontainer&&(this.hidewhenpassive&&this.container.setAttribute("aria-hidden",!0),this.container.classList.add("passive"),this.passive=!0)}activate(){this.hascontainer&&(this.container.removeAttribute("aria-hidden"),this.container.classList.remove("passive"),this.passive=!1)}toggleActivation(){this.hascontainer&&(this.container.classList.contains("passive")?this.activate():this.pacify())}get passivetext(){return this.value?document.createTextNode("Yes"):document.createTextNode("No")}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("checkbox-container"),this.hidden&&(this.container.style.display="none"),this.disabled&&this.container.classList.add("disabled"),this.mute&&this.container.classList.add("mute");for(let t of this.classes)this.container.classList.add(t);"left"===this.labelside?(this.container.classList.add("leftside"),this.label&&this.container.appendChild(this.labelobj),this.container.appendChild(this.passivebox),this.container.appendChild(this.toggle)):(this.container.appendChild(this.toggle),this.label&&this.container.appendChild(this.labelobj),this.container.appendChild(this.passivebox))}buildPassiveBox(){this.passivebox=document.createElement("div"),this.passivebox.classList.add("passivebox"),this.passivebox.appendChild(this.passivetext)}build(){this.toggle=document.createElement("input"),this.toggle.setAttribute("type","checkbox"),this.toggle.setAttribute("id",this.id),this.toggle.setAttribute("name",this.name),this.toggle.setAttribute("tabindex","0"),this.toggle.setAttribute("role","checkbox"),this.toggle.setAttribute("value",this.value),this.toggle.classList.add(this.style);for(let t of this.classes)this.toggle.classList.add(t);CFBUtils.applyDataAttributes(this.attributes,this.toggle),CFBUtils.applyDataAttributes(this.dataattributes,this.toggle),this.toggle.addEventListener("change",(()=>{this.toggle.checked?(this.toggle.setAttribute("aria-checked","true"),this.toggle.checked=!0):(this.toggle.removeAttribute("aria-checked"),this.toggle.checked=!1),this.checked=this.toggle.checked,this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(this)})),this.disabled&&this.disable(),this.hidden&&this.toggle.setAttribute("aria-hidden","true"),this.checked&&(this.toggle.checked=!0,this.checked=!0,this.toggle.setAttribute("aria-checked","true"))}buildLabel(){if(!this.label)return null;if(this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.innerHTML=this.label,this.form&&this.labelobj.setAttribute("form",this.form.id),this.help)if(this.mute){let t=document.createElement("span");t.classList.add("mutehelp"),t.innerHTML=this.help,this.labelobj.appendChild(t)}else this.helpbutton=new HelpButton({id:`${this.id}-help`,tooltip:this.help}),this.labelobj.appendChild(this.helpbutton.button)}disable(){this.toggle.setAttribute("disabled","disabled"),this.disabled=!0,this.hascontainer&&this.container.classList.add("disabled")}enable(){this.toggle.removeAttribute("disabled"),this.disabled=!1,this.hascontainer&&this.container.classList.remove("disabled")}toString(){return CFBUtils.getConfig(this)}get arialabel(){return this.config.arialabel}set arialabel(t){this.config.arialabel=t}get attributes(){return this.config.attributes}set attributes(t){this.config.attributes=t}get checked(){return this.config.checked}set checked(t){this._toggle&&(this.toggle.checked=t),this.config.checked=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get dataattributes(){return this.config.dataattributes}set dataattributes(t){this.config.dataattributes=t}get disabled(){return this.config.disabled}set disabled(t){this.config.disabled=t}get form(){return this.config.form}set form(t){this.config.form=t}get help(){return this.config.help}set help(t){this.config.help=t}get hidden(){return this.config.hidden}set hidden(t){this.config.hidden=t}get hidewhenpassive(){return this.config.hidewhenpassive}set hidewhenpassive(t){this.config.hidewhenpassive=t}get icon(){return this.config.icon}set icon(t){this.config.icon=t}get id(){return this.config.id}set id(t){this.config.id=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get labelside(){return this.config.labelside}set labelside(t){this.config.labelside=t}get mute(){return this.config.mute}set mute(t){this.config.mute=t}get name(){return this.config.name}set name(t){this.config.name=t}get onchange(){return this.config.onchange}set onchange(t){"function"!=typeof t&&console.error("Action provided for onchange is not a function!"),this.config.onchange=t}get origval(){return this.config.origval}set origval(t){this.config.origval=t}get passive(){return this.config.passive}set passive(t){this.config.passive=t}get passivebox(){return this._passivebox||this.buildPassiveBox(),this._passivebox}set passivebox(t){this._passivebox=t}get renderer(){return this.config.renderer}set renderer(t){"function"!=typeof t&&console.error("Value provided to renderer is not a function!"),this.config&&(this.config.renderer=t)}get style(){return this.config.style}set style(t){this.config.style=t}get toggle(){return this._toggle||this.build(),this._toggle}set toggle(t){this._toggle=t}get validator(){return this.config.validator}set validator(t){this.config.validator=t}get value(){return this.checked}set value(t){this.toggle.setAttribute("value",t),this.config.value=t}}class DateInput extends TextInput{static get DEFAULT_CONFIG(){return{basetime:"12:00:00",timezone:"GMT",type:"text",gravity:"south",timepicker:!1,triggerarialabel:TextFactory.get("dateinput-trigger-arialabel"),forceconstraints:!0,format:t=>{let e=new Date(t.value);return e?e.toUTCString():""},dateicon:"calendar"}}static get DOCUMENTATION(){return{basetime:{type:"option",datatype:"string",description:"Time of day to set dates to."},timezone:{type:"option",datatype:"string",description:"The default timezone to set the datepicker to (unused)."},gravity:{type:"option",datatype:"string",description:"The direction to open the datepicker when it's clicked open."},triggerarialabel:{type:"option",datatype:"string",description:"The aria-label for the datepicker trigger button."},forceconstraints:{type:"option",datatype:"boolean",description:"If true, enforce that the value is a valid date."},dateicon:{type:"option",datatype:"string",description:"The icon to use for the datpicker trigger button."}}}static isValid(t){let e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}constructor(t){t||(t={}),super(t=Object.assign({},DateInput.DEFAULT_CONFIG,t))}get inputcontrol(){return this.calbutton}get topcontrol(){return this.datedisplay}renderer(){return document.createTextNode(this.format(this))}calculatePlaceholder(){return"YYYY-MM-DD"}localValidator(){this.value&&this.forceconstraints&&(DateInput.isValid(this.value)||this.errors.push(TextFactory.get("dateinput-error-invalid"))),this.updateDateDisplay()}updateDateDisplay(){if(!this.value||""===this.value)return this.datedisplay.classList.add("hidden"),void(this.datedisplay.innerHTML="");this.datedisplay.classList.remove("hidden"),this.datedisplay.innerHTML=this.format(this)}buildCalendarButton(){this.datepicker=new DatePicker({classes:["menu"],timepicker:this.timepicker,onselect:t=>{this.value=t,this.triggerbutton.close(),this.input.focus(),this.validate()}}),this.triggerbutton=new ButtonMenu({classes:["naked"],shape:"square",gravity:"n",icon:this.dateicon,arialabel:this.triggerarialabel,menu:this.datepicker.container,action:(t,e)=>{e.isopen?(e.close(),this.input.focus()):(e.open(),this.datepicker.renderMonth(this.value)),t.stopPropagation()}}),this.calbutton=document.createElement("div"),this.calbutton.classList.add("calbutton"),this.calbutton.classList.add("inputcontrol"),this.calbutton.appendChild(this.triggerbutton.button),this.calbutton.addEventListener("mousedown",(t=>{t.preventDefault()}))}buildDateDisplay(){this.datedisplay=document.createElement("div"),this.datedisplay.classList.add("datedisplay"),this.datedisplay.classList.add("topcontrol"),this.updateDateDisplay()}get basetime(){return this.config.basetime}set basetime(t){this.config.basetime=t}get calbutton(){return this._calbutton||this.buildCalendarButton(),this._calbutton}set calbutton(t){this._calbutton=t}get datedisplay(){return this._datedisplay||this.buildDateDisplay(),this._datedisplay}set datedisplay(t){this._datedisplay=t}get dateicon(){return this.config.dateicon}set dateicon(t){this.config.dateicon=t}get datepicker(){return this._datepicker}set datepicker(t){this._datepicker=t}get format(){return this.config.format}set format(t){this.config.format=t}get gravity(){return this.config.gravity}set gravity(t){this.config.gravity=t}get timepicker(){return this.config.timepicker}set timepicker(t){this.config.timepicker=t}get timezone(){return this.config.timezone}set timezone(t){this.config.timezone=t}get triggerarialabel(){return this.config.triggerarialabel}set triggerarialabel(t){this.config.triggerarialabel=t}get triggerbutton(){return this._triggerbutton}set triggerbutton(t){this._triggerbutton=t}}window.DateInput=DateInput;class SwitchList extends InputElement{static get DEFAULT_CONFIG(){return{prefix:null,inlist:[],intitle:"",addicon:"arrow-right",outlist:[],outtitle:"",removeicon:"arrow-left",drawitem:null}}constructor(t){t||(t={}),(t=Object.assign({},SwitchList.DEFAULT_CONFIG,t)).type||(t.type="switchlist"),super(t)}sortList(t){let e=Array.prototype.slice.call(t.childNodes).filter((t=>"LI"===t.tagName));e.sort(((t,e)=>{let i=t.getAttribute("data-label"),s=e.getAttribute("data-label");return i>s?1:i<s?-1:0})),e.forEach((function(e){t.appendChild(e)}))}popLists(t,e=!0){if(e){let e=[];for(let i of this.inlist)t.id===i.id?this.outlist.push(i):e.push(i);this.inlist=e}else{let e=[];for(let i of this.outlist)t.id===i.id?this.inlist.push(i):e.push(i);this.outlist=e}}isDirty(){return!0}rebuild(){this.touched=!0,this.listboxes.innerHTML="",this.listboxes.appendChild(this.buildListBox(!0)),this.listboxes.appendChild(this.buildListBox(!1)),this.sortList(this.inlistlist),this.sortList(this.outlistlist)}buildContainer(){if(this.container=document.createElement("div"),this.container.classList.add("switchlist-container"),this.container.classList.add("input-container"),this.name&&this.container.classList.add(`name-${this.name}`),this.classes)for(let t of this.classes)this.container.classList.add(t);this.id&&this.container.setAttribute("id",this.id),this.topline=document.createElement("div"),this.topline.classList.add("topline"),this.label&&this.topline.appendChild(this.labelobj),this.topcontrol&&this.topline.appendChild(this.topcontrol),this.container.appendChild(this.topline),this.listboxes=document.createElement("div"),this.listboxes.classList.add("listboxes"),this.container.appendChild(this.listboxes),this.rebuild()}buildListElement(t,e,i){let s=document.createElement("li"),n=`${this.prefix?this.prefix:this.name}-${t.id?t.id:i}`,a=new BooleanToggle({checked:e,value:t.value,hidden:!0,name:n});return s.appendChild(IconFactory.icon(this.removeicon)),s.setAttribute("data-rid",`${this.name}-r-${CFBUtils.getUniqueKey(5)}`),s.setAttribute("data-label",t.label),s.setAttribute("tabindex","-1"),s.appendChild(this.drawPayload(t)),s.appendChild(a.naked),s.appendChild(IconFactory.icon(this.addicon)),s.addEventListener("keydown",(t=>{let e=this.parentNode;if(t.shiftKey&&"Escape"===t.key)this.close();else switch(t.key){case"Shift":case"Control":case"Alt":case"CapsLock":case"NumLock":case"ScrollLock":case"End":case"Home":case"Meta":case"PageUp":break;case"Tab":case"Escape":case"ArrowUp":let i;t.preventDefault();for(let t of e.getElementsByTagName("li")){if(t.getAttribute("data-rid")===s.getAttribute("data-rid")){t&&i.focus();break}i=t}break;case"ArrowDown":let n;t.preventDefault();for(let t of e.getElementsByTagName("li").reverse()){if(t.getAttribute("data-rid")===s.getAttribute("data-rid")){t&&n.focus();break}n=t}break;case"Enter":s.click()}})),s.addEventListener("click",(()=>{a.toggle.checked?(a.checked=!1,this.inlistlist.removeChild(s),this.outlistlist.appendChild(s),this.sortList(this.outlistlist),this.popLists(t,!0)):(a.toggle.checked=!0,this.outlistlist.removeChild(s),this.inlistlist.appendChild(s),this.sortList(this.inlistlist),this.popLists(t,!1)),this.touched=!0,this.validate(),this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(this)})),s}drawPayload(t){if(this.drawitem&&"function"==typeof this.drawitem)return this.drawitem(t,this);let e=document.createElement("span");return e.classList.add("l"),e.innerHTML=t.label,e}buildListBox(t=!0){let e=this.intitle,i=this.inlist;t||(e=this.outtitle,i=this.outlist);let s=document.createElement("div");s.classList.add("listbox",""+(t?"inlist":"outlist")),s.innerHTML=`<label>${e}</lable>`;let n=document.createElement("ul"),a=0;for(let e of i)n.appendChild(this.buildListElement(e,t,a++));return s.appendChild(n),t?(this.inlistbox=s,this.inlistlist=n):(this.outlistbox=s,this.outlistlist=n),s}get addicon(){return this.config.addicon}set addicon(t){this.config.addicon=t}get drawitem(){return this.config.drawitem}set drawitem(t){this.config.drawitem=t}get inlist(){return this.config.inlist}set inlist(t){this.config.inlist=t}get inlistbox(){return this._inlistbox}set inlistbox(t){this._inlistbox=t}get inlistlist(){return this._inlistlist}set inlistlist(t){this._inlistlist=t}get intitle(){return this.config.intitle}set intitle(t){this.config.intitle=t}get listboxes(){return this._listboxes}set listboxes(t){this._listboxes=t}get outicon(){return this.config.outicon}set outicon(t){this.config.outicon=t}get outlist(){return this.config.outlist}set outlist(t){this.config.outlist=t}get outlistbox(){return this._outlistbox}set outlistbox(t){this._outlistbox=t}get outlistlist(){return this._outlistlist}set outlistlist(t){this._outlistlist=t}get outtitle(){return this.config.outtitle}set outtitle(t){this.config.outtitle=t}get prefix(){return this.config.prefix}set prefix(t){this.config.prefix=t}get removeicon(){return this.config.removeicon}set removeicon(t){this.config.removeicon=t}}window.SwitchList=SwitchList;class EmailInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",forceconstraints:!0,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$"}}static get DOCUMENTATION(){return{forceconstraints:{type:"option",datatype:"boolean",description:"If true, enforce that the value is a valid email address."},pattern:{type:"option",datatype:"string",description:"The input pattern used to force a valid email address."}}}static isValid(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}constructor(t){t||(t={}),super(t=Object.assign({},EmailInput.DEFAULT_CONFIG,t))}get inputmode(){return"email"}calculatePlaceholder(){return TextFactory.get("emailinput-placeholder-default")}localValidator(){this.value&&this.forceconstraints&&(EmailInput.isValid(this.value)||this.errors.push(TextFactory.get("emailinput-error-invalid_web_address")))}}window.EmailInput=EmailInput;class FileInput extends InputElement{static get DEFAULT_CONFIG(){return{type:"file",icon:"upload",accept:"image/png,image/gif,image/jpg,image/jpeg",multiple:!1,onchange:null}}static get DOCUMENTATION(){return{icon:{type:"option",datatype:"string",description:"The icon to use for the upload trigger."},accept:{type:"option",datatype:"string",description:"The default accept mime-type value."},multiple:{type:"option",datatype:"boolean",description:"If true, accept multiple files for upload."}}}constructor(t){t||(t={}),super(t=Object.assign({},FileInput.DEFAULT_CONFIG,t))}get value(){if(this.fileinput.files){let t=this.fileinput.files,e=[];for(let i of t)e.push(i.name);return e.join(",")}return""}get topcontrol(){return this.searchdisplay}get passivetext(){return this.selectedoption?this.selectedoption.label:this.value?this.value:this.config.value?this.config.value:this.unsettext}calculatePlaceholder(){return this.config.placeholder?this.config.placeholder:this.multiple?TextFactory.get("fileinput-placeholder-multiple"):TextFactory.get("fileinput-placeholder-file")}disable(){this.triggerbox.setAttribute("disabled","disabled"),this.triggerbox.classList.add("disabled"),this.container.classList.add("disabled"),this.disabled=!0}enable(){this.triggerbox.removeAttribute("disabled"),this.triggerbox.classList.remove("disabled"),this.container.classList.remove("disabled"),this.disabled=!1}reset(){this.fileinput.value=""}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("file-container"),this.name&&this.container.classList.add(`name-${this.name}`);for(let t of this.classes)this.container.classList.add(t);this.topline=document.createElement("div"),this.topline.classList.add("topline"),this.label&&this.topline.appendChild(this.labelobj),this.topcontrol&&this.topline.appendChild(this.topcontrol),this.container.appendChild(this.topline),this.container.appendChild(this.fileinput);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.triggerbox),this.container.appendChild(t),this.container.appendChild(this.messagebox),this.postContainerScrub()}buildTriggerBox(){this.triggerbox=document.createElement("div"),this.triggerbox.classList.add("trigger"),this.triggerbox.setAttribute("tabindex","-1"),this.triggerbox.innerHTML=`<span class="placeholder">${this.placeholder}</span>`,this.triggerbox.addEventListener("click",(t=>{this.disabled?t.stopPropagation():this.labelobj.click()})),this.triggerbox.addEventListener("keydown",(t=>{switch(t.key){case"Tab":this.triggerbox.blur();break;case"Enter":case" ":this.labelobj.click()}})),this.mute&&this.triggerbox.classList.add("mute"),this.icon&&this.triggerbox.classList.add(`cfb-${this.icon}`)}buildFileInput(){this.fileinput=document.createElement("input"),this.fileinput.setAttribute("type",this.type),this.fileinput.setAttribute("name",this.name),this.fileinput.setAttribute("id",this.id),this.fileinput.setAttribute("accept",this.accept),this.fileinput.setAttribute("multiple",this.multiple),this.label&&this.fileinput.setAttribute("aria-labelledby",this.labelobj.id),this.fileinput.addEventListener("focusin",(()=>{this.triggerbox.focus(),this.container.classList.add("active")})),this.triggerbox.addEventListener("blur",(()=>{})),this.fileinput.addEventListener("change",(t=>{if(this.fileinput.files&&this.fileinput.files.length>0){this.hascontainer&&(this.container.classList.add("filled"),this.container.classList.add("valid"));let t=this.fileinput.files,e=[];for(let i of t)e.push(i.name);e.length>0?(this.triggerbox.classList.add("files"),this.triggerbox.innerHTML=`${e.join(", ")}`):(this.triggerbox.classList.remove("files"),this.triggerbox.innerHTML=`<span class="placeholder">${this.placeholder}</span>`)}else this.container.classList.remove("filled"),this.container.classList.remove("valid"),this.triggerbox.classList.remove("files"),this.triggerbox.innerHTML='<span class="placeholder"></span>';this.validate(),this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(t,this)})),CFBUtils.applyDataAttributes(this.attributes,this.fileinput)}get accept(){return this.config.accept}set accept(t){this.config.accept=t}get fileinput(){return this._fileinput||this.buildFileInput(),this._fileinput}set fileinput(t){this._fileinput=t}get multiple(){return this.config.multiple}set multiple(t){this.config.multiple=t}get triggerbox(){return this._triggerbox||this.buildTriggerBox(),this._triggerbox}set triggerbox(t){this._triggerbox=t}}window.FileInput=FileInput;class HiddenField extends TextInput{constructor(t){t||(t={}),t.hidden=!0,t.type="hidden",super(t)}get container(){return this.input}}window.HiddenField=HiddenField;class NumberInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",pattern:"[0-9]*",forceconstraints:!0,minnumber:null,maxnumber:null,downbuttonarialabel:TextFactory.get("decrement_number"),upbuttonarialabel:TextFactory.get("increment_number"),wholenumbers:!1,steppers:!0,step:1}}static get DOCUMENTATION(){return{pattern:{type:"option",datatype:"string",description:"The input pattern used to force a valid number."},forceconstraints:{type:"option",datatype:"boolean",description:"If true, enforce that the value is a valid number."},minnumber:{type:"option",datatype:"number",description:"The minimum acceptable value."},maxnumber:{type:"option",datatype:"number",description:"The maximum acceptable value."},downbuttonarialabel:{type:"option",datatype:"string",description:"The aria-label text for the decrement button"},upbuttonarialabel:{type:"option",datatype:"string",description:"The aria-label text for the increment button"},wholenumbers:{type:"option",datatype:"boolean",description:"If true, require whole numbers"},steppers:{type:"option",datatype:"boolean",description:"If true, show increment and decrement buttons"},step:{type:"option",datatype:"number",description:"The value that the increment and decrement buttons change the value by"}}}constructor(t){t||(t={}),(t=Object.assign({},NumberInput.DEFAULT_CONFIG,t)).step&&(isNaN(parseFloat(t.step))?(console.error(`step is defined as ${t.step} but is not a number. Deleting.`),delete t.step):Number(t.step)<=0?(console.error("step cannot be a negative number. Deleting."),delete t.step):t.step=Number(t.step)),t.maxnumber&&(isNaN(parseFloat(t.maxnumber))?(console.error(`maxnumber is defined as ${t.maxnumber} but is not a number. Deleting.`),delete t.maxnumber):t.maxnumber=Number(t.maxnumber)),t.minnumber&&(isNaN(parseFloat(t.minnumber))?(console.error(`minnumber is defined as ${t.minnumber} but is not a number. Deleting.`),delete t.maxnumber):t.minnumber=Number(t.minnumber)),t.onkeydown&&(t.origkeydown=t.onkeydown),t.onkeydown=(t,e)=>{switch(t.key){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"*":case"%":case"$":case"-":case"!":case"#":case"+":case"=":case">":case"<":case"?":case"Backspace":case"Delete":case"Enter":case"Tab":break;case"ArrowUp":t.preventDefault(),t.stopPropagation(),e.increment();break;case"ArrowDown":t.preventDefault(),t.stopPropagation(),e.decrement();break;default:e.forceconstraints&&(t.preventDefault(),t.stopPropagation())}e.origkeydown&&"function"==typeof e.origkeydown&&e.origkeydown(t,e)},super(t)}get inputmode(){return"numeric"}get inputcontrol(){return this.stepbuttons}localValidator(t){if(this.value){if(isNaN(this.value))return void this.errors.push(TextFactory.get("numberinput-error-nan"));let t=parseFloat(this.value);this.minnumber&&t<this.minnumber?this.errors.push(TextFactory.get("numberinput-error-minimum_value",this.minnumber)):this.maxnumber&&t>this.maxnumber?this.errors.push(TextFactory.get("numberinput-error-maximum_value",this.maxnumber)):this.step&&t%this.step!=0?this.errors.push(TextFactory.get("numberinput-error-values_divisible",this.step)):this.wholenumbers&&t%1>0&&this.errors.push(TextFactory.get("numberinput-error-must_be_whole_numbers"))}}calculatePlaceholder(){let t=TextFactory.get("numberinput-placeholder-basic");return this.minnumber&&this.maxnumber?t=TextFactory.get("numberinput-placeholder-between_x_y",this.minnumber,this.maxnumber):this.minnumber?t=TextFactory.get("numberinput-placeholder-larger_than_x",this.minnumber):this.maxnumber&&(t=TextFactory.get("numberinput-placeholder-smaller_than_y",this.maxnumber)),this.step&&this.step>1&&(t+=TextFactory.get("numberinput-placeholder-fragment_increments",this.step)),t}increment(t=1){t&&!isNaN(t)||(t=1);let e=parseFloat(this.value);e||(e=0),isNaN(e)||(e+=t,this.maxnumber&&e>this.maxnumber&&(e=this.maxnumber),this.value=e)}decrement(t=1){t&&!isNaN(t)||(t=1);let e=parseFloat(this.value);e||(e=0),isNaN(e)||(e-=t,this.maxnumber&&e>this.maxnumber&&(e=this.maxnumber),this.value=e)}buildSteppers(){this.steppers&&(this.upbtn=new SimpleButton({classes:["naked"],icon:"triangle-up",arialabel:this.upbuttonarialabel,notab:!0,action:t=>{t.preventDefault(),t.stopPropagation(),this.increment(this.step)}}),this.downbtn=new SimpleButton({classes:["naked"],icon:"triangle-down",arialabel:this.downbuttonarialabel,notab:!0,action:t=>{t.preventDefault(),t.stopPropagation(),this.decrement(this.step)}}),this.stepbuttons=document.createElement("div"),this.stepbuttons.classList.add("stepbuttons"),this.stepbuttons.classList.add("inputcontrol"),this.stepbuttons.appendChild(this.upbtn.button),this.stepbuttons.appendChild(this.downbtn.button),this.stepbuttons.addEventListener("mousedown",(t=>{t.preventDefault()})))}get downbtn(){return this._downbtn}set downbtn(t){this._downbtn=t}get downbuttonarialabel(){return this.config.downbuttonarialabel}set downbuttonarialabel(t){this.config.downbuttonarialabel=t}get maxnumber(){return this.config.maxnumber}set maxnumber(t){this.config.maxnumber=t}get minnumber(){return this.config.minnumber}set minnumber(t){this.config.minnumber=t}get origkeydown(){return this.config.origkeydown}set origkeydown(t){this.config.origkeydown=t}get step(){return this.config.step}set step(t){this.config.step=t}get stepbuttons(){return this._stepbuttons||this.buildSteppers(),this._stepbuttons}set stepbuttons(t){this._stepbuttons=t}get steppers(){return this.config.steppers}set steppers(t){this.config.steppers=t}get upbtn(){return this._upbtn}set upbtn(t){this._upbtn=t}get upbuttonarialabel(){return this.config.upbuttonarialabel}set upbuttonarialabel(t){this.config.upbuttonarialabel=t}get wholenumbers(){return this.config.wholenumbers}set wholenumbers(t){this.config.wholenumbers=t}}window.NumberInput=NumberInput;class PasswordInput extends TextInput{static get DEFAULT_CONFIG(){return{minlength:5,suggestedlength:8,maxlength:250,hideicon:"eye-slash",showicon:"eye",obscured:!0,forceconstraints:!1,type:"password"}}static get DOCUMENTATION(){return{minlength:{type:"option",datatype:"number",description:"The minimum length of a password."},suggestedlength:{type:"option",datatype:"number",description:"The suggested length for a password."},maxlength:{type:"option",datatype:"number",description:"The maxlength for the password field."},hideicon:{type:"option",datatype:"string",description:"The icon to show on the hide/show password control for 'hide'."},showicon:{type:"option",datatype:"string",description:"The icon to show on the hide/show password control for 'show'."},obscured:{type:"option",datatype:"boolean",description:"If true, start with password hidden."},forceconstraints:{type:"option",datatype:"boolean",description:"If true, enforce that the value meets all other constraints."}}}constructor(t){t||(t={}),super(t=Object.assign({},PasswordInput.DEFAULT_CONFIG,t))}get inputcontrol(){return this.visibilitycontrol}buildVisibilityControl(){let t=this.hideicon,e=TextFactory.get("hide_password");this.obscured&&(t=this.showicon,e=TextFactory.get("show_password")),this.eyebutton=new SimpleButton({classes:["naked"],shape:"square",icon:t,arialabel:e,tooltip:TextFactory.get("passwordinput-change_visibility"),action:(t,e)=>{console.log("clickify"),this.toggleVisibility(),t.stopPropagation()}}),this.visibilitycontrol=document.createElement("div"),this.visibilitycontrol.classList.add("visbutton"),this.visibilitycontrol.classList.add("inputcontrol"),this.visibilitycontrol.appendChild(this.eyebutton.button),this.visibilitycontrol.addEventListener("mousedown",(t=>{t.preventDefault()}))}toggleVisibility(){"text"===this.input.getAttribute("type")?this.setVisibility(!1):this.setVisibility(!0)}setVisibility(t){t?(this.obscured=!1,this.input.setAttribute("type","text"),this.eyebutton.button.setAttribute("aria-label",TextFactory.get("hide_password")),this.eyebutton.setIcon(this.hideicon)):(this.obscured=!0,this.input.setAttribute("type","password"),this.eyebutton.button.setAttribute("aria-label",TextFactory.get("show_password")),this.eyebutton.setIcon(this.showicon)),this.input.focus()}localValidator(){this.value&&this.forceconstraints&&(this.value.length<this.minlength?this.errors.push(TextFactory.get("passwordchanger-error-minlength",this.minlength)):this.value.length<this.suggestedlength?this.errors.push(TextFactory.get("passwordchanger-error-suggestedlength",this.suggestedlength)):this.value.length>this.maxlength&&this.errors.push(TextFactory.get("passwordchanger-error-maxlength",this.maxlength)))}get eyebutton(){return this._eyebutton}set eyebutton(t){this._eyebutton=t}get minlength(){return this.config.minlength}set minlength(t){this.config.minlength=t}get hideicon(){return this.config.hideicon}set hideicon(t){this.config.hideicon=t}get obscured(){return this.config.obscured}set obscured(t){this.config.obscured=t}get showicon(){return this.config.showicon}set showicon(t){this.config.showicon=t}get suggestedlength(){return this.config.suggestedlength}set suggestedlength(t){this.config.suggestedlength=t}get visibilitycontrol(){return this._visibilitycontrol||this.buildVisibilityControl(),this._visibilitycontrol}set visibilitycontrol(t){this._visibilitycontrol=t}}window.PasswordInput=PasswordInput;class RadioGroup extends SelectMenu{constructor(t){t||(t={}),(t=Object.assign({},RadioGroup.DEFAULT_CONFIG,t)).id||(t.id=`radiogroup-${CFBUtils.getUniqueKey(5)}`),t.name||(t.name=t.id),super(t)}get input(){return this.optionlist}get passivetext(){let t=this.unsettext;return this.selectedoption&&(t=this.selectedoption.label),this.value&&(t=this.value),this.config.value&&(t=this.config.value),document.createTextNode(t)}disable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.setAttribute("disabled","disabled");this.disabled=!0,this.container&&this.container.classList.add("disabled")}enable(){let t=this.optionlist.querySelectorAll("input[type='radio']");for(let e of t)e.removeAttribute("disabled");this.disabled=!1,this.container&&this.container.classList.remove("disabled")}select(t){let e=this.optionlist.querySelectorAll("input[type='radio']");for(let i of e)i.getAttribute("data-value")===t?(i.setAttribute("aria-selected","true"),i.checked=!0):(i.removeAttribute("aria-selected"),i.checked=!1)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("radiogroup-container"),this.name&&this.container.classList.add(`name-${this.name}`);for(let t of this.classes)this.container.classList.add(t);this.container.appendChild(this.labelobj),this.container.appendChild(this.optionlist),this.container.appendChild(this.passivebox),this.value&&this.select(this.value),this.postContainerScrub()}postContainerScrub(){this.hidden&&(this.container.style.display="none"),this.required&&(this.container.classList.add("required"),this.optionlist.setAttribute("required","required")),this.hidden&&(this.container.style.display="none",this.container.setAttribute("aria-hidden","true")),this.passive&&this.pacify(),this.disabled&&this.disable(),this.help&&(this.optionlist.setAttribute("aria-describedby",`${this.id}-help-tt`),this.optionlist.setAttribute("aria-labelledby",`${this.id}-label`))}buildOption(t){const e=`${this.id}-${CFBUtils.getUniqueKey(5)}`;let i=document.createElement("input");i.setAttribute("id",e),i.setAttribute("type","radio"),i.setAttribute("name",this.name),i.setAttribute("tabindex","0"),i.setAttribute("value",t.value),i.setAttribute("aria-label",t.label),i.setAttribute("role","radio"),i.setAttribute("data-value",t.value);for(let t of this.classes)i.classList.add(t);i.addEventListener("change",(()=>{i.checked?i.setAttribute("aria-checked","true"):i.removeAttribute("aria-checked"),this.selectedoption=t,t.label===this.unselectedtext?this.passivebox.innerHTML=this.unsettext:this.passivebox.innerHTML=t.label,this.validate(),this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(this)}));let s=document.createElement("label");if(s.setAttribute("for",e),s.innerHTML=t.label,t.help){let e=document.createElement("span");e.classList.add("mutehelp"),e.innerHTML=t.help,s.appendChild(e)}(null!==this.config.value&&this.config.value===t.value||t.checked)&&(this.origval=t.value,i.checked=!0,i.setAttribute("aria-checked","true"));let n=document.createElement("li");return n.classList.add("radio"),n.appendChild(i),n.appendChild(s),n}buildOptions(){this.optionlist=document.createElement("ul"),this.optionlist.classList.add("radiogroup"),this.optionlist.setAttribute("tabindex","-1");for(let t of this.options){let e=this.buildOption(t);t.checked&&(this.selectedoption=t),this.optionlist.appendChild(e)}}}window.RadioGroup=RadioGroup;class ColorSelector extends RadioGroup{static get DEFAULT_CONFIG(){return{options:[{label:TextFactory.get("color-red"),value:"red"},{label:TextFactory.get("color-orange"),value:"orange"},{label:TextFactory.get("color-yellow"),value:"yellow"},{label:TextFactory.get("color-green"),value:"green"},{label:TextFactory.get("color-blue"),value:"blue"},{label:TextFactory.get("color-darkblue"),value:"darkblue"},{label:TextFactory.get("color-purple"),value:"purple"},{label:TextFactory.get("color-pink"),value:"pink"},{label:TextFactory.get("color-tan"),value:"tan"},{label:TextFactory.get("color-brown"),value:"brown"},{label:TextFactory.get("color-black"),value:"black"},{label:TextFactory.get("color-grey"),value:"grey"},{label:TextFactory.get("color-white"),value:"white"}]}}constructor(t){t||(t={}),(t=Object.assign({},ColorSelector.DEFAULT_CONFIG,t)).id||(t.id=`colorselector-${CFBUtils.getUniqueKey(5)}`),t.name||(t.name=t.id),super(t)}get input(){return this.optionlist}get passivetext(){let t=this.unsettext;return this.selectedoption&&(t=this.selectedoption.label),this.value&&(t=this.value),this.config.value&&(t=this.config.value),document.createTextNode(t)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("input-container"),this.container.classList.add("colorselector-container"),this.name&&this.container.classList.add(`name-${this.name}`);for(let t of this.classes)this.container.classList.add(t);this.container.appendChild(this.labelobj),this.container.appendChild(this.optionlist),this.container.appendChild(this.passivebox),this.postContainerScrub()}buildOption(t){const e=`${this.id}-${CFBUtils.getUniqueKey(5)}`;let i=document.createElement("li"),s=document.createElement("input");s.setAttribute("id",e),s.setAttribute("type","radio"),s.setAttribute("name",this.name),s.setAttribute("tabindex","0"),s.setAttribute("value",t.value),s.setAttribute("aria-label",t.label),s.setAttribute("role","radio");for(let t of this.classes)s.classList.add(t);s.addEventListener("change",(()=>{if(s.checked){s.setAttribute("aria-checked","true");for(let t of this.optionlist.querySelectorAll("li"))t.removeAttribute("aria-selected");i.setAttribute("aria-selected","true")}else s.removeAttribute("aria-checked");this.selectedoption=t,t.label===this.unselectedtext?this.passivebox.innerHTML=this.unsettext:this.passivebox.innerHTML=t.label,this.validate(),this.form&&this.form.validate(),this.onchange&&"function"==typeof this.onchange&&this.onchange(this)}));let n=document.createElement("span");n.classList.add("swatch"),n.style.backgroundColor=t.value,s.style.backgroundColor=t.value;let a=document.createElement("label");a.setAttribute("for",e),a.appendChild(n),new ToolTip({text:t.label,icon:null}).attach(a);let o=!1;return(this.config.value&&t.value===this.config.value||t.checked)&&(o=!0),o&&(i.setAttribute("aria-selected","true"),this.origval=t.value,s.checked=!0,s.setAttribute("aria-checked","true")),i.classList.add("radio"),i.appendChild(s),i.appendChild(a),i}buildOptions(){this.optionlist=document.createElement("ul"),this.optionlist.classList.add("colorselector"),this.optionlist.setAttribute("tabindex","-1");for(let t of this.options){let e=this.buildOption(t);t.checked&&(this.selectedoption=t),this.optionlist.appendChild(e)}}}window.ColorSelector=ColorSelector;class TextArea extends InputElement{static get DEFAULT_CONFIG(){return{counter:"sky"}}static get DEFAULT_CONFIG_DOCUMENTATION(){return{counter:{type:"option",datatype:"string",description:"A value for a character counter. Null means 'no counter'. Possible values: null, 'remaining', 'limit', and 'sky'."}}}constructor(t){t||(t={}),(t=Object.assign({},TextArea.DEFAULT_CONFIG,t)).type="textarea",super(t)}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("textarea-container"),this.name&&this.container.classList.add(`name-${this.name}`),this.topline=document.createElement("div"),this.topline.classList.add("topline"),this.label&&this.topline.appendChild(this.labelobj),this.topcontrol&&this.topline.appendChild(this.topcontrol),this.container.appendChild(this.topline);let t=document.createElement("div");t.classList.add("wrap"),t.appendChild(this.input),this.container.appendChild(t),this.container.appendChild(this.passivebox),this.container.appendChild(this.messagebox),this.postContainerScrub()}}window.TextArea=TextArea;class URIInput extends TextInput{static get DEFAULT_CONFIG(){return{type:"text",forceconstraints:!0}}static get DEFAULT_CONFIG_DOCUMENTATION(){return{forceconstraints:{type:"option",datatype:"boolean",description:"If true, enforce that the value is a valid web address address."}}}static isEncoded(t){return(t=t||"")!==decodeURIComponent(t)}static isValid(t){return new RegExp(/\w+:(\/?\/?)[^\s]+/).test(t)}constructor(t){t||(t={}),(t=Object.assign({},URIInput.DEFAULT_CONFIG,t)).value&&URIInput.isEncoded(t.value)&&(t.value=decodeURIComponent(t.value)),super(t)}get inputmode(){return"text"}calculatePlaceholder(){return TextFactory.get("urlinput-placeholder-default")}localValidator(){this.value&&this.forceconstraints&&(URIInput.isValid(this.value)||this.errors.push(TextFactory.get("urlinput-error-invalid_web_address")))}}window.URIInput=URIInput;class ImageSelector extends SelectMenu{static get DEFAULT_CONFIG(){return{unselectedtext:TextFactory.get("select_image")}}constructor(t){t||(t={}),t.classes||(t.classes=[]),t.classes.push("imageselector-container"),super(t=Object.assign({},ImageSelector.DEFAULT_CONFIG,t))}get passivetext(){let t=document.createElement("img");return t.setAttribute("src",this.config.value),t}set value(t){this.config.value=t,this.triggerbox.value=t,this.setPassiveboxValue(t)}get value(){return this.config.value}setPassiveboxValue(t){this.passivebox.setAttribute("src",t)}drawPayload(t){let e=document.createElement("div");if(e.classList.add("imagesel"),t.url){let i=document.createElement("div");i.classList.add("thumbnail"),i.style.backgroundImage=`url('${t.url}')`,e.appendChild(i)}let i=document.createElement("div");if(i.classList.add("data"),i.innerHTML=`<span class="text">${t.label}</span>`,t.filesize||t.height&&t.width){let e=document.createElement("div");e.classList.add("meta"),t.filesize&&t.height&&t.width?e.innerHTML=`<span class="size">${t.filesize} bytes</span> &middot; <span class="dimensions">${t.height}px x ${t.width}px</span>`:t.filesize?e.innerHTML=`<span class="size">${t.filesize} bytes</span>`:t.height&&t.width&&(e.innerHTML=`<span class="dimensions">${t.height}px x ${t.width}px</span>`),i.appendChild(e)}return e.appendChild(i),e}}window.ImageSelector=ImageSelector;class CountryMenu extends SelectMenu{static get DEFAULT_CONFIG(){return{unselectedtext:TextFactory.get("countrymenu_select"),options:(new CountryCode).options,valuesas:"code"}}constructor(t){if(t||(t={}),(t=Object.assign({},CountryMenu.DEFAULT_CONFIG,t)).valuesas&&"name"===t.valuesas){t.options=[];let e=(new CountryCode).list;for(let i of e)t.options.push({label:i.name,value:i.name})}if(t.value)for(let e of t.options)t.value.toUpperCase()!==e.value&&t.value.toUpperCase()!==e.label||(e.checked=!0);super(t)}}window.CountryMenu=CountryMenu;class StateMenu extends SelectMenu{static get DEFAULT_CONFIG(){return{unselectedtext:TextFactory.get("statemenu_select"),valuesas:"code",options:(new StateProvince).options,set:null}}constructor(t){t||(t={}),t=Object.assign({},StateMenu.DEFAULT_CONFIG,t);let e=(new StateProvince).set(t.set);t.options=[];for(let i of e){let e={label:i.name};t.valuesas&&"name"===t.valuesas?e.value=i.name:e.value=i.id,!t.value||t.value.toUpperCase()!==i.id&&t.value.toUpperCase()!==i.name||(e.checked=!0),t.options.push(e)}super(t)}}window.StateMenu=StateMenu;class TimezoneMenu extends SelectMenu{static get DEFAULT_CONFIG(){return{unselectedtext:TextFactory.get("timezone_select"),options:(new TimeZoneDefinition).options,valuesas:"offset"}}constructor(t){t||(t={}),super(t=Object.assign({},TimezoneMenu.DEFAULT_CONFIG,t))}}window.TimezoneMenu=TimezoneMenu;class Chart{static get DEFAULT_CONFIG(){return{id:null,classes:[],label:null,source:null,width:500,height:500,data:[],svgId:null,sourcetype:"application/json",sourcemethod:"GET",charttype:"bar",help:null}}constructor(t){this.config=Object.assign({},Chart.DEFAULT_CONFIG,t),this.id||(this.id=`chart-${CFBUtils.getUniqueKey(5)}`),this.svgId||(this.svgId=`chart-${this.charttype}-${CFBUtils.getUniqueKey(5)}`)}get sourcebody(){return"get"===this.sourcemethod.toLowerCase()?null:JSON.stringify({id:this.id})}compile(){this.d3svg=d3.select(`svg#${this.svgId}`),this.d3margin={top:20,right:20,bottom:30,left:40},this.d3width=+this.d3svg.attr("width")-this.d3margin.left-this.d3margin.right,this.d3height=+this.d3svg.attr("height")-this.d3margin.top-this.d3margin.bottom,this.d3x=d3.scaleBand().rangeRound([0,this.d3width]).padding(.1),this.d3y=d3.scaleLinear().rangeRound([this.d3height,0]),this.d3g=this.d3svg.append("g"),this.d3g.attr("transform",`translate(${this.d3margin.left}, ${this.d3margin.top})`),this.chart()}chart(){this.d3x.domain(this.data.map((t=>t[this.xaxiskey]))),this.d3y.domain([0,d3.max(this.data,(t=>t[this.yaxiskey]))]),this.d3g.append("g").attr("class","axis axis--x").attr("transform",`translate(0, ${this.d3height})`).call(d3.axisBottom(this.d3x)),this.d3g.append("g").attr("class","axis axis--y").call(d3.axisLeft(this.d3y).ticks(10,"%")).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("Frequency"),this.d3g.selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("x",(t=>this.d3x(t[this.xaxiskey]))).attr("y",(t=>this.d3y(t[this.yaxiskey]))).attr("width",this.d3x.bandwidth()).attr("height",(t=>this.d3height-this.d3y(t[this.yaxiskey])))}load(t){fetch(this.source,{method:this.sourcemethod,headers:{"Content-Type":this.sourcetype},body:this.sourcebody}).then((t=>t.json())).then((e=>{t&&"function"==typeof t&&t(e)})).catch((t=>{console.error(t)}))}buildContainer(){this.container=document.createElement("div"),this.container.classList.add("chart-container");let t=document.createElement("div");if(t.classList.add("c"),this.label&&(this.container.innerHTML=`<div class="toprow"><label>${this.label}</label></label>`),this.yaxislabel){let e=document.createElement("div");e.classList.add("yaxis"),e.innerHTML=`<label>${this.yaxislabel}</label>`,t.appendChild(e)}if(t.appendChild(this.svg),this.container.appendChild(t),this.xaxislabel){let t=document.createElement("div");t.classList.add("xaxis"),t.innerHTML=`<label>${this.xaxislabel}</label>`,this.container.appendChild(t)}window.setTimeout((()=>{this.data&&this.data.length>0?this.compile():this.source&&this.load((t=>{console.log("done loading"),t.data&&(this.data=t.data),this.compile()}))}),200)}buildSVG(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("id",this.svgId),this.svg.setAttribute("width",this.width),this.svg.setAttribute("height",this.height),this.svg.setAttribute("viewBox",`0 0 ${this.width} ${this.height}`),this.svg.setAttribute("preserveAspectRatio","xMinYMin")}buildLabel(){if(!this.label)return null;this.labelobj=document.createElement("label"),this.labelobj.setAttribute("for",this.id),this.labelobj.innerHTML=this.label,this.help&&(this.helpicon=new HelpButton({help:this.help}),this.labelobj.appendChild(this.helpicon.button),this.labelobj.addEventListener("onmouseover",(()=>{this.helpicon.open()})),this.labelobj.addEventListener("onmouseout",(()=>{this.helpicon.close()})))}toString(){return CFBUtils.getConfig(this)}get charttype(){return this.config.charttype}set charttype(t){this.config.charttype=t}get classes(){return this.config.classes}set classes(t){this.config.classes=t}get container(){return this._container||this.buildContainer(),this._container}set container(t){this._container=t}get d3g(){return this._d3g}set d3g(t){this._d3g=t}get d3height(){return this._d3height}set d3height(t){this._d3height=t}get d3margin(){return this._d3margin}set d3margin(t){this._d3margin=t}get d3svg(){return this._d3svg}set d3svg(t){this._d3svg=t}get d3width(){return this._d3width}set d3width(t){this._d3width=t}get d3x(){return this._d3x}set d3x(t){this._d3x=t}get d3y(){return this._d3y}set d3y(t){this._d3y=t}get data(){return this.config.data}set data(t){this.config.data}get height(){return this.config.height}set height(t){this.config.height=t}get help(){return this.config.help}set help(t){this.config.help=t}get helpicon(){return this._helpicon}set helpicon(t){this._helpicon=t}get id(){return this.config.id}set id(t){this.config.id=t}get label(){return this.config.label}set label(t){this.config.label=t}get labelobj(){return this._labelobj||this.buildLabel(),this._labelobj}set labelobj(t){this._labelobj=t}get source(){return this.config.source}set source(t){this.config.source=t}get sourcemethod(){return this.config.sourcemethod}set sourcemethod(t){this.config.sourcemethod=t}get sourcetype(){return this.config.sourcetype}set sourcetype(t){this.config.sourcetype=t}get svg(){return this._svg||this.buildSVG(),this._svg}set svg(t){this._svg=t}get svgId(){return this.config.svgId}set svgId(t){this.config.svgId=t}get width(){return this.config.width}set width(t){this.config.width=t}get xaxiskey(){return this.config.xaxiskey}set xaxiskey(t){this.config.xaxiskey=t}get xaxislabel(){return this.config.xaxislabel}set xaxislabel(t){this.config.xaxislabel=t}get yaxiskey(){return this.config.yaxiskey}set yaxiskey(t){this.config.yaxiskey=t}get yaxislabel(){return this.config.yaxislabel}set yaxislabel(t){this.config.yaxislabel=t}}window.Chart=Chart;class BarChart extends Chart{static get DEFAULT_CONFIG(){return{classes:["barchart"]}}constructor(t){super(t=Object.assign({},BarChart.DEFAULT_CONFIG,t))}}window.BarChart=BarChart;class LineChart extends Chart{static get DEFAULT_CONFIG(){return{classes:["linechart"]}}constructor(t){super(t=Object.assign({},LineChart.DEFAULT_CONFIG,t))}compile(){this.svg.setAttribute("viewBox",`-60 -30 ${this.width+90} ${this.height+90}`),this.d3svg=d3.select(`svg#${this.svgId}`).style("padding",0).style("margin",0);d3.timeFormat("%d-%b"),d3.timeFormat("%d-%b-%Y");for(let t of this.data)t.date=new Date(t.date);const t=d3.scaleLinear().rangeRound([this.height,0]),e=d3.scaleTime().range([0,this.width]);t.domain(d3.extent(this.data,(t=>t.value))),e.domain(d3.extent(this.data,(t=>t.date)));const i=d3.axisLeft().ticks(this.data.length).scale(t),s=d3.axisBottom().ticks(this.data.length).scale(e),n=d3.line().x((t=>e(t.date))).y((e=>t(e.value)));this.d3svg.append("g").attr("class","axis").call(i).append("text").attr("transform","rotate(-90)").attr("dy",".75em").attr("y",6).style("text-anchor","end").text("Total Session Count"),this.d3svg.append("g").attr("class","axis").attr("transform",`translate(0, ${this.height})`).call(s);const a=this.d3svg.selectAll("lines").data([this.data]).enter().append("g");a.append("path").attr("class","chart-line").attr("d",(t=>n(t)));const o=d3.select("body").append("div").attr("class","d3tooltip").style("opacity",0).style("position","absolute");a.selectAll("points").data((t=>t)).enter().append("circle").attr("class","pointmarker").attr("cx",(t=>e(t.date))).attr("cy",(e=>t(e.value))).attr("r",3).attr("class","point").style("opacity",1),a.selectAll("circles").data((t=>t)).enter().append("circle").attr("class","pointhover").attr("cx",(t=>e(t.date))).attr("cy",(e=>t(e.value))).attr("r",10).style("opacity",0).on("mouseover",(function(t,e){o.transition().delay(30).duration(200).style("opacity",1),o.html(e.value).style("left",t.pageX+25+"px").style("top",t.pageY+"px");d3.select(this).raise().transition().delay("20").duration("200").style("opacity",1)})).on("mouseout",(function(t){o.transition().duration(100).style("opacity",0);d3.select(this).transition().delay("20").duration("200").attr("r",10).style("opacity",0)}))}get dataset(){return this._dataset}set dataset(t){this._dataset=t}}window.LineChart=LineChart;